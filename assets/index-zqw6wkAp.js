var wl=Object.defineProperty;var bl=(n,e,t)=>e in n?wl(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var wt=(n,e,t)=>bl(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function he(){}function Zn(n){return n()}function Ht(){return Object.create(null)}function _e(n){n.forEach(Zn)}function Lt(n){return typeof n=="function"}function Pe(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}let ot;function Vt(n,e){return n===e?!0:(ot||(ot=document.createElement("a")),ot.href=e,n===ot.href)}function yl(n){return Object.keys(n).length===0}function Xn(n,...e){if(n==null){for(const l of e)l(void 0);return he}const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Be(n,e,t){n.$$.on_destroy.push(Xn(e,t))}function kl(n,e,t){return n.set(t),e}function r(n,e){n.appendChild(e)}function V(n,e,t){n.insertBefore(e,t||null)}function H(n){n.parentNode&&n.parentNode.removeChild(n)}function Me(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function m(n){return document.createElement(n)}function O(n){return document.createTextNode(n)}function y(){return O(" ")}function xe(){return O("")}function $(n,e,t,l){return n.addEventListener(e,t,l),()=>n.removeEventListener(e,t,l)}function xn(n){return function(e){return e.preventDefault(),n.call(this,e)}}function el(n){return function(e){return e.stopPropagation(),n.call(this,e)}}function h(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function Qt(n,e,t){const l=new Set;for(let i=0;i<n.length;i+=1)n[i].checked&&l.add(n[i].__value);return t||l.delete(e),Array.from(l)}function mt(n){let e;return{p(...t){e=t,e.forEach(l=>n.push(l))},r(){e.forEach(t=>n.splice(n.indexOf(t),1))}}}function Cl(n){return Array.from(n.childNodes)}function Y(n,e){e=""+e,n.data!==e&&(n.data=e)}function ie(n,e){n.value=e??""}function we(n,e,t,l){t==null?n.style.removeProperty(e):n.style.setProperty(e,t,"")}function ke(n,e,t){for(let l=0;l<n.options.length;l+=1){const i=n.options[l];if(i.__value===e){i.selected=!0;return}}(!t||e!==void 0)&&(n.selectedIndex=-1)}function qe(n){const e=n.querySelector(":checked");return e&&e.__value}function ge(n,e,t){n.classList.toggle(e,!!t)}let et;function Ze(n){et=n}function Sl(){if(!et)throw new Error("Function called outside component initialization");return et}function El(n){Sl().$$.on_destroy.push(n)}function jt(n,e){const t=n.$$.callbacks[e.type];t&&t.slice().forEach(l=>l.call(this,e))}const Ue=[],ut=[];let He=[];const zt=[],Tl=Promise.resolve();let Tt=!1;function Rl(){Tt||(Tt=!0,Tl.then(tl))}function Re(n){He.push(n)}const bt=new Set;let Oe=0;function tl(){if(Oe!==0)return;const n=et;do{try{for(;Oe<Ue.length;){const e=Ue[Oe];Oe++,Ze(e),Il(e.$$)}}catch(e){throw Ue.length=0,Oe=0,e}for(Ze(null),Ue.length=0,Oe=0;ut.length;)ut.pop()();for(let e=0;e<He.length;e+=1){const t=He[e];bt.has(t)||(bt.add(t),t())}He.length=0}while(Ue.length);for(;zt.length;)zt.pop()();Tt=!1,bt.clear(),Ze(n)}function Il(n){if(n.fragment!==null){n.update(),_e(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(Re)}}function Ml(n){const e=[],t=[];He.forEach(l=>n.indexOf(l)===-1?e.push(l):t.push(l)),t.forEach(l=>l()),He=e}const ct=new Set;let Le;function Nl(){Le={r:0,c:[],p:Le}}function Dl(){Le.r||_e(Le.c),Le=Le.p}function Te(n,e){n&&n.i&&(ct.delete(n),n.i(e))}function Ae(n,e,t,l){if(n&&n.o){if(ct.has(n))return;ct.add(n),Le.c.push(()=>{ct.delete(n),l&&(t&&n.d(1),l())}),n.o(e)}else l&&l()}function fe(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function Ve(n,e){n.d(1),e.delete(n.key)}function Qe(n,e,t,l,i,s,o,u,c,a,d,p){let f=n.length,g=s.length,_=f;const v={};for(;_--;)v[n[_].key]=_;const S=[],w=new Map,E=new Map,T=[];for(_=g;_--;){const C=p(i,s,_),I=t(C);let N=o.get(I);N?T.push(()=>N.p(C,e)):(N=a(I,C),N.c()),w.set(I,S[_]=N),I in v&&E.set(I,Math.abs(_-v[I]))}const R=new Set,B=new Set;function M(C){Te(C,1),C.m(u,d),o.set(C.key,C),d=C.first,g--}for(;f&&g;){const C=S[g-1],I=n[f-1],N=C.key,P=I.key;C===I?(d=C.first,f--,g--):w.has(P)?!o.has(N)||R.has(N)?M(C):B.has(P)?f--:E.get(N)>E.get(P)?(B.add(N),M(C)):(R.add(P),f--):(c(I,o),f--)}for(;f--;){const C=n[f];w.has(C.key)||c(C,o)}for(;g;)M(S[g-1]);return _e(T),S}function nt(n){n&&n.c()}function Ke(n,e,t){const{fragment:l,after_update:i}=n.$$;l&&l.m(e,t),Re(()=>{const s=n.$$.on_mount.map(Zn).filter(Lt);n.$$.on_destroy?n.$$.on_destroy.push(...s):_e(s),n.$$.on_mount=[]}),i.forEach(Re)}function We(n,e){const t=n.$$;t.fragment!==null&&(Ml(t.after_update),_e(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Ll(n,e){n.$$.dirty[0]===-1&&(Ue.push(n),Rl(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function Ge(n,e,t,l,i,s,o=null,u=[-1]){const c=et;Ze(n);const a=n.$$={fragment:null,ctx:[],props:s,update:he,not_equal:i,bound:Ht(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:Ht(),dirty:u,skip_bound:!1,root:e.target||c.$$.root};o&&o(a.root);let d=!1;if(a.ctx=t?t(n,e.props||{},(p,f,...g)=>{const _=g.length?g[0]:f;return a.ctx&&i(a.ctx[p],a.ctx[p]=_)&&(!a.skip_bound&&a.bound[p]&&a.bound[p](_),d&&Ll(n,p)),f}):[],a.update(),d=!0,_e(a.before_update),a.fragment=l?l(a.ctx):!1,e.target){if(e.hydrate){const p=Cl(e.target);a.fragment&&a.fragment.l(p),p.forEach(H)}else a.fragment&&a.fragment.c();e.intro&&Te(n.$$.fragment),Ke(n,e.target,e.anchor),tl()}Ze(c)}class Ye{constructor(){wt(this,"$$");wt(this,"$$set")}$destroy(){We(this,1),this.$destroy=he}$on(e,t){if(!Lt(t))return he;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(t),()=>{const i=l.indexOf(t);i!==-1&&l.splice(i,1)}}$set(e){this.$$set&&!yl(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Al="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Al);const Fe=[];function Bl(n,e){return{subscribe:At(n,e).subscribe}}function At(n,e=he){let t;const l=new Set;function i(u){if(Pe(n,u)&&(n=u,t)){const c=!Fe.length;for(const a of l)a[1](),Fe.push(a,n);if(c){for(let a=0;a<Fe.length;a+=2)Fe[a][0](Fe[a+1]);Fe.length=0}}}function s(u){i(u(n))}function o(u,c=he){const a=[u,c];return l.add(a),l.size===1&&(t=e(i,s)||he),u(n),()=>{l.delete(a),l.size===0&&t&&(t(),t=null)}}return{set:i,update:s,subscribe:o}}function Pl(n,e,t){const l=!Array.isArray(n),i=l?[n]:n;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const s=e.length<2;return Bl(t,(o,u)=>{let c=!1;const a=[];let d=0,p=he;const f=()=>{if(d)return;p();const _=e(l?a[0]:a,o,u);s?o(_):p=Lt(_)?_:he},g=i.map((_,v)=>Xn(_,S=>{a[v]=S,d&=~(1<<v),c&&f()},()=>{d|=1<<v}));return c=!0,f(),function(){_e(g),p(),c=!1}})}const $t=typeof window<"u",Jt="xc-timer-session";function Ol(){const n={id:crypto.randomUUID(),name:"New Session",teams:[],runners:[],times:[],unit:"km",created:Date.now(),updated:Date.now(),currentRace:""},{subscribe:e,set:t,update:l}=At(n);if($t){const i=localStorage.getItem(Jt);if(i)try{const s=JSON.parse(i);s.teams||(s.teams=[]),s.currentRace||(s.currentRace=""),s.runners&&(s.runners=s.runners.map(o=>{if(o.age&&!o.grade){let u="Freshman";return o.age>=18?u="Senior":o.age>=17?u="Junior":o.age>=16&&(u="Sophomore"),{id:o.id,name:o.name,grade:u,teamId:o.teamId||""}}return{id:o.id,name:o.name,grade:o.grade||"Freshman",teamId:o.teamId||""}})),t(s)}catch(s){console.error("Failed to load session from storage:",s)}}return e(i=>{$t&&localStorage.setItem(Jt,JSON.stringify(i))}),{subscribe:e,set:t,update:l,addTeam:i=>{l(s=>({...s,teams:[...s.teams,{...i,id:crypto.randomUUID()}],updated:Date.now()}))},removeTeam:i=>{l(s=>({...s,teams:s.teams.filter(o=>o.id!==i),runners:s.runners.map(o=>o.teamId===i?{...o,teamId:""}:o),updated:Date.now()}))},addRunner:i=>{l(s=>({...s,runners:[...s.runners,{...i,id:crypto.randomUUID()}],updated:Date.now()}))},removeRunner:i=>{l(s=>({...s,runners:s.runners.filter(o=>o.id!==i),times:s.times.filter(o=>o.runnerId!==i),updated:Date.now()}))},addTime:(i,s)=>{l(o=>({...o,times:[...o.times.filter(u=>!(u.runnerId===i.runnerId&&u.checkpoint===i.checkpoint)),{...i,timestamp:Date.now(),raceName:s||o.currentRace}],updated:Date.now()}))},removeTime:(i,s)=>{l(o=>({...o,times:o.times.filter(u=>!(u.runnerId===i&&u.checkpoint===s)),updated:Date.now()}))},setUnit:i=>{l(s=>({...s,unit:i,updated:Date.now()}))},setCurrentRace:i=>{l(s=>({...s,currentRace:i,updated:Date.now()}))},importData:i=>{l(s=>({...s,...i,updated:Date.now()}))},reset:()=>{const i={...n,id:crypto.randomUUID(),created:Date.now(),updated:Date.now()};t(i)}}}const ve=Ol(),Rt=At("setup"),Fl=Pl(ve,n=>n.unit==="km"?["1K","2K","3K","4K","5K"]:["1M","2M","3M","3.1M"]);function Ul(n){let e,t,l,i,s,o,u,c,a,d;return{c(){e=m("nav"),t=m("button"),t.textContent="üèÉ Setup",l=y(),i=m("button"),i.textContent="‚è±Ô∏è Timing",s=y(),o=m("button"),o.textContent="üì§ Share",u=y(),c=m("button"),c.textContent="üì• Import",h(t,"class","nav-btn svelte-nms0ce"),ge(t,"active",n[0]==="setup"),h(i,"class","nav-btn svelte-nms0ce"),ge(i,"active",n[0]==="timing"),h(o,"class","nav-btn svelte-nms0ce"),ge(o,"active",n[0]==="share"),h(c,"class","nav-btn svelte-nms0ce"),ge(c,"active",n[0]==="import"),h(e,"class","nav svelte-nms0ce")},m(p,f){V(p,e,f),r(e,t),r(e,l),r(e,i),r(e,s),r(e,o),r(e,u),r(e,c),a||(d=[$(t,"click",n[2]),$(i,"click",n[3]),$(o,"click",n[4]),$(c,"click",n[5])],a=!0)},p(p,[f]){f&1&&ge(t,"active",p[0]==="setup"),f&1&&ge(i,"active",p[0]==="timing"),f&1&&ge(o,"active",p[0]==="share"),f&1&&ge(c,"active",p[0]==="import")},i:he,o:he,d(p){p&&H(e),a=!1,_e(d)}}}function ql(n,e,t){let l;Be(n,Rt,a=>t(0,l=a));function i(a){kl(Rt,l=a,l)}return[l,i,()=>i("setup"),()=>i("timing"),()=>i("share"),()=>i("import")]}class Hl extends Ye{constructor(e){super(),Ge(this,e,ql,Ul,Pe,{})}}function Kt(n,e,t){const l=n.slice();l[36]=e[t];const i=l[20](l[36].id);return l[37]=i,l}function Wt(n,e,t){const l=n.slice();return l[40]=e[t],l}function Gt(n,e,t){const l=n.slice();return l[36]=e[t],l}function Yt(n,e,t){const l=n.slice();return l[36]=e[t],l}function Zt(n,e,t){const l=n.slice();return l[47]=e[t],l}function Xt(n){let e,t,l,i,s,o,u,c,a,d,p,f,g,_,v,S,w,E,T,R,B=fe(n[11]),M=[];for(let C=0;C<B.length;C+=1)M[C]=xt(Zt(n,B,C));return{c(){e=m("form"),t=m("div"),l=m("div"),i=m("label"),i.textContent="Team Name",s=y(),o=m("input"),u=y(),c=m("div"),a=m("label"),a.textContent="Team Color",d=y(),p=m("div"),f=m("input"),g=y(),_=m("div");for(let C=0;C<M.length;C+=1)M[C].c();v=y(),S=m("button"),w=O("Create Team"),h(i,"for","team-name"),h(i,"class","svelte-1r1d1yc"),h(o,"id","team-name"),h(o,"type","text"),h(o,"placeholder","e.g., Girls Team, Boys Team"),o.required=!0,h(o,"class","svelte-1r1d1yc"),h(l,"class","form-group svelte-1r1d1yc"),h(a,"for","team-color"),h(a,"class","svelte-1r1d1yc"),h(f,"id","team-color"),h(f,"type","color"),h(f,"class","color-input svelte-1r1d1yc"),h(_,"class","color-options svelte-1r1d1yc"),h(p,"class","color-picker svelte-1r1d1yc"),h(c,"class","form-group svelte-1r1d1yc"),h(t,"class","form-row svelte-1r1d1yc"),h(S,"type","submit"),h(S,"class","add-btn svelte-1r1d1yc"),S.disabled=E=!n[3].trim(),h(e,"class","team-form svelte-1r1d1yc")},m(C,I){V(C,e,I),r(e,t),r(t,l),r(l,i),r(l,s),r(l,o),ie(o,n[3]),r(t,u),r(t,c),r(c,a),r(c,d),r(c,p),r(p,f),ie(f,n[4]),r(p,g),r(p,_);for(let N=0;N<M.length;N+=1)M[N]&&M[N].m(_,null);r(e,v),r(e,S),r(S,w),T||(R=[$(o,"input",n[27]),$(o,"keydown",n[21]),$(f,"input",n[28]),$(e,"submit",xn(n[12]))],T=!0)},p(C,I){if(I[0]&8&&o.value!==C[3]&&ie(o,C[3]),I[0]&16&&ie(f,C[4]),I[0]&2064){B=fe(C[11]);let N;for(N=0;N<B.length;N+=1){const P=Zt(C,B,N);M[N]?M[N].p(P,I):(M[N]=xt(P),M[N].c(),M[N].m(_,null))}for(;N<M.length;N+=1)M[N].d(1);M.length=B.length}I[0]&8&&E!==(E=!C[3].trim())&&(S.disabled=E)},d(C){C&&H(e),Me(M,C),T=!1,_e(R)}}}function xt(n){let e,t,l;function i(){return n[29](n[47])}return{c(){e=m("button"),h(e,"type","button"),h(e,"class","color-option svelte-1r1d1yc"),we(e,"background-color",n[47]),ge(e,"selected",n[4]===n[47])},m(s,o){V(s,e,o),t||(l=$(e,"click",i),t=!0)},p(s,o){n=s,o[0]&2064&&ge(e,"selected",n[4]===n[47])},d(s){s&&H(e),t=!1,l()}}}function en(n,e){let t,l,i,s=e[36].name+"",o,u,c,a=e[20](e[36].id).length+"",d,p,f,g,_,v;function S(){return e[30](e[36])}return{key:n,first:null,c(){t=m("div"),l=m("div"),i=m("div"),o=O(s),u=y(),c=m("div"),d=O(a),p=O(" runners"),f=y(),g=m("button"),g.textContent="‚úï",h(i,"class","team-name svelte-1r1d1yc"),h(c,"class","team-stats svelte-1r1d1yc"),h(l,"class","team-info svelte-1r1d1yc"),h(g,"class","remove-btn svelte-1r1d1yc"),h(g,"title","Remove team"),h(t,"class","team-card svelte-1r1d1yc"),we(t,"border-left","4px solid "+e[36].color),this.first=t},m(w,E){V(w,t,E),r(t,l),r(l,i),r(i,o),r(l,u),r(l,c),r(c,d),r(c,p),r(t,f),r(t,g),_||(v=$(g,"click",S),_=!0)},p(w,E){e=w,E[0]&1024&&s!==(s=e[36].name+"")&&Y(o,s),E[0]&1024&&a!==(a=e[20](e[36].id).length+"")&&Y(d,a),E[0]&1024&&we(t,"border-left","4px solid "+e[36].color)},d(w){w&&H(t),_=!1,v()}}}function tn(n){let e;return{c(){e=m("div"),e.textContent="No teams created yet. Create a team to start adding runners!",h(e,"class","empty-state svelte-1r1d1yc")},m(t,l){V(t,e,l)},d(t){t&&H(e)}}}function Vl(n){let e,t,l,i,s,o,u,c,a,d,p,f,g,_,v,S,w,E,T,R,B,M,C,I,N,P,Q,k=fe(n[10].teams),b=[];for(let A=0;A<k.length;A+=1)b[A]=nn(Gt(n,k,A));return{c(){e=m("form"),t=m("div"),l=m("label"),l.textContent="Team",i=y(),s=m("select"),o=m("option"),o.textContent="Select a team";for(let A=0;A<b.length;A+=1)b[A].c();u=y(),c=m("div"),a=m("div"),d=m("label"),d.textContent="Runner Name",p=y(),f=m("input"),g=y(),_=m("div"),v=m("label"),v.textContent="Grade",S=y(),w=m("select"),E=m("option"),E.textContent="Freshman",T=m("option"),T.textContent="Sophomore",R=m("option"),R.textContent="Junior",B=m("option"),B.textContent="Senior",M=y(),C=m("button"),I=O("Add Runner"),h(l,"for","team-select"),h(l,"class","svelte-1r1d1yc"),o.__value="",ie(o,o.__value),h(s,"id","team-select"),s.required=!0,h(s,"class","svelte-1r1d1yc"),n[2]===void 0&&Re(()=>n[31].call(s)),h(t,"class","form-group svelte-1r1d1yc"),h(d,"for","name"),h(d,"class","svelte-1r1d1yc"),h(f,"id","name"),h(f,"type","text"),h(f,"placeholder","Enter runner name"),f.required=!0,h(f,"class","svelte-1r1d1yc"),h(a,"class","form-group svelte-1r1d1yc"),h(v,"for","grade"),h(v,"class","svelte-1r1d1yc"),E.__value="Freshman",ie(E,E.__value),T.__value="Sophomore",ie(T,T.__value),R.__value="Junior",ie(R,R.__value),B.__value="Senior",ie(B,B.__value),h(w,"id","grade"),w.required=!0,h(w,"class","svelte-1r1d1yc"),n[1]===void 0&&Re(()=>n[33].call(w)),h(_,"class","form-group svelte-1r1d1yc"),h(c,"class","form-row svelte-1r1d1yc"),h(C,"type","submit"),h(C,"class","add-btn svelte-1r1d1yc"),C.disabled=N=!n[0].trim()||!n[2],h(e,"class","add-runner-form svelte-1r1d1yc")},m(A,G){V(A,e,G),r(e,t),r(t,l),r(t,i),r(t,s),r(s,o);for(let z=0;z<b.length;z+=1)b[z]&&b[z].m(s,null);ke(s,n[2],!0),r(e,u),r(e,c),r(c,a),r(a,d),r(a,p),r(a,f),ie(f,n[0]),r(c,g),r(c,_),r(_,v),r(_,S),r(_,w),r(w,E),r(w,T),r(w,R),r(w,B),ke(w,n[1],!0),r(e,M),r(e,C),r(C,I),P||(Q=[$(s,"change",n[31]),$(f,"input",n[32]),$(f,"keydown",n[21]),$(w,"change",n[33]),$(e,"submit",xn(n[16]))],P=!0)},p(A,G){if(G[0]&1024){k=fe(A[10].teams);let z;for(z=0;z<k.length;z+=1){const Z=Gt(A,k,z);b[z]?b[z].p(Z,G):(b[z]=nn(Z),b[z].c(),b[z].m(s,null))}for(;z<b.length;z+=1)b[z].d(1);b.length=k.length}G[0]&1028&&ke(s,A[2]),G[0]&1&&f.value!==A[0]&&ie(f,A[0]),G[0]&2&&ke(w,A[1]),G[0]&1029&&N!==(N=!A[0].trim()||!A[2])&&(C.disabled=N)},d(A){A&&H(e),Me(b,A),P=!1,_e(Q)}}}function Ql(n){let e;return{c(){e=m("div"),e.textContent="Please create at least one team before adding runners.",h(e,"class","no-teams-message svelte-1r1d1yc")},m(t,l){V(t,e,l)},p:he,d(t){t&&H(e)}}}function nn(n){let e,t=n[36].name+"",l,i;return{c(){e=m("option"),l=O(t),e.__value=i=n[36].id,ie(e,e.__value)},m(s,o){V(s,e,o),r(e,l)},p(s,o){o[0]&1024&&t!==(t=s[36].name+"")&&Y(l,t),o[0]&1024&&i!==(i=s[36].id)&&(e.__value=i,ie(e,e.__value))},d(s){s&&H(e)}}}function ln(n){let e,t,l=n[36].name+"",i,s,o=n[37].length+"",u,c,a,d,p=[],f=new Map,g=fe(n[37]);const _=v=>v[40].id;for(let v=0;v<g.length;v+=1){let S=Wt(n,g,v),w=_(S);f.set(w,p[v]=sn(w,S))}return{c(){e=m("div"),t=m("h4"),i=O(l),s=O(" ("),u=O(o),c=O(")"),a=y(),d=m("div");for(let v=0;v<p.length;v+=1)p[v].c();we(t,"color",n[36].color),h(t,"class","svelte-1r1d1yc"),h(d,"class","runners-grid svelte-1r1d1yc"),h(e,"class","team-runners-section svelte-1r1d1yc")},m(v,S){V(v,e,S),r(e,t),r(t,i),r(t,s),r(t,u),r(t,c),r(e,a),r(e,d);for(let w=0;w<p.length;w+=1)p[w]&&p[w].m(d,null)},p(v,S){S[0]&1024&&l!==(l=v[36].name+"")&&Y(i,l),S[0]&1024&&o!==(o=v[37].length+"")&&Y(u,o),S[0]&1024&&we(t,"color",v[36].color),S[0]&1180672&&(g=fe(v[37]),p=Qe(p,S,_,1,v,g,f,d,Ve,sn,null,Wt))},d(v){v&&H(e);for(let S=0;S<p.length;S+=1)p[S].d()}}}function sn(n,e){let t,l,i,s=e[40].name+"",o,u,c,a=e[40].grade+"",d,p,f,g,_;function v(){return e[34](e[40])}return{key:n,first:null,c(){t=m("div"),l=m("div"),i=m("div"),o=O(s),u=y(),c=m("div"),d=O(a),p=y(),f=m("button"),f.textContent="‚úï",h(i,"class","runner-name svelte-1r1d1yc"),h(c,"class","runner-details svelte-1r1d1yc"),h(l,"class","runner-info svelte-1r1d1yc"),h(f,"class","remove-btn svelte-1r1d1yc"),h(f,"title","Remove runner"),h(t,"class","runner-card svelte-1r1d1yc"),we(t,"border-left","4px solid "+e[36].color),this.first=t},m(S,w){V(S,t,w),r(t,l),r(l,i),r(i,o),r(l,u),r(l,c),r(c,d),r(t,p),r(t,f),g||(_=$(f,"click",v),g=!0)},p(S,w){e=S,w[0]&1024&&s!==(s=e[40].name+"")&&Y(o,s),w[0]&1024&&a!==(a=e[40].grade+"")&&Y(d,a),w[0]&1024&&we(t,"border-left","4px solid "+e[36].color)},d(S){S&&H(t),g=!1,_()}}}function on(n,e){let t,l,i=e[37].length>0&&ln(e);return{key:n,first:null,c(){t=xe(),i&&i.c(),l=xe(),this.first=t},m(s,o){V(s,t,o),i&&i.m(s,o),V(s,l,o)},p(s,o){e=s,e[37].length>0?i?i.p(e,o):(i=ln(e),i.c(),i.m(l.parentNode,l)):i&&(i.d(1),i=null)},d(s){s&&(H(t),H(l)),i&&i.d(s)}}}function rn(n){let e;return{c(){e=m("div"),e.textContent="No runners added yet. Add some runners to get started!",h(e,"class","empty-state svelte-1r1d1yc")},m(t,l){V(t,e,l)},d(t){t&&H(e)}}}function an(n){let e,t,l,i,s,o,u,c,a=n[9].name+"",d,p,f,g,_,v,S,w,E,T;function R(C,I){return C[9].runnerCount>0?zl:jl}let B=R(n),M=B(n);return{c(){e=m("div"),t=m("div"),l=m("div"),l.innerHTML='<h3 class="svelte-1r1d1yc">Remove Team</h3>',i=y(),s=m("div"),o=m("p"),u=O("Are you sure you'd like to remove the team "),c=m("strong"),d=O(a),p=O("?"),f=y(),M.c(),g=y(),_=m("div"),v=m("button"),v.textContent="Cancel",S=y(),w=m("button"),w.textContent="Remove Team",h(l,"class","dialog-header svelte-1r1d1yc"),h(o,"class","svelte-1r1d1yc"),h(s,"class","dialog-content svelte-1r1d1yc"),h(v,"class","dialog-btn cancel-btn svelte-1r1d1yc"),h(w,"class","dialog-btn confirm-btn svelte-1r1d1yc"),h(_,"class","dialog-actions svelte-1r1d1yc"),h(t,"class","confirmation-dialog svelte-1r1d1yc"),h(e,"class","modal-overlay svelte-1r1d1yc")},m(C,I){V(C,e,I),r(e,t),r(t,l),r(t,i),r(t,s),r(s,o),r(o,u),r(o,c),r(c,d),r(o,p),r(s,f),M.m(s,null),r(t,g),r(t,_),r(_,v),r(_,S),r(_,w),E||(T=[$(v,"click",n[15]),$(w,"click",n[14]),$(t,"click",el(n[23])),$(e,"click",n[15])],E=!0)},p(C,I){I[0]&512&&a!==(a=C[9].name+"")&&Y(d,a),B===(B=R(C))&&M?M.p(C,I):(M.d(1),M=B(C),M&&(M.c(),M.m(s,null)))},d(C){C&&H(e),M.d(),E=!1,_e(T)}}}function jl(n){let e;return{c(){e=m("p"),e.textContent="This team has no runners, so no additional data will be removed.",h(e,"class","info-text svelte-1r1d1yc")},m(t,l){V(t,e,l)},p:he,d(t){t&&H(e)}}}function zl(n){let e,t,l=n[9].runnerCount+"",i,s,o=n[9].runnerCount===1?"":"s",u,c;return{c(){e=m("p"),t=O("This will remove "),i=O(l),s=O(" runner"),u=O(o),c=O(" and all their recorded times."),h(e,"class","warning-text svelte-1r1d1yc")},m(a,d){V(a,e,d),r(e,t),r(e,i),r(e,s),r(e,u),r(e,c)},p(a,d){d[0]&512&&l!==(l=a[9].runnerCount+"")&&Y(i,l),d[0]&512&&o!==(o=a[9].runnerCount===1?"":"s")&&Y(u,o)},d(a){a&&H(e)}}}function cn(n){let e,t,l,i,s,o,u,c,a=n[7].name+"",d,p,f,g=n[7].teamName+"",_,v,S,w,E,T,R,B,M,C,I;return{c(){e=m("div"),t=m("div"),l=m("div"),l.innerHTML='<h3 class="svelte-1r1d1yc">Remove Runner</h3>',i=y(),s=m("div"),o=m("p"),u=O("Are you sure you'd like to remove "),c=m("strong"),d=O(a),p=O(" from "),f=m("strong"),_=O(g),v=O("?"),S=y(),w=m("p"),w.textContent="This will also remove all recorded times for this runner.",E=y(),T=m("div"),R=m("button"),R.textContent="Cancel",B=y(),M=m("button"),M.textContent="Remove Runner",h(l,"class","dialog-header svelte-1r1d1yc"),h(o,"class","svelte-1r1d1yc"),h(w,"class","warning-text svelte-1r1d1yc"),h(s,"class","dialog-content svelte-1r1d1yc"),h(R,"class","dialog-btn cancel-btn svelte-1r1d1yc"),h(M,"class","dialog-btn confirm-btn svelte-1r1d1yc"),h(T,"class","dialog-actions svelte-1r1d1yc"),h(t,"class","confirmation-dialog svelte-1r1d1yc"),h(e,"class","modal-overlay svelte-1r1d1yc")},m(N,P){V(N,e,P),r(e,t),r(t,l),r(t,i),r(t,s),r(s,o),r(o,u),r(o,c),r(c,d),r(o,p),r(o,f),r(f,_),r(o,v),r(s,S),r(s,w),r(t,E),r(t,T),r(T,R),r(T,B),r(T,M),C||(I=[$(R,"click",n[19]),$(M,"click",n[18]),$(t,"click",el(n[22])),$(e,"click",n[19])],C=!0)},p(N,P){P[0]&128&&a!==(a=N[7].name+"")&&Y(d,a),P[0]&128&&g!==(g=N[7].teamName+"")&&Y(_,g)},d(N){N&&H(e),C=!1,_e(I)}}}function $l(n){let e,t,l,i,s,o,u,c,a,d,p,f,g,_=n[10].teams.length+"",v,S,w,E,T=n[5]?"Cancel":"+ Add Team",R,B,M,C,I=[],N=new Map,P,Q,k,b,A,G,z,Z=[],ue=new Map,ee,se,J,pe,K,X,oe=n[5]&&Xt(n),de=fe(n[10].teams);const ce=D=>D[36].id;for(let D=0;D<de.length;D+=1){let q=Yt(n,de,D),W=ce(q);N.set(W,I[D]=en(W,q))}let te=n[10].teams.length===0&&tn();function j(D,q){return D[10].teams.length===0?Ql:Vl}let L=j(n),U=L(n),x=fe(n[10].teams);const me=D=>D[36].id;for(let D=0;D<x.length;D+=1){let q=Kt(n,x,D),W=me(q);ue.set(W,Z[D]=on(W,q))}let ae=n[10].runners.length===0&&n[10].teams.length>0&&rn(),le=n[8]&&n[9]&&an(n),F=n[6]&&n[7]&&cn(n);return{c(){e=m("div"),t=m("div"),l=m("h2"),l.textContent="Runner Setup",i=y(),s=m("div"),o=m("button"),o.textContent="Kilometers",u=y(),c=m("button"),c.textContent="Miles",a=y(),d=m("div"),p=m("div"),f=m("h3"),g=O("Teams ("),v=O(_),S=O(")"),w=y(),E=m("button"),R=O(T),B=y(),oe&&oe.c(),M=y(),C=m("div");for(let D=0;D<I.length;D+=1)I[D].c();P=y(),te&&te.c(),Q=y(),k=m("div"),b=m("h3"),b.textContent="Add Runner",A=y(),U.c(),G=y(),z=m("div");for(let D=0;D<Z.length;D+=1)Z[D].c();ee=y(),ae&&ae.c(),se=y(),le&&le.c(),J=y(),F&&F.c(),pe=xe(),h(l,"class","svelte-1r1d1yc"),h(o,"class","unit-btn svelte-1r1d1yc"),ge(o,"active",n[10].unit==="km"),h(c,"class","unit-btn svelte-1r1d1yc"),ge(c,"active",n[10].unit==="miles"),h(s,"class","unit-toggle svelte-1r1d1yc"),h(t,"class","header svelte-1r1d1yc"),h(f,"class","svelte-1r1d1yc"),h(E,"class","add-team-btn svelte-1r1d1yc"),ge(E,"active",n[5]),h(p,"class","section-header svelte-1r1d1yc"),h(C,"class","teams-list svelte-1r1d1yc"),h(d,"class","teams-section svelte-1r1d1yc"),h(b,"class","svelte-1r1d1yc"),h(k,"class","runners-section svelte-1r1d1yc"),h(z,"class","runners-by-team svelte-1r1d1yc"),h(e,"class","setup-container svelte-1r1d1yc")},m(D,q){V(D,e,q),r(e,t),r(t,l),r(t,i),r(t,s),r(s,o),r(s,u),r(s,c),r(e,a),r(e,d),r(d,p),r(p,f),r(f,g),r(f,v),r(f,S),r(p,w),r(p,E),r(E,R),r(d,B),oe&&oe.m(d,null),r(d,M),r(d,C);for(let W=0;W<I.length;W+=1)I[W]&&I[W].m(C,null);r(C,P),te&&te.m(C,null),r(e,Q),r(e,k),r(k,b),r(k,A),U.m(k,null),r(e,G),r(e,z);for(let W=0;W<Z.length;W+=1)Z[W]&&Z[W].m(z,null);r(z,ee),ae&&ae.m(z,null),V(D,se,q),le&&le.m(D,q),V(D,J,q),F&&F.m(D,q),V(D,pe,q),K||(X=[$(window,"keydown",n[21]),$(o,"click",n[24]),$(c,"click",n[25]),$(E,"click",n[26])],K=!0)},p(D,q){q[0]&1024&&ge(o,"active",D[10].unit==="km"),q[0]&1024&&ge(c,"active",D[10].unit==="miles"),q[0]&1024&&_!==(_=D[10].teams.length+"")&&Y(v,_),q[0]&32&&T!==(T=D[5]?"Cancel":"+ Add Team")&&Y(R,T),q[0]&32&&ge(E,"active",D[5]),D[5]?oe?oe.p(D,q):(oe=Xt(D),oe.c(),oe.m(d,M)):oe&&(oe.d(1),oe=null),q[0]&1057792&&(de=fe(D[10].teams),I=Qe(I,q,ce,1,D,de,N,C,Ve,en,P,Yt)),D[10].teams.length===0?te||(te=tn(),te.c(),te.m(C,null)):te&&(te.d(1),te=null),L===(L=j(D))&&U?U.p(D,q):(U.d(1),U=L(D),U&&(U.c(),U.m(k,null))),q[0]&1180672&&(x=fe(D[10].teams),Z=Qe(Z,q,me,1,D,x,ue,z,Ve,on,ee,Kt)),D[10].runners.length===0&&D[10].teams.length>0?ae||(ae=rn(),ae.c(),ae.m(z,null)):ae&&(ae.d(1),ae=null),D[8]&&D[9]?le?le.p(D,q):(le=an(D),le.c(),le.m(J.parentNode,J)):le&&(le.d(1),le=null),D[6]&&D[7]?F?F.p(D,q):(F=cn(D),F.c(),F.m(pe.parentNode,pe)):F&&(F.d(1),F=null)},i:he,o:he,d(D){D&&(H(e),H(se),H(J),H(pe)),oe&&oe.d();for(let q=0;q<I.length;q+=1)I[q].d();te&&te.d(),U.d();for(let q=0;q<Z.length;q+=1)Z[q].d();ae&&ae.d(),le&&le.d(D),F&&F.d(D),K=!1,_e(X)}}}function Jl(n,e,t){let l;Be(n,ve,K=>t(10,l=K));let i="",s="Freshman",o="",u="",c="#22c55e",a=!1,d=!1,p=null,f=!1,g=null;const _=["#22c55e","#3b82f6","#f97316","#ef4444","#8b5cf6","#06b6d4","#f59e0b","#10b981"];function v(){u.trim()&&(ve.addTeam({name:u.trim(),color:c}),t(3,u=""),t(4,c="#22c55e"),t(5,a=!1))}function S(K){const X=l.teams.find(de=>de.id===K),oe=I(K).length;X&&(t(9,g={id:X.id,name:X.name,runnerCount:oe}),t(8,f=!0))}function w(){g&&(ve.removeTeam(g.id),E())}function E(){t(9,g=null),t(8,f=!1)}function T(){!i.trim()||!o||(ve.addRunner({name:i.trim(),grade:s,teamId:o}),t(0,i=""),t(1,s="Freshman"))}function R(K){const X=l.runners.find(de=>de.id===K),oe=X?C(X.teamId):null;X&&oe&&(t(7,p={id:X.id,name:X.name,teamName:oe.name}),t(6,d=!0))}function B(){p&&(ve.removeRunner(p.id),M())}function M(){t(7,p=null),t(6,d=!1)}function C(K){return l.teams.find(X=>X.id===K)}function I(K){return l.runners.filter(X=>X.teamId===K)}function N(K){K.key==="Enter"&&(a&&u.trim()?v():!a&&i.trim()&&o&&T()),K.key==="Escape"&&(d?M():f&&E())}function P(K){jt.call(this,n,K)}function Q(K){jt.call(this,n,K)}const k=()=>ve.setUnit("km"),b=()=>ve.setUnit("miles"),A=()=>t(5,a=!a);function G(){u=this.value,t(3,u)}function z(){c=this.value,t(4,c)}const Z=K=>t(4,c=K),ue=K=>S(K.id);function ee(){o=qe(this),t(2,o)}function se(){i=this.value,t(0,i)}function J(){s=qe(this),t(1,s)}return[i,s,o,u,c,a,d,p,f,g,l,_,v,S,w,E,T,R,B,M,I,N,P,Q,k,b,A,G,z,Z,ue,ee,se,J,K=>R(K.id)]}class Kl extends Ye{constructor(e){super(),Ge(this,e,Jl,$l,Pe,{},null,[-1,-1])}}function un(n,e,t){const l=n.slice();l[25]=e[t];const i=l[14](l[25].teamId);return l[26]=i,l}function dn(n,e,t){const l=n.slice();l[25]=e[t];const i=l[14](l[25].teamId);return l[26]=i,l}function fn(n,e,t){const l=n.slice();return l[31]=e[t],l}function hn(n,e,t){const l=n.slice();return l[26]=e[t],l}function mn(n){let e;return{c(){e=m("div"),e.textContent="Enter a race name to begin timing",h(e,"class","input-hint svelte-1bc13oq")},m(t,l){V(t,e,l)},d(t){t&&H(e)}}}function Wl(n){let e,t,l;return{c(){e=m("button"),e.textContent="‚è∏Ô∏è Stop Timer",h(e,"class","timer-btn stop-btn svelte-1bc13oq")},m(i,s){V(i,e,s),t||(l=$(e,"click",n[10]),t=!0)},p:he,d(i){i&&H(e),t=!1,l()}}}function Gl(n){let e,t,l,i,s;return{c(){e=m("button"),t=O("‚ñ∂Ô∏è Start Timer"),h(e,"class","timer-btn start-btn svelte-1bc13oq"),e.disabled=l=n[0].length===0||!n[1]||!n[2].trim()},m(o,u){V(o,e,u),r(e,t),i||(s=$(e,"click",n[9]),i=!0)},p(o,u){u[0]&263&&l!==(l=o[0].length===0||!o[1]||!o[2].trim())&&(e.disabled=l)},d(o){o&&H(e),i=!1,s()}}}function gn(n,e){let t,l,i,s,o,u,c=e[26].name+"",a,d,p,f;function g(){return e[18](e[26])}return{key:n,first:null,c(){t=m("label"),l=m("input"),o=y(),u=m("span"),a=O(c),d=y(),h(l,"type","checkbox"),l.value=i=e[26].id,l.checked=s=e[0].includes(e[26].id),l.disabled=e[4],h(l,"class","svelte-1bc13oq"),h(u,"class","checkbox-label svelte-1bc13oq"),we(u,"color",e[26].color),h(t,"class","team-checkbox svelte-1bc13oq"),this.first=t},m(_,v){V(_,t,v),r(t,l),r(t,o),r(t,u),r(u,a),r(t,d),p||(f=$(l,"change",g),p=!0)},p(_,v){e=_,v[0]&8&&i!==(i=e[26].id)&&(l.value=i),v[0]&9&&s!==(s=e[0].includes(e[26].id))&&(l.checked=s),v[0]&16&&(l.disabled=e[4]),v[0]&8&&c!==(c=e[26].name+"")&&Y(a,c),v[0]&8&&we(u,"color",e[26].color)},d(_){_&&H(t),p=!1,f()}}}function pn(n){let e;return{c(){e=m("div"),e.textContent="Select at least one team",h(e,"class","selection-hint svelte-1bc13oq")},m(t,l){V(t,e,l)},d(t){t&&H(e)}}}function _n(n){let e,t=n[31]+"",l,i;return{c(){e=m("option"),l=O(t),e.__value=i=n[31],ie(e,e.__value)},m(s,o){V(s,e,o),r(e,l)},p(s,o){o[0]&256&&t!==(t=s[31]+"")&&Y(l,t),o[0]&256&&i!==(i=s[31])&&(e.__value=i,ie(e,e.__value))},d(s){s&&H(e)}}}function vn(n){let e;return{c(){e=m("div"),e.textContent="Select a checkpoint",h(e,"class","selection-hint svelte-1bc13oq")},m(t,l){V(t,e,l)},d(t){t&&H(e)}}}function Yl(n){let e,t,l,i,s;function o(a,d){if(a[3].teams.length===0)return xl;if(a[3].runners.length===0)return Xl}let u=o(n),c=u&&u(n);return{c(){e=m("div"),t=m("h3"),t.textContent="Setup Required",l=y(),i=m("p"),i.textContent="Please enter a race name, select team(s), and choose a checkpoint to begin timing.",s=y(),c&&c.c(),h(t,"class","svelte-1bc13oq"),h(e,"class","setup-message svelte-1bc13oq")},m(a,d){V(a,e,d),r(e,t),r(e,l),r(e,i),r(e,s),c&&c.m(e,null)},p(a,d){u!==(u=o(a))&&(c&&c.d(1),c=u&&u(a),c&&(c.c(),c.m(e,null)))},d(a){a&&H(e),c&&c.d()}}}function Zl(n){let e,t,l,i,s,o,u,c,a=n[15]()+"",d,p,f,g,_,v,S=n[6].length+"",w,E,T=n[7].length+"",R,B,M,C,I,N,P=n[4]&&n[6].length>0&&wn(n),Q=n[7].length>0&&yn(n),k=!n[4]&&n[6].length===0&&n[7].length===0&&Cn(n);return{c(){e=m("div"),t=m("div"),l=m("strong"),l.textContent="Race:",i=y(),s=O(n[2]),o=O(" ‚Ä¢ "),u=m("strong"),u.textContent="Timing:",c=y(),d=O(a),p=O(" at "),f=O(n[1]),g=y(),_=m("span"),v=O("("),w=O(S),E=O(" pending, "),R=O(T),B=O(" completed)"),M=y(),P&&P.c(),C=y(),Q&&Q.c(),I=y(),k&&k.c(),N=xe(),h(_,"class","runner-count svelte-1bc13oq"),h(t,"class","timing-summary svelte-1bc13oq"),h(e,"class","timing-info svelte-1bc13oq")},m(b,A){V(b,e,A),r(e,t),r(t,l),r(t,i),r(t,s),r(t,o),r(t,u),r(t,c),r(t,d),r(t,p),r(t,f),r(t,g),r(t,_),r(_,v),r(_,w),r(_,E),r(_,R),r(_,B),V(b,M,A),P&&P.m(b,A),V(b,C,A),Q&&Q.m(b,A),V(b,I,A),k&&k.m(b,A),V(b,N,A)},p(b,A){A[0]&4&&Y(s,b[2]),A[0]&2&&Y(f,b[1]),A[0]&64&&S!==(S=b[6].length+"")&&Y(w,S),A[0]&128&&T!==(T=b[7].length+"")&&Y(R,T),b[4]&&b[6].length>0?P?P.p(b,A):(P=wn(b),P.c(),P.m(C.parentNode,C)):P&&(P.d(1),P=null),b[7].length>0?Q?Q.p(b,A):(Q=yn(b),Q.c(),Q.m(I.parentNode,I)):Q&&(Q.d(1),Q=null),!b[4]&&b[6].length===0&&b[7].length===0?k?k.p(b,A):(k=Cn(b),k.c(),k.m(N.parentNode,N)):k&&(k.d(1),k=null)},d(b){b&&(H(e),H(M),H(C),H(I),H(N)),P&&P.d(b),Q&&Q.d(b),k&&k.d(b)}}}function Xl(n){let e;return{c(){e=m("p"),e.textContent="‚ö†Ô∏è No runners added yet. Go to Setup to add runners to your teams.",h(e,"class","warning svelte-1bc13oq")},m(t,l){V(t,e,l)},d(t){t&&H(e)}}}function xl(n){let e;return{c(){e=m("p"),e.textContent="‚ö†Ô∏è No teams created yet. Go to Setup to create teams and add runners.",h(e,"class","warning svelte-1bc13oq")},m(t,l){V(t,e,l)},d(t){t&&H(e)}}}function wn(n){let e,t,l,i,s=[],o=new Map,u=fe(n[6]);const c=a=>a[25].id;for(let a=0;a<u.length;a+=1){let d=dn(n,u,a),p=c(d);o.set(p,s[a]=bn(p,d))}return{c(){e=m("div"),t=m("h3"),t.textContent="Tap to Record Time",l=y(),i=m("div");for(let a=0;a<s.length;a+=1)s[a].c();h(t,"class","svelte-1bc13oq"),h(i,"class","available-runners svelte-1bc13oq"),h(e,"class","runners-timing-list svelte-1bc13oq")},m(a,d){V(a,e,d),r(e,t),r(e,l),r(e,i);for(let p=0;p<s.length;p+=1)s[p]&&s[p].m(i,null)},p(a,d){d[0]&24672&&(u=fe(a[6]),s=Qe(s,d,c,1,a,u,o,i,Ve,bn,null,dn))},d(a){a&&H(e);for(let d=0;d<s.length;d+=1)s[d].d()}}}function bn(n,e){var M;let t,l,i,s=e[25].name+"",o,u,c,a=e[25].grade+"",d,p,f=((M=e[26])==null?void 0:M.name)+"",g,_,v,S=dt(e[5])+"",w,E,T,R;function B(){return e[20](e[25])}return{key:n,first:null,c(){var C;t=m("div"),l=m("div"),i=m("div"),o=O(s),u=y(),c=m("div"),d=O(a),p=O(" ‚Ä¢ "),g=O(f),_=y(),v=m("button"),w=O(S),E=y(),h(i,"class","runner-name svelte-1bc13oq"),h(c,"class","runner-details svelte-1bc13oq"),h(l,"class","runner-info svelte-1bc13oq"),h(v,"class","time-btn svelte-1bc13oq"),h(t,"class","runner-timing-row svelte-1bc13oq"),we(t,"border-left","4px solid "+(((C=e[26])==null?void 0:C.color)||"#6b7280")),this.first=t},m(C,I){V(C,t,I),r(t,l),r(l,i),r(i,o),r(l,u),r(l,c),r(c,d),r(c,p),r(c,g),r(t,_),r(t,v),r(v,w),r(t,E),T||(R=$(v,"click",B),T=!0)},p(C,I){var N,P;e=C,I[0]&64&&s!==(s=e[25].name+"")&&Y(o,s),I[0]&64&&a!==(a=e[25].grade+"")&&Y(d,a),I[0]&64&&f!==(f=((N=e[26])==null?void 0:N.name)+"")&&Y(g,f),I[0]&32&&S!==(S=dt(e[5])+"")&&Y(w,S),I[0]&64&&we(t,"border-left","4px solid "+(((P=e[26])==null?void 0:P.color)||"#6b7280"))},d(C){C&&H(t),T=!1,R()}}}function yn(n){let e,t,l,i,s,o,u,c,a,d=[],p=new Map,f,g,_=fe(n[7]);const v=S=>S[25].id;for(let S=0;S<_.length;S+=1){let w=un(n,_,S),E=v(w);p.set(E,d[S]=kn(E,w))}return{c(){e=m("div"),t=m("div"),l=m("h3"),l.textContent="Recorded Times",i=y(),s=m("button"),o=O("üóëÔ∏è Reset Times"),c=y(),a=m("div");for(let S=0;S<d.length;S+=1)d[S].c();h(l,"class","svelte-1bc13oq"),h(s,"class","reset-checkpoint-btn svelte-1bc13oq"),h(s,"title",u="Clear all times for "+n[15]()+" at "+n[1]),h(t,"class","completed-header svelte-1bc13oq"),h(a,"class","completed-list svelte-1bc13oq"),h(e,"class","completed-runners svelte-1bc13oq")},m(S,w){V(S,e,w),r(e,t),r(t,l),r(t,i),r(t,s),r(s,o),r(e,c),r(e,a);for(let E=0;E<d.length;E+=1)d[E]&&d[E].m(a,null);f||(g=$(s,"click",n[11]),f=!0)},p(S,w){w[0]&258&&u!==(u="Clear all times for "+S[15]()+" at "+S[1])&&h(s,"title",u),w[0]&20608&&(_=fe(S[7]),d=Qe(d,w,v,1,S,_,p,a,Ve,kn,null,un))},d(S){S&&H(e);for(let w=0;w<d.length;w+=1)d[w].d();f=!1,g()}}}function kn(n,e){var Q;let t,l,i,s=e[25].name+"",o,u,c,a=e[25].grade+"",d,p,f=((Q=e[26])==null?void 0:Q.name)+"",g,_,v,S,w=e[25].recordedTime+"",E,T,R,B,M,C,I,N;function P(){return e[21](e[25])}return{key:n,first:null,c(){var k;t=m("div"),l=m("div"),i=m("div"),o=O(s),u=y(),c=m("div"),d=O(a),p=O(" ‚Ä¢ "),g=O(f),_=y(),v=m("div"),S=m("div"),E=O(w),T=y(),R=m("button"),B=O("‚Ü©Ô∏è"),C=y(),h(i,"class","runner-name svelte-1bc13oq"),h(c,"class","runner-details svelte-1bc13oq"),h(l,"class","runner-info svelte-1bc13oq"),h(S,"class","recorded-time svelte-1bc13oq"),h(R,"class","unset-btn svelte-1bc13oq"),h(R,"title",M="Remove time and return "+e[25].name+" to active timing"),h(v,"class","time-actions svelte-1bc13oq"),h(t,"class","completed-runner-row svelte-1bc13oq"),we(t,"border-left","4px solid "+(((k=e[26])==null?void 0:k.color)||"#6b7280")),this.first=t},m(k,b){V(k,t,b),r(t,l),r(l,i),r(i,o),r(l,u),r(l,c),r(c,d),r(c,p),r(c,g),r(t,_),r(t,v),r(v,S),r(S,E),r(v,T),r(v,R),r(R,B),r(t,C),I||(N=$(R,"click",P),I=!0)},p(k,b){var A,G;e=k,b[0]&128&&s!==(s=e[25].name+"")&&Y(o,s),b[0]&128&&a!==(a=e[25].grade+"")&&Y(d,a),b[0]&128&&f!==(f=((A=e[26])==null?void 0:A.name)+"")&&Y(g,f),b[0]&128&&w!==(w=e[25].recordedTime+"")&&Y(E,w),b[0]&128&&M!==(M="Remove time and return "+e[25].name+" to active timing")&&h(R,"title",M),b[0]&128&&we(t,"border-left","4px solid "+(((G=e[26])==null?void 0:G.color)||"#6b7280"))},d(k){k&&H(t),I=!1,N()}}}function Cn(n){let e,t,l,i;return{c(){e=m("div"),t=O("All runners from selected team(s) already have times recorded for "),l=O(n[1]),i=O("."),h(e,"class","no-runners-message svelte-1bc13oq")},m(s,o){V(s,e,o),r(e,t),r(e,l),r(e,i)},p(s,o){o[0]&2&&Y(l,s[1])},d(s){s&&H(e)}}}function ei(n){let e,t,l,i,s,o=dt(n[5])+"",u,c,a,d,p,f,g,_,v,S=!n[2].trim(),w,E,T,R,B,M,C,I,N=[],P=new Map,Q,k,b,A,G,z,Z,ue,ee,se,J,pe,K=S&&mn();function X(F,D){return F[4]?Wl:Gl}let oe=X(n),de=oe(n),ce=fe(n[3].teams);const te=F=>F[26].id;for(let F=0;F<ce.length;F+=1){let D=hn(n,ce,F),q=te(D);P.set(q,N[F]=gn(q,D))}let j=n[0].length===0&&pn(),L=fe(n[8]),U=[];for(let F=0;F<L.length;F+=1)U[F]=_n(fn(n,L,F));let x=!n[1]&&vn();function me(F,D){return D[0]&7&&(se=null),se==null&&(se=!!(F[0].length>0&&F[1]&&F[2].trim())),se?Zl:Yl}let ae=me(n,[-1,-1]),le=ae(n);return{c(){e=m("div"),t=m("div"),l=m("h2"),l.textContent="Race Timer",i=y(),s=m("div"),u=O(o),c=y(),a=m("div"),d=m("div"),p=m("div"),f=m("label"),f.textContent="Race Name",g=y(),_=m("input"),v=y(),K&&K.c(),w=y(),E=m("div"),de.c(),T=y(),R=m("div"),B=m("div"),M=m("label"),M.textContent="Select Team(s):",C=y(),I=m("div");for(let F=0;F<N.length;F+=1)N[F].c();Q=y(),j&&j.c(),k=y(),b=m("div"),A=m("label"),A.textContent="Checkpoint:",G=y(),z=m("select"),Z=m("option"),Z.textContent="Select Checkpoint";for(let F=0;F<U.length;F+=1)U[F].c();ue=y(),x&&x.c(),ee=y(),le.c(),h(l,"class","svelte-1bc13oq"),h(s,"class","timer-display svelte-1bc13oq"),ge(s,"running",n[4]),h(t,"class","header svelte-1bc13oq"),h(f,"for","race-name"),h(f,"class","svelte-1bc13oq"),h(_,"id","race-name"),h(_,"type","text"),h(_,"placeholder","e.g., State Championship, League Meet"),_.disabled=n[4],h(_,"class","race-input svelte-1bc13oq"),h(p,"class","form-group svelte-1bc13oq"),h(d,"class","race-input-section svelte-1bc13oq"),h(E,"class","timer-controls svelte-1bc13oq"),h(M,"class","svelte-1bc13oq"),h(I,"class","team-checkboxes svelte-1bc13oq"),h(B,"class","team-selection svelte-1bc13oq"),h(A,"for","checkpoint-select"),h(A,"class","svelte-1bc13oq"),Z.__value="",ie(Z,Z.__value),h(z,"id","checkpoint-select"),z.disabled=n[4],h(z,"class","svelte-1bc13oq"),n[1]===void 0&&Re(()=>n[19].call(z)),h(b,"class","checkpoint-selection svelte-1bc13oq"),h(R,"class","selection-controls svelte-1bc13oq"),h(a,"class","controls-section svelte-1bc13oq"),h(e,"class","timing-container svelte-1bc13oq")},m(F,D){V(F,e,D),r(e,t),r(t,l),r(t,i),r(t,s),r(s,u),r(e,c),r(e,a),r(a,d),r(d,p),r(p,f),r(p,g),r(p,_),ie(_,n[2]),r(p,v),K&&K.m(p,null),r(a,w),r(a,E),de.m(E,null),r(a,T),r(a,R),r(R,B),r(B,M),r(B,C),r(B,I);for(let q=0;q<N.length;q+=1)N[q]&&N[q].m(I,null);r(B,Q),j&&j.m(B,null),r(R,k),r(R,b),r(b,A),r(b,G),r(b,z),r(z,Z);for(let q=0;q<U.length;q+=1)U[q]&&U[q].m(z,null);ke(z,n[1],!0),r(b,ue),x&&x.m(b,null),r(e,ee),le.m(e,null),J||(pe=[$(_,"input",n[17]),$(z,"change",n[19])],J=!0)},p(F,D){if(D[0]&32&&o!==(o=dt(F[5])+"")&&Y(u,o),D[0]&16&&ge(s,"running",F[4]),D[0]&16&&(_.disabled=F[4]),D[0]&4&&_.value!==F[2]&&ie(_,F[2]),D[0]&4&&(S=!F[2].trim()),S?K||(K=mn(),K.c(),K.m(p,null)):K&&(K.d(1),K=null),oe===(oe=X(F))&&de?de.p(F,D):(de.d(1),de=oe(F),de&&(de.c(),de.m(E,null))),D[0]&65561&&(ce=fe(F[3].teams),N=Qe(N,D,te,1,F,ce,P,I,Ve,gn,null,hn)),F[0].length===0?j||(j=pn(),j.c(),j.m(B,null)):j&&(j.d(1),j=null),D[0]&256){L=fe(F[8]);let q;for(q=0;q<L.length;q+=1){const W=fn(F,L,q);U[q]?U[q].p(W,D):(U[q]=_n(W),U[q].c(),U[q].m(z,null))}for(;q<U.length;q+=1)U[q].d(1);U.length=L.length}D[0]&16&&(z.disabled=F[4]),D[0]&258&&ke(z,F[1]),F[1]?x&&(x.d(1),x=null):x||(x=vn(),x.c(),x.m(b,null)),ae===(ae=me(F,D))&&le?le.p(F,D):(le.d(1),le=ae(F),le&&(le.c(),le.m(e,null)))},i:he,o:he,d(F){F&&H(e),K&&K.d(),de.d();for(let D=0;D<N.length;D+=1)N[D].d();j&&j.d(),Me(U,F),x&&x.d(),le.d(),J=!1,_e(pe)}}}function dt(n){const e=Math.floor(n/1e3),t=Math.floor(e/60),l=e%60,i=Math.floor(n%1e3/10);return`${t.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}.${i.toString().padStart(2,"0")}`}function ti(n){const e=Math.floor(n/1e3),t=Math.floor(e/60),l=e%60;return`${t}:${l.toString().padStart(2,"0")}`}function ni(n,e,t){let l,i;Be(n,ve,k=>t(3,l=k)),Be(n,Fl,k=>t(8,i=k));let s=!1,o=0,u=0,c=null,a=[],d="",p="",f=[],g=[];function _(){const k=l.runners.filter(G=>a.includes(G.teamId)),b=[],A=[];k.forEach(G=>{const z=l.times.find(Z=>Z.runnerId===G.id&&Z.checkpoint===d);z?A.push({...G,recordedTime:z.time}):b.push(G)}),t(6,f=b),t(7,g=A)}function v(){a.length===0||!d||!p.trim()||(ve.setCurrentRace(p.trim()),o=Date.now(),t(5,u=0),t(4,s=!0),c=setInterval(()=>{t(5,u=Date.now()-o)},10))}function S(){t(4,s=!1),c&&(clearInterval(c),c=null)}function w(){ve.update(k=>({...k,times:k.times.filter(b=>{if(b.checkpoint!==d)return!0;const A=k.runners.find(G=>G.id===b.runnerId);return!A||!a.includes(A.teamId)}),updated:Date.now()}))}function E(k){ve.removeTime(k.id,d)}function T(k){if(!s)return;const b=ti(u);ve.addTime({runnerId:k.id,checkpoint:d,time:b},p.trim())}function R(k){return l.teams.find(b=>b.id===k)}function B(){return a.map(k=>{var b;return(b=R(k))==null?void 0:b.name}).filter(Boolean).join(", ")}function M(k){a.includes(k)?t(0,a=a.filter(b=>b!==k)):t(0,a=[...a,k])}El(()=>{c&&clearInterval(c)});function C(){p=this.value,t(2,p),t(3,l)}const I=k=>M(k.id);function N(){d=qe(this),t(1,d)}const P=k=>T(k),Q=k=>E(k);return n.$$.update=()=>{n.$$.dirty[0]&12&&l.currentRace&&!p&&t(2,p=l.currentRace),n.$$.dirty[0]&11&&(a.length>0&&d&&l?_():(t(6,f=[]),t(7,g=[])))},[a,d,p,l,s,u,f,g,i,v,S,w,E,T,R,B,M,C,I,N,P,Q]}class li extends Ye{constructor(e){super(),Ge(this,e,ni,ei,Pe,{},null,[-1,-1])}}var lt={},ii=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},nl={},be={};let Bt;const si=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];be.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};be.getSymbolTotalCodewords=function(e){return si[e]};be.getBCHDigit=function(n){let e=0;for(;n!==0;)e++,n>>>=1;return e};be.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');Bt=e};be.isKanjiModeEnabled=function(){return typeof Bt<"u"};be.toSJIS=function(e){return Bt(e)};var gt={};(function(n){n.L={bit:1},n.M={bit:0},n.Q={bit:3},n.H={bit:2};function e(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return n.L;case"m":case"medium":return n.M;case"q":case"quartile":return n.Q;case"h":case"high":return n.H;default:throw new Error("Unknown EC Level: "+t)}}n.isValid=function(l){return l&&typeof l.bit<"u"&&l.bit>=0&&l.bit<4},n.from=function(l,i){if(n.isValid(l))return l;try{return e(l)}catch{return i}}})(gt);function ll(){this.buffer=[],this.length=0}ll.prototype={get:function(n){const e=Math.floor(n/8);return(this.buffer[e]>>>7-n%8&1)===1},put:function(n,e){for(let t=0;t<e;t++)this.putBit((n>>>e-t-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(n){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),n&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var oi=ll;function it(n){if(!n||n<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=n,this.data=new Uint8Array(n*n),this.reservedBit=new Uint8Array(n*n)}it.prototype.set=function(n,e,t,l){const i=n*this.size+e;this.data[i]=t,l&&(this.reservedBit[i]=!0)};it.prototype.get=function(n,e){return this.data[n*this.size+e]};it.prototype.xor=function(n,e,t){this.data[n*this.size+e]^=t};it.prototype.isReserved=function(n,e){return this.reservedBit[n*this.size+e]};var ri=it,il={};(function(n){const e=be.getSymbolSize;n.getRowColCoords=function(l){if(l===1)return[];const i=Math.floor(l/7)+2,s=e(l),o=s===145?26:Math.ceil((s-13)/(2*i-2))*2,u=[s-7];for(let c=1;c<i-1;c++)u[c]=u[c-1]-o;return u.push(6),u.reverse()},n.getPositions=function(l){const i=[],s=n.getRowColCoords(l),o=s.length;for(let u=0;u<o;u++)for(let c=0;c<o;c++)u===0&&c===0||u===0&&c===o-1||u===o-1&&c===0||i.push([s[u],s[c]]);return i}})(il);var sl={};const ai=be.getSymbolSize,Sn=7;sl.getPositions=function(e){const t=ai(e);return[[0,0],[t-Sn,0],[0,t-Sn]]};var ol={};(function(n){n.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};n.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},n.from=function(i){return n.isValid(i)?parseInt(i,10):void 0},n.getPenaltyN1=function(i){const s=i.size;let o=0,u=0,c=0,a=null,d=null;for(let p=0;p<s;p++){u=c=0,a=d=null;for(let f=0;f<s;f++){let g=i.get(p,f);g===a?u++:(u>=5&&(o+=e.N1+(u-5)),a=g,u=1),g=i.get(f,p),g===d?c++:(c>=5&&(o+=e.N1+(c-5)),d=g,c=1)}u>=5&&(o+=e.N1+(u-5)),c>=5&&(o+=e.N1+(c-5))}return o},n.getPenaltyN2=function(i){const s=i.size;let o=0;for(let u=0;u<s-1;u++)for(let c=0;c<s-1;c++){const a=i.get(u,c)+i.get(u,c+1)+i.get(u+1,c)+i.get(u+1,c+1);(a===4||a===0)&&o++}return o*e.N2},n.getPenaltyN3=function(i){const s=i.size;let o=0,u=0,c=0;for(let a=0;a<s;a++){u=c=0;for(let d=0;d<s;d++)u=u<<1&2047|i.get(a,d),d>=10&&(u===1488||u===93)&&o++,c=c<<1&2047|i.get(d,a),d>=10&&(c===1488||c===93)&&o++}return o*e.N3},n.getPenaltyN4=function(i){let s=0;const o=i.data.length;for(let c=0;c<o;c++)s+=i.data[c];return Math.abs(Math.ceil(s*100/o/5)-10)*e.N4};function t(l,i,s){switch(l){case n.Patterns.PATTERN000:return(i+s)%2===0;case n.Patterns.PATTERN001:return i%2===0;case n.Patterns.PATTERN010:return s%3===0;case n.Patterns.PATTERN011:return(i+s)%3===0;case n.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(s/3))%2===0;case n.Patterns.PATTERN101:return i*s%2+i*s%3===0;case n.Patterns.PATTERN110:return(i*s%2+i*s%3)%2===0;case n.Patterns.PATTERN111:return(i*s%3+(i+s)%2)%2===0;default:throw new Error("bad maskPattern:"+l)}}n.applyMask=function(i,s){const o=s.size;for(let u=0;u<o;u++)for(let c=0;c<o;c++)s.isReserved(c,u)||s.xor(c,u,t(i,c,u))},n.getBestMask=function(i,s){const o=Object.keys(n.Patterns).length;let u=0,c=1/0;for(let a=0;a<o;a++){s(a),n.applyMask(a,i);const d=n.getPenaltyN1(i)+n.getPenaltyN2(i)+n.getPenaltyN3(i)+n.getPenaltyN4(i);n.applyMask(a,i),d<c&&(c=d,u=a)}return u}})(ol);var pt={};const Ie=gt,rt=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],at=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];pt.getBlocksCount=function(e,t){switch(t){case Ie.L:return rt[(e-1)*4+0];case Ie.M:return rt[(e-1)*4+1];case Ie.Q:return rt[(e-1)*4+2];case Ie.H:return rt[(e-1)*4+3];default:return}};pt.getTotalCodewordsCount=function(e,t){switch(t){case Ie.L:return at[(e-1)*4+0];case Ie.M:return at[(e-1)*4+1];case Ie.Q:return at[(e-1)*4+2];case Ie.H:return at[(e-1)*4+3];default:return}};var rl={},_t={};const Xe=new Uint8Array(512),ft=new Uint8Array(256);(function(){let e=1;for(let t=0;t<255;t++)Xe[t]=e,ft[e]=t,e<<=1,e&256&&(e^=285);for(let t=255;t<512;t++)Xe[t]=Xe[t-255]})();_t.log=function(e){if(e<1)throw new Error("log("+e+")");return ft[e]};_t.exp=function(e){return Xe[e]};_t.mul=function(e,t){return e===0||t===0?0:Xe[ft[e]+ft[t]]};(function(n){const e=_t;n.mul=function(l,i){const s=new Uint8Array(l.length+i.length-1);for(let o=0;o<l.length;o++)for(let u=0;u<i.length;u++)s[o+u]^=e.mul(l[o],i[u]);return s},n.mod=function(l,i){let s=new Uint8Array(l);for(;s.length-i.length>=0;){const o=s[0];for(let c=0;c<i.length;c++)s[c]^=e.mul(i[c],o);let u=0;for(;u<s.length&&s[u]===0;)u++;s=s.slice(u)}return s},n.generateECPolynomial=function(l){let i=new Uint8Array([1]);for(let s=0;s<l;s++)i=n.mul(i,new Uint8Array([1,e.exp(s)]));return i}})(rl);const al=rl;function Pt(n){this.genPoly=void 0,this.degree=n,this.degree&&this.initialize(this.degree)}Pt.prototype.initialize=function(e){this.degree=e,this.genPoly=al.generateECPolynomial(this.degree)};Pt.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(e.length+this.degree);t.set(e);const l=al.mod(t,this.genPoly),i=this.degree-l.length;if(i>0){const s=new Uint8Array(this.degree);return s.set(l,i),s}return l};var ci=Pt,cl={},Ne={},Ot={};Ot.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var Se={};const ul="[0-9]+",ui="[A-Z $%*+\\-./:]+";let tt="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";tt=tt.replace(/u/g,"\\u");const di="(?:(?![A-Z0-9 $%*+\\-./:]|"+tt+`)(?:.|[\r
]))+`;Se.KANJI=new RegExp(tt,"g");Se.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Se.BYTE=new RegExp(di,"g");Se.NUMERIC=new RegExp(ul,"g");Se.ALPHANUMERIC=new RegExp(ui,"g");const fi=new RegExp("^"+tt+"$"),hi=new RegExp("^"+ul+"$"),mi=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Se.testKanji=function(e){return fi.test(e)};Se.testNumeric=function(e){return hi.test(e)};Se.testAlphanumeric=function(e){return mi.test(e)};(function(n){const e=Ot,t=Se;n.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},n.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},n.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},n.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},n.MIXED={bit:-1},n.getCharCountIndicator=function(s,o){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?s.ccBits[0]:o<27?s.ccBits[1]:s.ccBits[2]},n.getBestModeForData=function(s){return t.testNumeric(s)?n.NUMERIC:t.testAlphanumeric(s)?n.ALPHANUMERIC:t.testKanji(s)?n.KANJI:n.BYTE},n.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},n.isValid=function(s){return s&&s.bit&&s.ccBits};function l(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return n.NUMERIC;case"alphanumeric":return n.ALPHANUMERIC;case"kanji":return n.KANJI;case"byte":return n.BYTE;default:throw new Error("Unknown mode: "+i)}}n.from=function(s,o){if(n.isValid(s))return s;try{return l(s)}catch{return o}}})(Ne);(function(n){const e=be,t=pt,l=gt,i=Ne,s=Ot,o=7973,u=e.getBCHDigit(o);function c(f,g,_){for(let v=1;v<=40;v++)if(g<=n.getCapacity(v,_,f))return v}function a(f,g){return i.getCharCountIndicator(f,g)+4}function d(f,g){let _=0;return f.forEach(function(v){const S=a(v.mode,g);_+=S+v.getBitsLength()}),_}function p(f,g){for(let _=1;_<=40;_++)if(d(f,_)<=n.getCapacity(_,g,i.MIXED))return _}n.from=function(g,_){return s.isValid(g)?parseInt(g,10):_},n.getCapacity=function(g,_,v){if(!s.isValid(g))throw new Error("Invalid QR Code version");typeof v>"u"&&(v=i.BYTE);const S=e.getSymbolTotalCodewords(g),w=t.getTotalCodewordsCount(g,_),E=(S-w)*8;if(v===i.MIXED)return E;const T=E-a(v,g);switch(v){case i.NUMERIC:return Math.floor(T/10*3);case i.ALPHANUMERIC:return Math.floor(T/11*2);case i.KANJI:return Math.floor(T/13);case i.BYTE:default:return Math.floor(T/8)}},n.getBestVersionForData=function(g,_){let v;const S=l.from(_,l.M);if(Array.isArray(g)){if(g.length>1)return p(g,S);if(g.length===0)return 1;v=g[0]}else v=g;return c(v.mode,v.getLength(),S)},n.getEncodedBits=function(g){if(!s.isValid(g)||g<7)throw new Error("Invalid QR Code version");let _=g<<12;for(;e.getBCHDigit(_)-u>=0;)_^=o<<e.getBCHDigit(_)-u;return g<<12|_}})(cl);var dl={};const It=be,fl=1335,gi=21522,En=It.getBCHDigit(fl);dl.getEncodedBits=function(e,t){const l=e.bit<<3|t;let i=l<<10;for(;It.getBCHDigit(i)-En>=0;)i^=fl<<It.getBCHDigit(i)-En;return(l<<10|i)^gi};var hl={};const pi=Ne;function je(n){this.mode=pi.NUMERIC,this.data=n.toString()}je.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};je.prototype.getLength=function(){return this.data.length};je.prototype.getBitsLength=function(){return je.getBitsLength(this.data.length)};je.prototype.write=function(e){let t,l,i;for(t=0;t+3<=this.data.length;t+=3)l=this.data.substr(t,3),i=parseInt(l,10),e.put(i,10);const s=this.data.length-t;s>0&&(l=this.data.substr(t),i=parseInt(l,10),e.put(i,s*3+1))};var _i=je;const vi=Ne,yt=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function ze(n){this.mode=vi.ALPHANUMERIC,this.data=n}ze.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};ze.prototype.getLength=function(){return this.data.length};ze.prototype.getBitsLength=function(){return ze.getBitsLength(this.data.length)};ze.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let l=yt.indexOf(this.data[t])*45;l+=yt.indexOf(this.data[t+1]),e.put(l,11)}this.data.length%2&&e.put(yt.indexOf(this.data[t]),6)};var wi=ze;const bi=Ne;function $e(n){this.mode=bi.BYTE,typeof n=="string"?this.data=new TextEncoder().encode(n):this.data=new Uint8Array(n)}$e.getBitsLength=function(e){return e*8};$e.prototype.getLength=function(){return this.data.length};$e.prototype.getBitsLength=function(){return $e.getBitsLength(this.data.length)};$e.prototype.write=function(n){for(let e=0,t=this.data.length;e<t;e++)n.put(this.data[e],8)};var yi=$e;const ki=Ne,Ci=be;function Je(n){this.mode=ki.KANJI,this.data=n}Je.getBitsLength=function(e){return e*13};Je.prototype.getLength=function(){return this.data.length};Je.prototype.getBitsLength=function(){return Je.getBitsLength(this.data.length)};Je.prototype.write=function(n){let e;for(e=0;e<this.data.length;e++){let t=Ci.toSJIS(this.data[e]);if(t>=33088&&t<=40956)t-=33088;else if(t>=57408&&t<=60351)t-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);t=(t>>>8&255)*192+(t&255),n.put(t,13)}};var Si=Je,ml={exports:{}};(function(n){var e={single_source_shortest_paths:function(t,l,i){var s={},o={};o[l]=0;var u=e.PriorityQueue.make();u.push(l,0);for(var c,a,d,p,f,g,_,v,S;!u.empty();){c=u.pop(),a=c.value,p=c.cost,f=t[a]||{};for(d in f)f.hasOwnProperty(d)&&(g=f[d],_=p+g,v=o[d],S=typeof o[d]>"u",(S||v>_)&&(o[d]=_,u.push(d,_),s[d]=a))}if(typeof i<"u"&&typeof o[i]>"u"){var w=["Could not find a path from ",l," to ",i,"."].join("");throw new Error(w)}return s},extract_shortest_path_from_predecessor_list:function(t,l){for(var i=[],s=l;s;)i.push(s),t[s],s=t[s];return i.reverse(),i},find_path:function(t,l,i){var s=e.single_source_shortest_paths(t,l,i);return e.extract_shortest_path_from_predecessor_list(s,i)},PriorityQueue:{make:function(t){var l=e.PriorityQueue,i={},s;t=t||{};for(s in l)l.hasOwnProperty(s)&&(i[s]=l[s]);return i.queue=[],i.sorter=t.sorter||l.default_sorter,i},default_sorter:function(t,l){return t.cost-l.cost},push:function(t,l){var i={value:t,cost:l};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};n.exports=e})(ml);var Ei=ml.exports;(function(n){const e=Ne,t=_i,l=wi,i=yi,s=Si,o=Se,u=be,c=Ei;function a(w){return unescape(encodeURIComponent(w)).length}function d(w,E,T){const R=[];let B;for(;(B=w.exec(T))!==null;)R.push({data:B[0],index:B.index,mode:E,length:B[0].length});return R}function p(w){const E=d(o.NUMERIC,e.NUMERIC,w),T=d(o.ALPHANUMERIC,e.ALPHANUMERIC,w);let R,B;return u.isKanjiModeEnabled()?(R=d(o.BYTE,e.BYTE,w),B=d(o.KANJI,e.KANJI,w)):(R=d(o.BYTE_KANJI,e.BYTE,w),B=[]),E.concat(T,R,B).sort(function(C,I){return C.index-I.index}).map(function(C){return{data:C.data,mode:C.mode,length:C.length}})}function f(w,E){switch(E){case e.NUMERIC:return t.getBitsLength(w);case e.ALPHANUMERIC:return l.getBitsLength(w);case e.KANJI:return s.getBitsLength(w);case e.BYTE:return i.getBitsLength(w)}}function g(w){return w.reduce(function(E,T){const R=E.length-1>=0?E[E.length-1]:null;return R&&R.mode===T.mode?(E[E.length-1].data+=T.data,E):(E.push(T),E)},[])}function _(w){const E=[];for(let T=0;T<w.length;T++){const R=w[T];switch(R.mode){case e.NUMERIC:E.push([R,{data:R.data,mode:e.ALPHANUMERIC,length:R.length},{data:R.data,mode:e.BYTE,length:R.length}]);break;case e.ALPHANUMERIC:E.push([R,{data:R.data,mode:e.BYTE,length:R.length}]);break;case e.KANJI:E.push([R,{data:R.data,mode:e.BYTE,length:a(R.data)}]);break;case e.BYTE:E.push([{data:R.data,mode:e.BYTE,length:a(R.data)}])}}return E}function v(w,E){const T={},R={start:{}};let B=["start"];for(let M=0;M<w.length;M++){const C=w[M],I=[];for(let N=0;N<C.length;N++){const P=C[N],Q=""+M+N;I.push(Q),T[Q]={node:P,lastCount:0},R[Q]={};for(let k=0;k<B.length;k++){const b=B[k];T[b]&&T[b].node.mode===P.mode?(R[b][Q]=f(T[b].lastCount+P.length,P.mode)-f(T[b].lastCount,P.mode),T[b].lastCount+=P.length):(T[b]&&(T[b].lastCount=P.length),R[b][Q]=f(P.length,P.mode)+4+e.getCharCountIndicator(P.mode,E))}}B=I}for(let M=0;M<B.length;M++)R[B[M]].end=0;return{map:R,table:T}}function S(w,E){let T;const R=e.getBestModeForData(w);if(T=e.from(E,R),T!==e.BYTE&&T.bit<R.bit)throw new Error('"'+w+'" cannot be encoded with mode '+e.toString(T)+`.
 Suggested mode is: `+e.toString(R));switch(T===e.KANJI&&!u.isKanjiModeEnabled()&&(T=e.BYTE),T){case e.NUMERIC:return new t(w);case e.ALPHANUMERIC:return new l(w);case e.KANJI:return new s(w);case e.BYTE:return new i(w)}}n.fromArray=function(E){return E.reduce(function(T,R){return typeof R=="string"?T.push(S(R,null)):R.data&&T.push(S(R.data,R.mode)),T},[])},n.fromString=function(E,T){const R=p(E,u.isKanjiModeEnabled()),B=_(R),M=v(B,T),C=c.find_path(M.map,"start","end"),I=[];for(let N=1;N<C.length-1;N++)I.push(M.table[C[N]].node);return n.fromArray(g(I))},n.rawSplit=function(E){return n.fromArray(p(E,u.isKanjiModeEnabled()))}})(hl);const vt=be,kt=gt,Ti=oi,Ri=ri,Ii=il,Mi=sl,Mt=ol,Nt=pt,Ni=ci,ht=cl,Di=dl,Li=Ne,Ct=hl;function Ai(n,e){const t=n.size,l=Mi.getPositions(e);for(let i=0;i<l.length;i++){const s=l[i][0],o=l[i][1];for(let u=-1;u<=7;u++)if(!(s+u<=-1||t<=s+u))for(let c=-1;c<=7;c++)o+c<=-1||t<=o+c||(u>=0&&u<=6&&(c===0||c===6)||c>=0&&c<=6&&(u===0||u===6)||u>=2&&u<=4&&c>=2&&c<=4?n.set(s+u,o+c,!0,!0):n.set(s+u,o+c,!1,!0))}}function Bi(n){const e=n.size;for(let t=8;t<e-8;t++){const l=t%2===0;n.set(t,6,l,!0),n.set(6,t,l,!0)}}function Pi(n,e){const t=Ii.getPositions(e);for(let l=0;l<t.length;l++){const i=t[l][0],s=t[l][1];for(let o=-2;o<=2;o++)for(let u=-2;u<=2;u++)o===-2||o===2||u===-2||u===2||o===0&&u===0?n.set(i+o,s+u,!0,!0):n.set(i+o,s+u,!1,!0)}}function Oi(n,e){const t=n.size,l=ht.getEncodedBits(e);let i,s,o;for(let u=0;u<18;u++)i=Math.floor(u/3),s=u%3+t-8-3,o=(l>>u&1)===1,n.set(i,s,o,!0),n.set(s,i,o,!0)}function St(n,e,t){const l=n.size,i=Di.getEncodedBits(e,t);let s,o;for(s=0;s<15;s++)o=(i>>s&1)===1,s<6?n.set(s,8,o,!0):s<8?n.set(s+1,8,o,!0):n.set(l-15+s,8,o,!0),s<8?n.set(8,l-s-1,o,!0):s<9?n.set(8,15-s-1+1,o,!0):n.set(8,15-s-1,o,!0);n.set(l-8,8,1,!0)}function Fi(n,e){const t=n.size;let l=-1,i=t-1,s=7,o=0;for(let u=t-1;u>0;u-=2)for(u===6&&u--;;){for(let c=0;c<2;c++)if(!n.isReserved(i,u-c)){let a=!1;o<e.length&&(a=(e[o]>>>s&1)===1),n.set(i,u-c,a),s--,s===-1&&(o++,s=7)}if(i+=l,i<0||t<=i){i-=l,l=-l;break}}}function Ui(n,e,t){const l=new Ti;t.forEach(function(c){l.put(c.mode.bit,4),l.put(c.getLength(),Li.getCharCountIndicator(c.mode,n)),c.write(l)});const i=vt.getSymbolTotalCodewords(n),s=Nt.getTotalCodewordsCount(n,e),o=(i-s)*8;for(l.getLengthInBits()+4<=o&&l.put(0,4);l.getLengthInBits()%8!==0;)l.putBit(0);const u=(o-l.getLengthInBits())/8;for(let c=0;c<u;c++)l.put(c%2?17:236,8);return qi(l,n,e)}function qi(n,e,t){const l=vt.getSymbolTotalCodewords(e),i=Nt.getTotalCodewordsCount(e,t),s=l-i,o=Nt.getBlocksCount(e,t),u=l%o,c=o-u,a=Math.floor(l/o),d=Math.floor(s/o),p=d+1,f=a-d,g=new Ni(f);let _=0;const v=new Array(o),S=new Array(o);let w=0;const E=new Uint8Array(n.buffer);for(let C=0;C<o;C++){const I=C<c?d:p;v[C]=E.slice(_,_+I),S[C]=g.encode(v[C]),_+=I,w=Math.max(w,I)}const T=new Uint8Array(l);let R=0,B,M;for(B=0;B<w;B++)for(M=0;M<o;M++)B<v[M].length&&(T[R++]=v[M][B]);for(B=0;B<f;B++)for(M=0;M<o;M++)T[R++]=S[M][B];return T}function Hi(n,e,t,l){let i;if(Array.isArray(n))i=Ct.fromArray(n);else if(typeof n=="string"){let a=e;if(!a){const d=Ct.rawSplit(n);a=ht.getBestVersionForData(d,t)}i=Ct.fromString(n,a||40)}else throw new Error("Invalid data");const s=ht.getBestVersionForData(i,t);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=s;else if(e<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);const o=Ui(e,t,i),u=vt.getSymbolSize(e),c=new Ri(u);return Ai(c,e),Bi(c),Pi(c,e),St(c,t,0),e>=7&&Oi(c,e),Fi(c,o),isNaN(l)&&(l=Mt.getBestMask(c,St.bind(null,c,t))),Mt.applyMask(l,c),St(c,t,l),{modules:c,version:e,errorCorrectionLevel:t,maskPattern:l,segments:i}}nl.create=function(e,t){if(typeof e>"u"||e==="")throw new Error("No input text");let l=kt.M,i,s;return typeof t<"u"&&(l=kt.from(t.errorCorrectionLevel,kt.M),i=ht.from(t.version),s=Mt.from(t.maskPattern),t.toSJISFunc&&vt.setToSJISFunction(t.toSJISFunc)),Hi(e,i,l,s)};var gl={},Ft={};(function(n){function e(t){if(typeof t=="number"&&(t=t.toString()),typeof t!="string")throw new Error("Color should be defined as hex string");let l=t.slice().replace("#","").split("");if(l.length<3||l.length===5||l.length>8)throw new Error("Invalid hex color: "+t);(l.length===3||l.length===4)&&(l=Array.prototype.concat.apply([],l.map(function(s){return[s,s]}))),l.length===6&&l.push("F","F");const i=parseInt(l.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+l.slice(0,6).join("")}}n.getOptions=function(l){l||(l={}),l.color||(l.color={});const i=typeof l.margin>"u"||l.margin===null||l.margin<0?4:l.margin,s=l.width&&l.width>=21?l.width:void 0,o=l.scale||4;return{width:s,scale:s?4:o,margin:i,color:{dark:e(l.color.dark||"#000000ff"),light:e(l.color.light||"#ffffffff")},type:l.type,rendererOpts:l.rendererOpts||{}}},n.getScale=function(l,i){return i.width&&i.width>=l+i.margin*2?i.width/(l+i.margin*2):i.scale},n.getImageWidth=function(l,i){const s=n.getScale(l,i);return Math.floor((l+i.margin*2)*s)},n.qrToImageData=function(l,i,s){const o=i.modules.size,u=i.modules.data,c=n.getScale(o,s),a=Math.floor((o+s.margin*2)*c),d=s.margin*c,p=[s.color.light,s.color.dark];for(let f=0;f<a;f++)for(let g=0;g<a;g++){let _=(f*a+g)*4,v=s.color.light;if(f>=d&&g>=d&&f<a-d&&g<a-d){const S=Math.floor((f-d)/c),w=Math.floor((g-d)/c);v=p[u[S*o+w]?1:0]}l[_++]=v.r,l[_++]=v.g,l[_++]=v.b,l[_]=v.a}}})(Ft);(function(n){const e=Ft;function t(i,s,o){i.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=o,s.width=o,s.style.height=o+"px",s.style.width=o+"px"}function l(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}n.render=function(s,o,u){let c=u,a=o;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),o||(a=l()),c=e.getOptions(c);const d=e.getImageWidth(s.modules.size,c),p=a.getContext("2d"),f=p.createImageData(d,d);return e.qrToImageData(f.data,s,c),t(p,a,d),p.putImageData(f,0,0),a},n.renderToDataURL=function(s,o,u){let c=u;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),c||(c={});const a=n.render(s,o,c),d=c.type||"image/png",p=c.rendererOpts||{};return a.toDataURL(d,p.quality)}})(gl);var pl={};const Vi=Ft;function Tn(n,e){const t=n.a/255,l=e+'="'+n.hex+'"';return t<1?l+" "+e+'-opacity="'+t.toFixed(2).slice(1)+'"':l}function Et(n,e,t){let l=n+e;return typeof t<"u"&&(l+=" "+t),l}function Qi(n,e,t){let l="",i=0,s=!1,o=0;for(let u=0;u<n.length;u++){const c=Math.floor(u%e),a=Math.floor(u/e);!c&&!s&&(s=!0),n[u]?(o++,u>0&&c>0&&n[u-1]||(l+=s?Et("M",c+t,.5+a+t):Et("m",i,0),i=0,s=!1),c+1<e&&n[u+1]||(l+=Et("h",o),o=0)):i++}return l}pl.render=function(e,t,l){const i=Vi.getOptions(t),s=e.modules.size,o=e.modules.data,u=s+i.margin*2,c=i.color.light.a?"<path "+Tn(i.color.light,"fill")+' d="M0 0h'+u+"v"+u+'H0z"/>':"",a="<path "+Tn(i.color.dark,"stroke")+' d="'+Qi(o,s,i.margin)+'"/>',d='viewBox="0 0 '+u+" "+u+'"',f='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+d+' shape-rendering="crispEdges">'+c+a+`</svg>
`;return typeof l=="function"&&l(null,f),f};const ji=ii,Dt=nl,_l=gl,zi=pl;function Ut(n,e,t,l,i){const s=[].slice.call(arguments,1),o=s.length,u=typeof s[o-1]=="function";if(!u&&!ji())throw new Error("Callback required as last argument");if(u){if(o<2)throw new Error("Too few arguments provided");o===2?(i=t,t=e,e=l=void 0):o===3&&(e.getContext&&typeof i>"u"?(i=l,l=void 0):(i=l,l=t,t=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(t=e,e=l=void 0):o===2&&!e.getContext&&(l=t,t=e,e=void 0),new Promise(function(c,a){try{const d=Dt.create(t,l);c(n(d,e,l))}catch(d){a(d)}})}try{const c=Dt.create(t,l);i(null,n(c,e,l))}catch(c){i(c)}}lt.create=Dt.create;lt.toCanvas=Ut.bind(null,_l.render);lt.toDataURL=Ut.bind(null,_l.renderToDataURL);lt.toString=Ut.bind(null,function(n,e,t){return zi.render(n,t)});async function $i(n){const e={title:`${n.name} - Cross Country Times`,text:`Times for ${n.runners.length} runners`,url:Ji(n)};if(navigator.share&&navigator.canShare&&navigator.canShare(e))try{return await navigator.share(e),!0}catch(t){return console.log("Error sharing:",t),!1}try{return await navigator.clipboard.writeText(JSON.stringify(n,null,2)),!0}catch(t){return console.log("Error copying to clipboard:",t),!1}}function Ji(n){return`data:application/json;base64,${btoa(JSON.stringify(n))}`}async function Ki(n){const e=JSON.stringify(n);try{return await lt.toDataURL(e,{width:256,margin:2,color:{dark:"#000000",light:"#ffffff"}})}catch(t){throw console.error("Error generating QR code:",t),t}}function Wi(n){const e=JSON.stringify(n,null,2),t=new Blob([e],{type:"application/json"}),l=URL.createObjectURL(t),i=document.createElement("a");i.href=l,i.download=`xc-times-${n.name.replace(/\s+/g,"-").toLowerCase()}.json`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(l)}function Rn(n,e,t){const l=n.slice();return l[25]=e[t],l}function In(n,e,t){const l=n.slice();return l[28]=e[t],l}function Mn(n,e,t){const l=n.slice();return l[31]=e[t],l}function Nn(n){let e,t,l,i,s,o,u,c=n[12](),a=(n[0]==="team"||n[0]==="checkpoint"||n[0]==="race")&&Dn(n),d=(n[0]==="checkpoint"||n[0]==="race")&&An(n),p=n[0]==="checkpoint"&&Pn(n),f=c&&Gi(n);return{c(){e=m("div"),t=m("h4"),t.textContent="Selection Details",l=y(),i=m("div"),a&&a.c(),s=y(),d&&d.c(),o=y(),p&&p.c(),u=y(),f&&f.c(),h(t,"class","svelte-1e4sey9"),h(i,"class","selection-grid svelte-1e4sey9"),h(e,"class","selection-section svelte-1e4sey9")},m(g,_){V(g,e,_),r(e,t),r(e,l),r(e,i),a&&a.m(i,null),r(i,s),d&&d.m(i,null),r(i,o),p&&p.m(i,null),r(e,u),f&&f.m(e,null)},p(g,_){g[0]==="team"||g[0]==="checkpoint"||g[0]==="race"?a?a.p(g,_):(a=Dn(g),a.c(),a.m(i,s)):a&&(a.d(1),a=null),g[0]==="checkpoint"||g[0]==="race"?d?d.p(g,_):(d=An(g),d.c(),d.m(i,o)):d&&(d.d(1),d=null),g[0]==="checkpoint"?p?p.p(g,_):(p=Pn(g),p.c(),p.m(i,null)):p&&(p.d(1),p=null),c&&f.p(g,_)},d(g){g&&H(e),a&&a.d(),d&&d.d(),p&&p.d(),f&&f.d()}}}function Dn(n){let e,t,l,i,s,o,u,c=fe(n[1].teams),a=[];for(let d=0;d<c.length;d+=1)a[d]=Ln(Mn(n,c,d));return{c(){e=m("div"),t=m("label"),t.textContent="Team",l=y(),i=m("select"),s=m("option"),s.textContent="Select a team";for(let d=0;d<a.length;d+=1)a[d].c();h(t,"for","team-select"),h(t,"class","svelte-1e4sey9"),s.__value="",ie(s,s.__value),h(i,"id","team-select"),h(i,"class","svelte-1e4sey9"),n[5]===void 0&&Re(()=>n[21].call(i)),h(e,"class","form-group svelte-1e4sey9")},m(d,p){V(d,e,p),r(e,t),r(e,l),r(e,i),r(i,s);for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(i,null);ke(i,n[5],!0),o||(u=$(i,"change",n[21]),o=!0)},p(d,p){if(p[0]&2){c=fe(d[1].teams);let f;for(f=0;f<c.length;f+=1){const g=Mn(d,c,f);a[f]?a[f].p(g,p):(a[f]=Ln(g),a[f].c(),a[f].m(i,null))}for(;f<a.length;f+=1)a[f].d(1);a.length=c.length}p[0]&34&&ke(i,d[5])},d(d){d&&H(e),Me(a,d),o=!1,u()}}}function Ln(n){let e,t=n[31].name+"",l,i;return{c(){e=m("option"),l=O(t),e.__value=i=n[31].id,ie(e,e.__value)},m(s,o){V(s,e,o),r(e,l)},p(s,o){o[0]&2&&t!==(t=s[31].name+"")&&Y(l,t),o[0]&2&&i!==(i=s[31].id)&&(e.__value=i,ie(e,e.__value))},d(s){s&&H(e)}}}function An(n){let e,t,l,i,s,o,u,c=fe(n[9]),a=[];for(let d=0;d<c.length;d+=1)a[d]=Bn(In(n,c,d));return{c(){e=m("div"),t=m("label"),t.textContent="Race",l=y(),i=m("select"),s=m("option"),s.textContent="Select a race";for(let d=0;d<a.length;d+=1)a[d].c();h(t,"for","race-select"),h(t,"class","svelte-1e4sey9"),s.__value="",ie(s,s.__value),h(i,"id","race-select"),h(i,"class","svelte-1e4sey9"),n[7]===void 0&&Re(()=>n[22].call(i)),h(e,"class","form-group svelte-1e4sey9")},m(d,p){V(d,e,p),r(e,t),r(e,l),r(e,i),r(i,s);for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(i,null);ke(i,n[7],!0),o||(u=$(i,"change",n[22]),o=!0)},p(d,p){if(p[0]&512){c=fe(d[9]);let f;for(f=0;f<c.length;f+=1){const g=In(d,c,f);a[f]?a[f].p(g,p):(a[f]=Bn(g),a[f].c(),a[f].m(i,null))}for(;f<a.length;f+=1)a[f].d(1);a.length=c.length}p[0]&640&&ke(i,d[7])},d(d){d&&H(e),Me(a,d),o=!1,u()}}}function Bn(n){let e,t=n[28]+"",l,i;return{c(){e=m("option"),l=O(t),e.__value=i=n[28],ie(e,e.__value)},m(s,o){V(s,e,o),r(e,l)},p(s,o){o[0]&512&&t!==(t=s[28]+"")&&Y(l,t),o[0]&512&&i!==(i=s[28])&&(e.__value=i,ie(e,e.__value))},d(s){s&&H(e)}}}function Pn(n){let e,t,l,i,s,o,u,c=fe(n[8]),a=[];for(let d=0;d<c.length;d+=1)a[d]=On(Rn(n,c,d));return{c(){e=m("div"),t=m("label"),t.textContent="Checkpoint",l=y(),i=m("select"),s=m("option"),s.textContent="Select checkpoint";for(let d=0;d<a.length;d+=1)a[d].c();h(t,"for","checkpoint-select"),h(t,"class","svelte-1e4sey9"),s.__value="",ie(s,s.__value),h(i,"id","checkpoint-select"),h(i,"class","svelte-1e4sey9"),n[6]===void 0&&Re(()=>n[23].call(i)),h(e,"class","form-group svelte-1e4sey9")},m(d,p){V(d,e,p),r(e,t),r(e,l),r(e,i),r(i,s);for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(i,null);ke(i,n[6],!0),o||(u=$(i,"change",n[23]),o=!0)},p(d,p){if(p[0]&256){c=fe(d[8]);let f;for(f=0;f<c.length;f+=1){const g=Rn(d,c,f);a[f]?a[f].p(g,p):(a[f]=On(g),a[f].c(),a[f].m(i,null))}for(;f<a.length;f+=1)a[f].d(1);a.length=c.length}p[0]&320&&ke(i,d[6])},d(d){d&&H(e),Me(a,d),o=!1,u()}}}function On(n){let e,t=n[25]+"",l,i;return{c(){e=m("option"),l=O(t),e.__value=i=n[25],ie(e,e.__value)},m(s,o){V(s,e,o),r(e,l)},p(s,o){o[0]&256&&t!==(t=s[25]+"")&&Y(l,t),o[0]&256&&i!==(i=s[25])&&(e.__value=i,ie(e,e.__value))},d(s){s&&H(e)}}}function Gi(n){let e,t,l,i=n[11]()+"",s;return{c(){e=m("div"),t=m("strong"),t.textContent="Preview:",l=y(),s=O(i),h(e,"class","selection-preview svelte-1e4sey9")},m(o,u){V(o,e,u),r(e,t),r(e,l),r(e,s)},p:he,d(o){o&&H(e)}}}function Yi(n){let e;return{c(){e=m("div"),e.innerHTML="<p>Please complete your selection above to enable sharing options.</p>",h(e,"class","selection-required svelte-1e4sey9")},m(t,l){V(t,e,l)},p:he,d(t){t&&H(e)}}}function Zi(n){let e,t,l,i,s,o,u,c,a,d,p,f,g,_,v=n[3]?"Generating...":"Generate QR Code",S,w,E,T,R,B,M,C,I,N,P,Q,k=n[2]&&Fn(n);return{c(){e=m("div"),t=m("div"),l=m("h4"),l.textContent="üîó Web Share",i=y(),s=m("p"),s.textContent="Share selected data via your device's native share menu",o=y(),u=m("button"),u.textContent="Share Data",c=y(),a=m("div"),d=m("h4"),d.textContent="üì± QR Code",p=y(),f=m("p"),f.textContent="Generate a QR code for other devices to scan and import",g=y(),_=m("button"),S=O(v),w=y(),E=m("div"),T=m("h4"),T.textContent="üíæ Download JSON",R=y(),B=m("p"),B.textContent="Download selected data as a JSON file for backup",M=y(),C=m("button"),C.textContent="Download File",I=y(),k&&k.c(),N=xe(),h(l,"class","svelte-1e4sey9"),h(s,"class","svelte-1e4sey9"),h(u,"class","action-btn primary svelte-1e4sey9"),h(t,"class","action-card svelte-1e4sey9"),h(d,"class","svelte-1e4sey9"),h(f,"class","svelte-1e4sey9"),h(_,"class","action-btn secondary svelte-1e4sey9"),_.disabled=n[3],h(a,"class","action-card svelte-1e4sey9"),h(T,"class","svelte-1e4sey9"),h(B,"class","svelte-1e4sey9"),h(C,"class","action-btn secondary svelte-1e4sey9"),h(E,"class","action-card svelte-1e4sey9"),h(e,"class","actions-grid svelte-1e4sey9")},m(b,A){V(b,e,A),r(e,t),r(t,l),r(t,i),r(t,s),r(t,o),r(t,u),r(e,c),r(e,a),r(a,d),r(a,p),r(a,f),r(a,g),r(a,_),r(_,S),r(e,w),r(e,E),r(E,T),r(E,R),r(E,B),r(E,M),r(E,C),V(b,I,A),k&&k.m(b,A),V(b,N,A),P||(Q=[$(u,"click",n[13]),$(_,"click",n[14]),$(C,"click",n[15])],P=!0)},p(b,A){A[0]&8&&v!==(v=b[3]?"Generating...":"Generate QR Code")&&Y(S,v),A[0]&8&&(_.disabled=b[3]),b[2]?k?k.p(b,A):(k=Fn(b),k.c(),k.m(N.parentNode,N)):k&&(k.d(1),k=null)},d(b){b&&(H(e),H(I),H(N)),k&&k.d(b),P=!1,_e(Q)}}}function Fn(n){let e,t,l,i,s,o,u,c;return{c(){e=m("div"),t=m("h4"),t.textContent="QR Code for Import",l=y(),i=m("div"),s=m("img"),u=y(),c=m("p"),c.textContent=`Other devices can scan this QR code to import: ${n[10]()}`,h(t,"class","svelte-1e4sey9"),Vt(s.src,o=n[2])||h(s,"src",o),h(s,"alt","QR Code for session data"),h(s,"class","qr-code svelte-1e4sey9"),h(i,"class","qr-code-container svelte-1e4sey9"),h(c,"class","qr-instructions svelte-1e4sey9"),h(e,"class","qr-code-section svelte-1e4sey9")},m(a,d){V(a,e,d),r(e,t),r(e,l),r(e,i),r(i,s),r(e,u),r(e,c)},p(a,d){d[0]&4&&!Vt(s.src,o=a[2])&&h(s,"src",o)},d(a){a&&H(e)}}}function Un(n){let e,t;return{c(){e=m("div"),t=O(n[4]),h(e,"class","status-message svelte-1e4sey9"),ge(e,"success",n[4].includes("success")),ge(e,"error",n[4].includes("failed"))},m(l,i){V(l,e,i),r(e,t)},p(l,i){i[0]&16&&Y(t,l[4]),i[0]&16&&ge(e,"success",l[4].includes("success")),i[0]&16&&ge(e,"error",l[4].includes("failed"))},d(l){l&&H(e)}}}function qn(n){let e;return{c(){e=m("div"),e.innerHTML="<p>No data to share yet!</p> <p>Add some runners and times first.</p>",h(e,"class","empty-state svelte-1e4sey9")},m(t,l){V(t,e,l)},d(t){t&&H(e)}}}function Xi(n){let e,t,l,i,s,o,u=n[1].name+"",c,a,d,p,f,g,_,v,S,w,E,T,R,B,M,C,I,N,P,Q,k,b,A,G,z,Z,ue,ee,se,J,pe,K,X=n[0]!=="all"&&Nn(n);function oe(L,U){return L[12]()?Zi:Yi}let ce=oe(n)(n),te=n[4]&&Un(n),j=n[1].runners.length===0&&qn();return J=mt(n[17][0]),{c(){e=m("div"),t=m("div"),l=m("h2"),l.textContent="Share & Export",i=y(),s=m("div"),o=O("Session: "),c=O(u),a=y(),d=m("div"),p=m("h3"),p.textContent="What would you like to share?",f=y(),g=m("div"),_=m("label"),v=m("input"),S=y(),w=m("div"),w.innerHTML='<div class="option-title svelte-1e4sey9">üì¶ Complete Session</div> <div class="option-description svelte-1e4sey9">All teams, runners, and timing data</div>',E=y(),T=m("label"),R=m("input"),B=y(),M=m("div"),M.innerHTML='<div class="option-title svelte-1e4sey9">üë• Team Data</div> <div class="option-description svelte-1e4sey9">All runners and times for a specific team</div>',C=y(),I=m("label"),N=m("input"),P=y(),Q=m("div"),Q.innerHTML='<div class="option-title svelte-1e4sey9">üìç Single Checkpoint</div> <div class="option-description svelte-1e4sey9">Times for one team at one checkpoint in a race</div>',k=y(),b=m("label"),A=m("input"),G=y(),z=m("div"),z.innerHTML='<div class="option-title svelte-1e4sey9">üèÅ Full Race</div> <div class="option-description svelte-1e4sey9">All checkpoints for one team in a specific race</div>',Z=y(),X&&X.c(),ue=y(),ce.c(),ee=y(),te&&te.c(),se=y(),j&&j.c(),h(l,"class","svelte-1e4sey9"),h(s,"class","session-info svelte-1e4sey9"),h(t,"class","header svelte-1e4sey9"),h(p,"class","svelte-1e4sey9"),h(v,"type","radio"),v.__value="all",ie(v,v.__value),h(v,"class","svelte-1e4sey9"),h(w,"class","option-content svelte-1e4sey9"),h(_,"class","mode-option svelte-1e4sey9"),h(R,"type","radio"),R.__value="team",ie(R,R.__value),h(R,"class","svelte-1e4sey9"),h(M,"class","option-content svelte-1e4sey9"),h(T,"class","mode-option svelte-1e4sey9"),h(N,"type","radio"),N.__value="checkpoint",ie(N,N.__value),h(N,"class","svelte-1e4sey9"),h(Q,"class","option-content svelte-1e4sey9"),h(I,"class","mode-option svelte-1e4sey9"),h(A,"type","radio"),A.__value="race",ie(A,A.__value),h(A,"class","svelte-1e4sey9"),h(z,"class","option-content svelte-1e4sey9"),h(b,"class","mode-option svelte-1e4sey9"),h(g,"class","mode-options svelte-1e4sey9"),h(d,"class","share-mode-section svelte-1e4sey9"),h(e,"class","share-container svelte-1e4sey9"),J.p(v,R,N,A)},m(L,U){V(L,e,U),r(e,t),r(t,l),r(t,i),r(t,s),r(s,o),r(s,c),r(e,a),r(e,d),r(d,p),r(d,f),r(d,g),r(g,_),r(_,v),v.checked=v.__value===n[0],r(_,S),r(_,w),r(g,E),r(g,T),r(T,R),R.checked=R.__value===n[0],r(T,B),r(T,M),r(g,C),r(g,I),r(I,N),N.checked=N.__value===n[0],r(I,P),r(I,Q),r(g,k),r(g,b),r(b,A),A.checked=A.__value===n[0],r(b,G),r(b,z),r(e,Z),X&&X.m(e,null),r(e,ue),ce.m(e,null),r(e,ee),te&&te.m(e,null),r(e,se),j&&j.m(e,null),pe||(K=[$(v,"change",n[16]),$(R,"change",n[18]),$(N,"change",n[19]),$(A,"change",n[20])],pe=!0)},p(L,U){U[0]&2&&u!==(u=L[1].name+"")&&Y(c,u),U[0]&1&&(v.checked=v.__value===L[0]),U[0]&1&&(R.checked=R.__value===L[0]),U[0]&1&&(N.checked=N.__value===L[0]),U[0]&1&&(A.checked=A.__value===L[0]),L[0]!=="all"?X?X.p(L,U):(X=Nn(L),X.c(),X.m(e,ue)):X&&(X.d(1),X=null),ce.p(L,U),L[4]?te?te.p(L,U):(te=Un(L),te.c(),te.m(e,se)):te&&(te.d(1),te=null),L[1].runners.length===0?j||(j=qn(),j.c(),j.m(e,null)):j&&(j.d(1),j=null)},i:he,o:he,d(L){L&&H(e),X&&X.d(),ce.d(),te&&te.d(),j&&j.d(),J.r(),pe=!1,_e(K)}}}function xi(n,e,t){let l,i,s;Be(n,ve,k=>t(1,s=k));let o="",u=!1,c="",a="all",d="",p="",f="";function g(){let k=[],b=[],A=[];switch(a){case"all":return s;case"team":if(!d)return{...s,runners:[],times:[],teams:[]};const G=s.teams.find(J=>J.id===d);G&&(A=[G]),k=s.runners.filter(J=>J.teamId===d);const z=new Set(k.map(J=>J.id));b=s.times.filter(J=>z.has(J.runnerId));break;case"checkpoint":if(!d||!p||!f)return{...s,runners:[],times:[],teams:[]};const Z=s.teams.find(J=>J.id===d);Z&&(A=[Z]),k=s.runners.filter(J=>J.teamId===d);const ue=new Set(k.map(J=>J.id));b=s.times.filter(J=>ue.has(J.runnerId)&&J.checkpoint===p&&J.raceName===f);break;case"race":if(!d||!f)return{...s,runners:[],times:[],teams:[]};const ee=s.teams.find(J=>J.id===d);ee&&(A=[ee]),k=s.runners.filter(J=>J.teamId===d);const se=new Set(k.map(J=>J.id));b=s.times.filter(J=>se.has(J.runnerId)&&J.raceName===f);break}return{...s,teams:A,runners:k,times:b,name:_()}}function _(){const k=s.teams.find(A=>A.id===d),b=(k==null?void 0:k.name)||"Unknown Team";switch(a){case"all":return s.name;case"team":return`${b} - Team Data`;case"checkpoint":return`${b} - ${f} - ${p}`;case"race":return`${b} - ${f} - Full Race`;default:return s.name}}function v(){const k=s.teams.find(A=>A.id===d),b=(k==null?void 0:k.name)||"Unknown Team";switch(a){case"all":return`Complete session with ${s.teams.length} teams, ${s.runners.length} runners, and ${s.times.length} times`;case"team":const A=s.runners.filter(ue=>ue.teamId===d),G=s.times.filter(ue=>A.some(ee=>ee.id===ue.runnerId));return`${b}: ${A.length} runners with ${G.length} recorded times`;case"checkpoint":const z=g().times.length;return`${b} - ${f} at ${p}: ${z} times`;case"race":const Z=g().times.length;return`${b} - ${f}: ${Z} times across all checkpoints`;default:return""}}function S(){switch(a){case"all":return!0;case"team":return!!d;case"checkpoint":return!!(d&&p&&f);case"race":return!!(d&&f);default:return!1}}async function w(){if(!S())return;t(4,c="Sharing...");const k=g(),b=await $i(k);t(4,c=b?"Shared successfully!":"Share failed, data copied to clipboard"),setTimeout(()=>t(4,c=""),3e3)}async function E(){if(!(u||!S())){t(3,u=!0);try{const k=g();t(2,o=await Ki(k))}catch(k){console.error("Failed to generate QR code:",k),t(4,c="Failed to generate QR code"),setTimeout(()=>t(4,c=""),3e3)}finally{t(3,u=!1)}}}function T(){if(!S())return;const k=g();Wi(k),t(4,c="File downloaded!"),setTimeout(()=>t(4,c=""),3e3)}const R=[[]];function B(){a=this.__value,t(0,a)}function M(){a=this.__value,t(0,a)}function C(){a=this.__value,t(0,a)}function I(){a=this.__value,t(0,a)}function N(){d=qe(this),t(5,d),t(0,a)}function P(){f=qe(this),t(7,f),t(0,a),t(9,l),t(1,s)}function Q(){p=qe(this),t(6,p),t(0,a),t(8,i),t(1,s)}return n.$$.update=()=>{n.$$.dirty[0]&2&&t(9,l=[...new Set(s.times.map(k=>k.raceName).filter(Boolean))]),n.$$.dirty[0]&2&&t(8,i=s.unit==="km"?["1K","2K","3K","4K","5K"]:["1M","2M","3M","3.1M"]),n.$$.dirty[0]&1&&a&&(t(5,d=""),t(6,p=""),t(7,f=""),t(2,o=""))},[a,s,o,u,c,d,p,f,i,l,_,v,S,w,E,T,B,R,M,C,I,N,P,Q]}class es extends Ye{constructor(e){super(),Ge(this,e,xi,Xi,Pe,{},null,[-1,-1])}}const ts="modulepreload",ns=function(n){return"/xc-timer/"+n},Hn={},ls=function(e,t,l){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),u=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(t.map(c=>{if(c=ns(c),c in Hn)return;Hn[c]=!0;const a=c.endsWith(".css"),d=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const p=document.createElement("link");if(p.rel=a?"stylesheet":ts,a||(p.as="script"),p.crossOrigin="",p.href=c,u&&p.setAttribute("nonce",u),document.head.appendChild(p),a)return new Promise((f,g)=>{p.addEventListener("load",f),p.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=o,window.dispatchEvent(u),!u.defaultPrevented)throw o}return i.then(o=>{for(const u of o||[])u.status==="rejected"&&s(u.reason);return e().catch(s)})};class ne{constructor(e,t,l,i,s){this._legacyCanvasSize=ne.DEFAULT_CANVAS_SIZE,this._preferredCamera="environment",this._maxScansPerSecond=25,this._lastScanTimestamp=-1,this._destroyed=this._flashOn=this._paused=this._active=!1,this.$video=e,this.$canvas=document.createElement("canvas"),l&&typeof l=="object"?this._onDecode=t:(console.warn(l||i||s?"You're using a deprecated version of the QrScanner constructor which will be removed in the future":"Note that the type of the scan result passed to onDecode will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),this._legacyOnDecode=t),t=typeof l=="object"?l:{},this._onDecodeError=t.onDecodeError||(typeof l=="function"?l:this._onDecodeError),this._calculateScanRegion=t.calculateScanRegion||(typeof i=="function"?i:this._calculateScanRegion),this._preferredCamera=t.preferredCamera||s||this._preferredCamera,this._legacyCanvasSize=typeof l=="number"?l:typeof i=="number"?i:this._legacyCanvasSize,this._maxScansPerSecond=t.maxScansPerSecond||this._maxScansPerSecond,this._onPlay=this._onPlay.bind(this),this._onLoadedMetaData=this._onLoadedMetaData.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this._updateOverlay=this._updateOverlay.bind(this),e.disablePictureInPicture=!0,e.playsInline=!0,e.muted=!0;let o=!1;if(e.hidden&&(e.hidden=!1,o=!0),document.body.contains(e)||(document.body.appendChild(e),o=!0),l=e.parentElement,t.highlightScanRegion||t.highlightCodeOutline){if(i=!!t.overlay,this.$overlay=t.overlay||document.createElement("div"),s=this.$overlay.style,s.position="absolute",s.display="none",s.pointerEvents="none",this.$overlay.classList.add("scan-region-highlight"),!i&&t.highlightScanRegion){this.$overlay.innerHTML='<svg class="scan-region-highlight-svg" viewBox="0 0 238 238" preserveAspectRatio="none" style="position:absolute;width:100%;height:100%;left:0;top:0;fill:none;stroke:#e9b213;stroke-width:4;stroke-linecap:round;stroke-linejoin:round"><path d="M31 2H10a8 8 0 0 0-8 8v21M207 2h21a8 8 0 0 1 8 8v21m0 176v21a8 8 0 0 1-8 8h-21m-176 0H10a8 8 0 0 1-8-8v-21"/></svg>';try{this.$overlay.firstElementChild.animate({transform:["scale(.98)","scale(1.01)"]},{duration:400,iterations:1/0,direction:"alternate",easing:"ease-in-out"})}catch{}l.insertBefore(this.$overlay,this.$video.nextSibling)}t.highlightCodeOutline&&(this.$overlay.insertAdjacentHTML("beforeend",'<svg class="code-outline-highlight" preserveAspectRatio="none" style="display:none;width:100%;height:100%;fill:none;stroke:#e9b213;stroke-width:5;stroke-dasharray:25;stroke-linecap:round;stroke-linejoin:round"><polygon/></svg>'),this.$codeOutlineHighlight=this.$overlay.lastElementChild)}this._scanRegion=this._calculateScanRegion(e),requestAnimationFrame(()=>{let u=window.getComputedStyle(e);u.display==="none"&&(e.style.setProperty("display","block","important"),o=!0),u.visibility!=="visible"&&(e.style.setProperty("visibility","visible","important"),o=!0),o&&(console.warn("QrScanner has overwritten the video hiding style to avoid Safari stopping the playback."),e.style.opacity="0",e.style.width="0",e.style.height="0",this.$overlay&&this.$overlay.parentElement&&this.$overlay.parentElement.removeChild(this.$overlay),delete this.$overlay,delete this.$codeOutlineHighlight),this.$overlay&&this._updateOverlay()}),e.addEventListener("play",this._onPlay),e.addEventListener("loadedmetadata",this._onLoadedMetaData),document.addEventListener("visibilitychange",this._onVisibilityChange),window.addEventListener("resize",this._updateOverlay),this._qrEnginePromise=ne.createQrEngine()}static set WORKER_PATH(e){console.warn("Setting QrScanner.WORKER_PATH is not required and not supported anymore. Have a look at the README for new setup instructions.")}static async hasCamera(){try{return!!(await ne.listCameras(!1)).length}catch{return!1}}static async listCameras(e=!1){if(!navigator.mediaDevices)return[];let t=async()=>(await navigator.mediaDevices.enumerateDevices()).filter(i=>i.kind==="videoinput"),l;try{e&&(await t()).every(i=>!i.label)&&(l=await navigator.mediaDevices.getUserMedia({audio:!1,video:!0}))}catch{}try{return(await t()).map((i,s)=>({id:i.deviceId,label:i.label||(s===0?"Default Camera":`Camera ${s+1}`)}))}finally{l&&(console.warn("Call listCameras after successfully starting a QR scanner to avoid creating a temporary video stream"),ne._stopVideoStream(l))}}async hasFlash(){let e;try{if(this.$video.srcObject){if(!(this.$video.srcObject instanceof MediaStream))return!1;e=this.$video.srcObject}else e=(await this._getCameraStream()).stream;return"torch"in e.getVideoTracks()[0].getSettings()}catch{return!1}finally{e&&e!==this.$video.srcObject&&(console.warn("Call hasFlash after successfully starting the scanner to avoid creating a temporary video stream"),ne._stopVideoStream(e))}}isFlashOn(){return this._flashOn}async toggleFlash(){this._flashOn?await this.turnFlashOff():await this.turnFlashOn()}async turnFlashOn(){if(!this._flashOn&&!this._destroyed&&(this._flashOn=!0,this._active&&!this._paused))try{if(!await this.hasFlash())throw"No flash available";await this.$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:!0}]})}catch(e){throw this._flashOn=!1,e}}async turnFlashOff(){this._flashOn&&(this._flashOn=!1,await this._restartVideoStream())}destroy(){this.$video.removeEventListener("loadedmetadata",this._onLoadedMetaData),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),window.removeEventListener("resize",this._updateOverlay),this._destroyed=!0,this._flashOn=!1,this.stop(),ne._postWorkerMessage(this._qrEnginePromise,"close")}async start(){if(this._destroyed)throw Error("The QR scanner can not be started as it had been destroyed.");if((!this._active||this._paused)&&(window.location.protocol!=="https:"&&console.warn("The camera stream is only accessible if the page is transferred via https."),this._active=!0,!document.hidden))if(this._paused=!1,this.$video.srcObject)await this.$video.play();else try{let{stream:e,facingMode:t}=await this._getCameraStream();!this._active||this._paused?ne._stopVideoStream(e):(this._setVideoMirror(t),this.$video.srcObject=e,await this.$video.play(),this._flashOn&&(this._flashOn=!1,this.turnFlashOn().catch(()=>{})))}catch(e){if(!this._paused)throw this._active=!1,e}}stop(){this.pause(),this._active=!1}async pause(e=!1){if(this._paused=!0,!this._active)return!0;this.$video.pause(),this.$overlay&&(this.$overlay.style.display="none");let t=()=>{this.$video.srcObject instanceof MediaStream&&(ne._stopVideoStream(this.$video.srcObject),this.$video.srcObject=null)};return e?(t(),!0):(await new Promise(l=>setTimeout(l,300)),this._paused?(t(),!0):!1)}async setCamera(e){e!==this._preferredCamera&&(this._preferredCamera=e,await this._restartVideoStream())}static async scanImage(e,t,l,i,s=!1,o=!1){let u,c=!1;t&&("scanRegion"in t||"qrEngine"in t||"canvas"in t||"disallowCanvasResizing"in t||"alsoTryWithoutScanRegion"in t||"returnDetailedScanResult"in t)?(u=t.scanRegion,l=t.qrEngine,i=t.canvas,s=t.disallowCanvasResizing||!1,o=t.alsoTryWithoutScanRegion||!1,c=!0):console.warn(t||l||i||s||o?"You're using a deprecated api for scanImage which will be removed in the future.":"Note that the return type of scanImage will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),t=!!l;try{let a,d;[l,a]=await Promise.all([l||ne.createQrEngine(),ne._loadImage(e)]),[i,d]=ne._drawToCanvas(a,u,i,s);let p;if(l instanceof Worker){let f=l;t||ne._postWorkerMessageSync(f,"inversionMode","both"),p=await new Promise((g,_)=>{let v,S,w,E=-1;S=R=>{R.data.id===E&&(f.removeEventListener("message",S),f.removeEventListener("error",w),clearTimeout(v),R.data.data!==null?g({data:R.data.data,cornerPoints:ne._convertPoints(R.data.cornerPoints,u)}):_(ne.NO_QR_CODE_FOUND))},w=R=>{f.removeEventListener("message",S),f.removeEventListener("error",w),clearTimeout(v),_("Scanner error: "+(R?R.message||R:"Unknown Error"))},f.addEventListener("message",S),f.addEventListener("error",w),v=setTimeout(()=>w("timeout"),1e4);let T=d.getImageData(0,0,i.width,i.height);E=ne._postWorkerMessageSync(f,"decode",T,[T.data.buffer])})}else p=await Promise.race([new Promise((f,g)=>window.setTimeout(()=>g("Scanner error: timeout"),1e4)),(async()=>{try{var[f]=await l.detect(i);if(!f)throw ne.NO_QR_CODE_FOUND;return{data:f.rawValue,cornerPoints:ne._convertPoints(f.cornerPoints,u)}}catch(g){if(f=g.message||g,/not implemented|service unavailable/.test(f))return ne._disableBarcodeDetector=!0,ne.scanImage(e,{scanRegion:u,canvas:i,disallowCanvasResizing:s,alsoTryWithoutScanRegion:o});throw`Scanner error: ${f}`}})()]);return c?p:p.data}catch(a){if(!u||!o)throw a;let d=await ne.scanImage(e,{qrEngine:l,canvas:i,disallowCanvasResizing:s});return c?d:d.data}finally{t||ne._postWorkerMessage(l,"close")}}setGrayscaleWeights(e,t,l,i=!0){ne._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:e,green:t,blue:l,useIntegerApproximation:i})}setInversionMode(e){ne._postWorkerMessage(this._qrEnginePromise,"inversionMode",e)}static async createQrEngine(e){if(e&&console.warn("Specifying a worker path is not required and not supported anymore."),e=()=>ls(()=>import("./qr-scanner-worker.min-D85Z9gVD.js"),[]).then(l=>l.createWorker()),!(!ne._disableBarcodeDetector&&"BarcodeDetector"in window&&BarcodeDetector.getSupportedFormats&&(await BarcodeDetector.getSupportedFormats()).includes("qr_code")))return e();let t=navigator.userAgentData;return t&&t.brands.some(({brand:l})=>/Chromium/i.test(l))&&/mac ?OS/i.test(t.platform)&&await t.getHighEntropyValues(["architecture","platformVersion"]).then(({architecture:l,platformVersion:i})=>/arm/i.test(l||"arm")&&13<=parseInt(i||"13")).catch(()=>!0)?e():new BarcodeDetector({formats:["qr_code"]})}_onPlay(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay(),this.$overlay&&(this.$overlay.style.display=""),this._scanFrame()}_onLoadedMetaData(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay()}_onVisibilityChange(){document.hidden?this.pause():this._active&&this.start()}_calculateScanRegion(e){let t=Math.round(.6666666666666666*Math.min(e.videoWidth,e.videoHeight));return{x:Math.round((e.videoWidth-t)/2),y:Math.round((e.videoHeight-t)/2),width:t,height:t,downScaledWidth:this._legacyCanvasSize,downScaledHeight:this._legacyCanvasSize}}_updateOverlay(){requestAnimationFrame(()=>{if(this.$overlay){var e=this.$video,t=e.videoWidth,l=e.videoHeight,i=e.offsetWidth,s=e.offsetHeight,o=e.offsetLeft,u=e.offsetTop,c=window.getComputedStyle(e),a=c.objectFit,d=t/l,p=i/s;switch(a){case"none":var f=t,g=l;break;case"fill":f=i,g=s;break;default:(a==="cover"?d>p:d<p)?(g=s,f=g*d):(f=i,g=f/d),a==="scale-down"&&(f=Math.min(f,t),g=Math.min(g,l))}var[_,v]=c.objectPosition.split(" ").map((w,E)=>{const T=parseFloat(w);return w.endsWith("%")?(E?s-g:i-f)*T/100:T});c=this._scanRegion.width||t,p=this._scanRegion.height||l,a=this._scanRegion.x||0;var S=this._scanRegion.y||0;d=this.$overlay.style,d.width=`${c/t*f}px`,d.height=`${p/l*g}px`,d.top=`${u+v+S/l*g}px`,l=/scaleX\(-1\)/.test(e.style.transform),d.left=`${o+(l?i-_-f:_)+(l?t-a-c:a)/t*f}px`,d.transform=e.style.transform}})}static _convertPoints(e,t){if(!t)return e;let l=t.x||0,i=t.y||0,s=t.width&&t.downScaledWidth?t.width/t.downScaledWidth:1;t=t.height&&t.downScaledHeight?t.height/t.downScaledHeight:1;for(let o of e)o.x=o.x*s+l,o.y=o.y*t+i;return e}_scanFrame(){!this._active||this.$video.paused||this.$video.ended||("requestVideoFrameCallback"in this.$video?this.$video.requestVideoFrameCallback.bind(this.$video):requestAnimationFrame)(async()=>{if(!(1>=this.$video.readyState)){var e=Date.now()-this._lastScanTimestamp,t=1e3/this._maxScansPerSecond;e<t&&await new Promise(i=>setTimeout(i,t-e)),this._lastScanTimestamp=Date.now();try{var l=await ne.scanImage(this.$video,{scanRegion:this._scanRegion,qrEngine:this._qrEnginePromise,canvas:this.$canvas})}catch(i){if(!this._active)return;this._onDecodeError(i)}!ne._disableBarcodeDetector||await this._qrEnginePromise instanceof Worker||(this._qrEnginePromise=ne.createQrEngine()),l?(this._onDecode?this._onDecode(l):this._legacyOnDecode&&this._legacyOnDecode(l.data),this.$codeOutlineHighlight&&(clearTimeout(this._codeOutlineHighlightRemovalTimeout),this._codeOutlineHighlightRemovalTimeout=void 0,this.$codeOutlineHighlight.setAttribute("viewBox",`${this._scanRegion.x||0} ${this._scanRegion.y||0} ${this._scanRegion.width||this.$video.videoWidth} ${this._scanRegion.height||this.$video.videoHeight}`),this.$codeOutlineHighlight.firstElementChild.setAttribute("points",l.cornerPoints.map(({x:i,y:s})=>`${i},${s}`).join(" ")),this.$codeOutlineHighlight.style.display="")):this.$codeOutlineHighlight&&!this._codeOutlineHighlightRemovalTimeout&&(this._codeOutlineHighlightRemovalTimeout=setTimeout(()=>this.$codeOutlineHighlight.style.display="none",100))}this._scanFrame()})}_onDecodeError(e){e!==ne.NO_QR_CODE_FOUND&&console.log(e)}async _getCameraStream(){if(!navigator.mediaDevices)throw"Camera not found.";let e=/^(environment|user)$/.test(this._preferredCamera)?"facingMode":"deviceId",t=[{width:{min:1024}},{width:{min:768}},{}],l=t.map(i=>Object.assign({},i,{[e]:{exact:this._preferredCamera}}));for(let i of[...l,...t])try{let s=await navigator.mediaDevices.getUserMedia({video:i,audio:!1}),o=this._getFacingMode(s)||(i.facingMode?this._preferredCamera:this._preferredCamera==="environment"?"user":"environment");return{stream:s,facingMode:o}}catch{}throw"Camera not found."}async _restartVideoStream(){let e=this._paused;await this.pause(!0)&&!e&&this._active&&await this.start()}static _stopVideoStream(e){for(let t of e.getTracks())t.stop(),e.removeTrack(t)}_setVideoMirror(e){this.$video.style.transform="scaleX("+(e==="user"?-1:1)+")"}_getFacingMode(e){return(e=e.getVideoTracks()[0])?/rear|back|environment/i.test(e.label)?"environment":/front|user|face/i.test(e.label)?"user":null:null}static _drawToCanvas(e,t,l,i=!1){l=l||document.createElement("canvas");let s=t&&t.x?t.x:0,o=t&&t.y?t.y:0,u=t&&t.width?t.width:e.videoWidth||e.width,c=t&&t.height?t.height:e.videoHeight||e.height;return i||(i=t&&t.downScaledWidth?t.downScaledWidth:u,t=t&&t.downScaledHeight?t.downScaledHeight:c,l.width!==i&&(l.width=i),l.height!==t&&(l.height=t)),t=l.getContext("2d",{alpha:!1}),t.imageSmoothingEnabled=!1,t.drawImage(e,s,o,u,c,0,0,l.width,l.height),[l,t]}static async _loadImage(e){if(e instanceof Image)return await ne._awaitImageLoad(e),e;if(e instanceof HTMLVideoElement||e instanceof HTMLCanvasElement||e instanceof SVGImageElement||"OffscreenCanvas"in window&&e instanceof OffscreenCanvas||"ImageBitmap"in window&&e instanceof ImageBitmap)return e;if(e instanceof File||e instanceof Blob||e instanceof URL||typeof e=="string"){let t=new Image;t.src=e instanceof File||e instanceof Blob?URL.createObjectURL(e):e.toString();try{return await ne._awaitImageLoad(t),t}finally{(e instanceof File||e instanceof Blob)&&URL.revokeObjectURL(t.src)}}else throw"Unsupported image type."}static async _awaitImageLoad(e){e.complete&&e.naturalWidth!==0||await new Promise((t,l)=>{let i=s=>{e.removeEventListener("load",i),e.removeEventListener("error",i),s instanceof ErrorEvent?l("Image load error"):t()};e.addEventListener("load",i),e.addEventListener("error",i)})}static async _postWorkerMessage(e,t,l,i){return ne._postWorkerMessageSync(await e,t,l,i)}static _postWorkerMessageSync(e,t,l,i){if(!(e instanceof Worker))return-1;let s=ne._workerMessageId++;return e.postMessage({id:s,type:t,data:l},i),s}}ne.DEFAULT_CANVAS_SIZE=400;ne.NO_QR_CODE_FOUND="No QR code found";ne._disableBarcodeDetector=!1;ne._workerMessageId=0;function Vn(n,e,t){const l=n.slice();return l[43]=e[t],l}function Qn(n,e,t){const l=n.slice();return l[46]=e[t],l}function is(n){var te;let e,t,l,i,s,o,u=(((te=n[8])==null?void 0:te.name)||"Imported Session")+"",c,a,d,p=n[22]()+"",f,g,_,v,S,w,E,T,R,B,M,C,I,N,P,Q,k,b,A,G,z,Z,ue,ee,se,J,pe=n[7]==="replace"?"Replace Data":"Import Data",K,X,oe,de,ce=n[7]==="selective"&&jn(n);return X=mt(n[28][2]),{c(){e=m("div"),t=m("div"),l=m("h3"),l.textContent="Import Preview",i=y(),s=m("div"),o=m("strong"),c=O(u),a=m("br"),d=y(),f=O(p),g=y(),_=m("div"),v=m("h4"),v.textContent="How would you like to import this data?",S=y(),w=m("div"),E=m("label"),T=m("input"),R=y(),B=m("div"),B.innerHTML='<div class="option-title svelte-1uk5m2w">üîÑ Merge</div> <div class="option-description svelte-1uk5m2w">Combine with existing data (recommended)</div>',M=y(),C=m("label"),I=m("input"),N=y(),P=m("div"),P.innerHTML='<div class="option-title svelte-1uk5m2w">üéØ Selective</div> <div class="option-description svelte-1uk5m2w">Choose specific teams, races, or data types</div>',Q=y(),k=m("label"),b=m("input"),A=y(),G=m("div"),G.innerHTML='<div class="option-title svelte-1uk5m2w">‚ö†Ô∏è Replace All</div> <div class="option-description svelte-1uk5m2w">Replace all current data (destructive)</div>',z=y(),ce&&ce.c(),Z=y(),ue=m("div"),ee=m("button"),ee.textContent="Cancel",se=y(),J=m("button"),K=O(pe),h(l,"class","svelte-1uk5m2w"),h(s,"class","preview-summary svelte-1uk5m2w"),h(t,"class","preview-header svelte-1uk5m2w"),h(v,"class","svelte-1uk5m2w"),h(T,"type","radio"),T.__value="merge",ie(T,T.__value),h(T,"class","svelte-1uk5m2w"),h(B,"class","option-content svelte-1uk5m2w"),h(E,"class","mode-option svelte-1uk5m2w"),h(I,"type","radio"),I.__value="selective",ie(I,I.__value),h(I,"class","svelte-1uk5m2w"),h(P,"class","option-content svelte-1uk5m2w"),h(C,"class","mode-option svelte-1uk5m2w"),h(b,"type","radio"),b.__value="replace",ie(b,b.__value),h(b,"class","svelte-1uk5m2w"),h(G,"class","option-content svelte-1uk5m2w"),h(k,"class","mode-option svelte-1uk5m2w"),h(w,"class","mode-options svelte-1uk5m2w"),h(_,"class","import-mode-section svelte-1uk5m2w"),h(ee,"class","action-btn secondary svelte-1uk5m2w"),h(J,"class","action-btn primary svelte-1uk5m2w"),h(ue,"class","preview-actions svelte-1uk5m2w"),h(e,"class","preview-section svelte-1uk5m2w"),X.p(T,I,b)},m(j,L){V(j,e,L),r(e,t),r(t,l),r(t,i),r(t,s),r(s,o),r(o,c),r(s,a),r(s,d),r(s,f),r(e,g),r(e,_),r(_,v),r(_,S),r(_,w),r(w,E),r(E,T),T.checked=T.__value===n[7],r(E,R),r(E,B),r(w,M),r(w,C),r(C,I),I.checked=I.__value===n[7],r(C,N),r(C,P),r(w,Q),r(w,k),r(k,b),b.checked=b.__value===n[7],r(k,A),r(k,G),r(e,z),ce&&ce.m(e,null),r(e,Z),r(e,ue),r(ue,ee),r(ue,se),r(ue,J),r(J,K),oe||(de=[$(T,"change",n[27]),$(I,"change",n[29]),$(b,"change",n[30]),$(ee,"click",n[21]),$(J,"click",n[20])],oe=!0)},p(j,L){var U;L[0]&256&&u!==(u=(((U=j[8])==null?void 0:U.name)||"Imported Session")+"")&&Y(c,u),L[0]&128&&(T.checked=T.__value===j[7]),L[0]&128&&(I.checked=I.__value===j[7]),L[0]&128&&(b.checked=b.__value===j[7]),j[7]==="selective"?ce?ce.p(j,L):(ce=jn(j),ce.c(),ce.m(e,Z)):ce&&(ce.d(1),ce=null),L[0]&128&&pe!==(pe=j[7]==="replace"?"Replace Data":"Import Data")&&Y(K,pe)},d(j){j&&H(e),ce&&ce.d(),X.r(),oe=!1,_e(de)}}}function ss(n){let e,t,l,i,s,o,u,c,a,d,p,f,g,_,v,S,w,E,T,R,B,M,C,I;function N(k,b){return k[5]?k[4]?k[2]?os:rs:as:cs}let P=N(n),Q=P(n);return{c(){e=m("div"),t=m("div"),l=m("h3"),l.textContent="üì± Scan QR Code",i=y(),s=m("p"),s.textContent="Scan a QR code generated by another timer device",o=y(),Q.c(),u=y(),c=m("div"),a=m("h3"),a.textContent="üìÅ Upload File",d=y(),p=m("p"),p.textContent="Import timing data from a JSON backup file",f=y(),g=m("input"),_=y(),v=m("label"),v.textContent="üìÇ Choose File",S=y(),w=m("div"),E=m("h3"),E.textContent="üîÑ Manual Import",T=y(),R=m("p"),R.textContent="Paste JSON data directly",B=y(),M=m("textarea"),h(l,"class","svelte-1uk5m2w"),h(s,"class","svelte-1uk5m2w"),h(t,"class","method-card svelte-1uk5m2w"),h(a,"class","svelte-1uk5m2w"),h(p,"class","svelte-1uk5m2w"),h(g,"type","file"),h(g,"accept",".json"),h(g,"class","file-input svelte-1uk5m2w"),h(g,"id","file-upload"),h(v,"for","file-upload"),h(v,"class","method-btn secondary svelte-1uk5m2w"),h(c,"class","method-card svelte-1uk5m2w"),h(E,"class","svelte-1uk5m2w"),h(R,"class","svelte-1uk5m2w"),h(M,"placeholder","Paste JSON data here..."),h(M,"class","json-input svelte-1uk5m2w"),h(w,"class","method-card svelte-1uk5m2w"),h(e,"class","import-methods svelte-1uk5m2w")},m(k,b){V(k,e,b),r(e,t),r(t,l),r(t,i),r(t,s),r(t,o),Q.m(t,null),r(e,u),r(e,c),r(c,a),r(c,d),r(c,p),r(c,f),r(c,g),n[25](g),r(c,_),r(c,v),r(e,S),r(e,w),r(w,E),r(w,T),r(w,R),r(w,B),r(w,M),C||(I=[$(g,"change",n[18]),$(M,"paste",n[26])],C=!0)},p(k,b){P===(P=N(k))&&Q?Q.p(k,b):(Q.d(1),Q=P(k),Q&&(Q.c(),Q.m(t,null)))},d(k){k&&H(e),Q.d(),n[25](null),C=!1,_e(I)}}}function jn(n){var J,pe,K,X,oe,de,ce,te;let e,t,l,i,s,o,u,c,a,d=(((pe=(J=n[8])==null?void 0:J.teams)==null?void 0:pe.length)||0)+"",p,f,g,_,v,S,w,E,T=(((X=(K=n[8])==null?void 0:K.runners)==null?void 0:X.length)||0)+"",R,B,M,C,I,N,P,Q,k=(((de=(oe=n[8])==null?void 0:oe.times)==null?void 0:de.length)||0)+"",b,A,G,z,Z,ue,ee=n[10]&&((te=(ce=n[8])==null?void 0:ce.teams)==null?void 0:te.length)&&zn(n),se=n[12]&&n[14].length>0&&Jn(n);return{c(){e=m("div"),t=m("h4"),t.textContent="Select what to import:",l=y(),i=m("div"),s=m("label"),o=m("input"),u=y(),c=m("span"),a=O("Teams ("),p=O(d),f=O(")"),g=y(),_=m("label"),v=m("input"),S=y(),w=m("span"),E=O("Runners ("),R=O(T),B=O(")"),M=y(),C=m("label"),I=m("input"),N=y(),P=m("span"),Q=O("Times ("),b=O(k),A=O(")"),G=y(),ee&&ee.c(),z=y(),se&&se.c(),h(t,"class","svelte-1uk5m2w"),h(o,"type","checkbox"),h(o,"class","svelte-1uk5m2w"),h(s,"class","checkbox-option svelte-1uk5m2w"),h(v,"type","checkbox"),h(v,"class","svelte-1uk5m2w"),h(_,"class","checkbox-option svelte-1uk5m2w"),h(I,"type","checkbox"),h(I,"class","svelte-1uk5m2w"),h(C,"class","checkbox-option svelte-1uk5m2w"),h(i,"class","data-type-options svelte-1uk5m2w"),h(e,"class","selective-options svelte-1uk5m2w")},m(j,L){V(j,e,L),r(e,t),r(e,l),r(e,i),r(i,s),r(s,o),o.checked=n[10],r(s,u),r(s,c),r(c,a),r(c,p),r(c,f),r(i,g),r(i,_),r(_,v),v.checked=n[11],r(_,S),r(_,w),r(w,E),r(w,R),r(w,B),r(i,M),r(i,C),r(C,I),I.checked=n[12],r(C,N),r(C,P),r(P,Q),r(P,b),r(P,A),r(e,G),ee&&ee.m(e,null),r(e,z),se&&se.m(e,null),Z||(ue=[$(o,"change",n[31]),$(v,"change",n[32]),$(I,"change",n[33])],Z=!0)},p(j,L){var U,x,me,ae,le,F,D,q;L[0]&1024&&(o.checked=j[10]),L[0]&256&&d!==(d=(((x=(U=j[8])==null?void 0:U.teams)==null?void 0:x.length)||0)+"")&&Y(p,d),L[0]&2048&&(v.checked=j[11]),L[0]&256&&T!==(T=(((ae=(me=j[8])==null?void 0:me.runners)==null?void 0:ae.length)||0)+"")&&Y(R,T),L[0]&4096&&(I.checked=j[12]),L[0]&256&&k!==(k=(((F=(le=j[8])==null?void 0:le.times)==null?void 0:F.length)||0)+"")&&Y(b,k),j[10]&&((q=(D=j[8])==null?void 0:D.teams)!=null&&q.length)?ee?ee.p(j,L):(ee=zn(j),ee.c(),ee.m(e,z)):ee&&(ee.d(1),ee=null),j[12]&&j[14].length>0?se?se.p(j,L):(se=Jn(j),se.c(),se.m(e,null)):se&&(se.d(1),se=null)},d(j){j&&H(e),ee&&ee.d(),se&&se.d(),Z=!1,_e(ue)}}}function zn(n){let e,t,l,i,s=fe(n[8].teams),o=[];for(let u=0;u<s.length;u+=1)o[u]=$n(Qn(n,s,u));return{c(){e=m("div"),t=m("h5"),t.textContent="Select Teams:",l=y(),i=m("div");for(let u=0;u<o.length;u+=1)o[u].c();h(t,"class","svelte-1uk5m2w"),h(i,"class","team-checkboxes svelte-1uk5m2w"),h(e,"class","selection-group svelte-1uk5m2w")},m(u,c){V(u,e,c),r(e,t),r(e,l),r(e,i);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(i,null)},p(u,c){if(c[0]&8448){s=fe(u[8].teams);let a;for(a=0;a<s.length;a+=1){const d=Qn(u,s,a);o[a]?o[a].p(d,c):(o[a]=$n(d),o[a].c(),o[a].m(i,null))}for(;a<o.length;a+=1)o[a].d(1);o.length=s.length}},d(u){u&&H(e),Me(o,u)}}}function $n(n){let e,t,l,i=!1,s,o,u=n[46].name+"",c,a,d,p,f;return d=mt(n[28][1]),{c(){e=m("label"),t=m("input"),s=y(),o=m("span"),c=O(u),a=y(),h(t,"type","checkbox"),t.__value=l=n[46].id,ie(t,t.__value),h(t,"class","svelte-1uk5m2w"),we(o,"color",n[46].color),h(e,"class","checkbox-option svelte-1uk5m2w"),d.p(t)},m(g,_){V(g,e,_),r(e,t),t.checked=~(n[13]||[]).indexOf(t.__value),r(e,s),r(e,o),r(o,c),r(e,a),p||(f=$(t,"change",n[34]),p=!0)},p(g,_){_[0]&256&&l!==(l=g[46].id)&&(t.__value=l,ie(t,t.__value),i=!0),(i||_[0]&8448)&&(t.checked=~(g[13]||[]).indexOf(t.__value)),_[0]&256&&u!==(u=g[46].name+"")&&Y(c,u),_[0]&256&&we(o,"color",g[46].color)},d(g){g&&H(e),d.r(),p=!1,f()}}}function Jn(n){var u,c;let e,t,l,i,s=fe([...new Set((c=(u=n[8])==null?void 0:u.times)==null?void 0:c.map(Yn).filter(Boolean))]),o=[];for(let a=0;a<s.length;a+=1)o[a]=Kn(Vn(n,s,a));return{c(){e=m("div"),t=m("h5"),t.textContent="Select Races:",l=y(),i=m("div");for(let a=0;a<o.length;a+=1)o[a].c();h(t,"class","svelte-1uk5m2w"),h(i,"class","race-checkboxes svelte-1uk5m2w"),h(e,"class","selection-group svelte-1uk5m2w")},m(a,d){V(a,e,d),r(e,t),r(e,l),r(e,i);for(let p=0;p<o.length;p+=1)o[p]&&o[p].m(i,null)},p(a,d){var p,f;if(d[0]&16640){s=fe([...new Set((f=(p=a[8])==null?void 0:p.times)==null?void 0:f.map(Yn).filter(Boolean))]);let g;for(g=0;g<s.length;g+=1){const _=Vn(a,s,g);o[g]?o[g].p(_,d):(o[g]=Kn(_),o[g].c(),o[g].m(i,null))}for(;g<o.length;g+=1)o[g].d(1);o.length=s.length}},d(a){a&&H(e),Me(o,a)}}}function Kn(n){let e,t,l,i=!1,s,o,u=n[43]+"",c,a,d,p,f;return d=mt(n[28][0]),{c(){e=m("label"),t=m("input"),s=y(),o=m("span"),c=O(u),a=y(),h(t,"type","checkbox"),t.__value=l=n[43],ie(t,t.__value),h(t,"class","svelte-1uk5m2w"),h(e,"class","checkbox-option svelte-1uk5m2w"),d.p(t)},m(g,_){V(g,e,_),r(e,t),t.checked=~(n[14]||[]).indexOf(t.__value),r(e,s),r(e,o),r(o,c),r(e,a),p||(f=$(t,"change",n[35]),p=!0)},p(g,_){_[0]&256&&l!==(l=g[43])&&(t.__value=l,ie(t,t.__value),i=!0),(i||_[0]&16640)&&(t.checked=~(g[14]||[]).indexOf(t.__value)),_[0]&256&&u!==(u=g[43]+"")&&Y(c,u)},d(g){g&&H(e),d.r(),p=!1,f()}}}function os(n){let e,t,l,i,s,o,u,c;return{c(){e=m("div"),t=m("video"),l=y(),i=m("button"),i.textContent="‚èπÔ∏è Stop Scanning",s=y(),o=m("div"),o.textContent="Point your camera at a QR code to scan",h(t,"class","scanner-video svelte-1uk5m2w"),t.autoplay=!0,t.playsInline=!0,t.muted=!0,h(i,"class","stop-btn svelte-1uk5m2w"),h(o,"class","scanner-instructions svelte-1uk5m2w"),h(e,"class","scanner-container svelte-1uk5m2w")},m(a,d){V(a,e,d),r(e,t),n[24](t),r(e,l),r(e,i),r(e,s),r(e,o),u||(c=$(i,"click",n[17]),u=!0)},p:he,d(a){a&&H(e),n[24](null),u=!1,c()}}}function rs(n){let e,t,l;return{c(){e=m("button"),e.textContent="üì∑ Start Camera",h(e,"class","method-btn primary svelte-1uk5m2w")},m(i,s){V(i,e,s),t||(l=$(e,"click",n[16]),t=!0)},p:he,d(i){i&&H(e),t=!1,l()}}}function as(n){let e,t,l,i,s,o,u,c,a,d;return{c(){e=m("div"),t=O("üì∑ "),l=O(n[6]),i=y(),s=m("br"),o=m("small"),o.textContent="QR scanning requires camera access on your device.",u=y(),c=m("button"),c.textContent="üîÑ Retry Camera Check",h(c,"class","retry-btn svelte-1uk5m2w"),h(e,"class","camera-status error svelte-1uk5m2w")},m(p,f){V(p,e,f),r(e,t),r(e,l),r(e,i),r(e,s),r(e,o),r(e,u),r(e,c),a||(d=$(c,"click",n[15]),a=!0)},p(p,f){f[0]&64&&Y(l,p[6])},d(p){p&&H(e),a=!1,d()}}}function cs(n){let e;return{c(){e=m("div"),e.innerHTML=`<div class="loading-spinner svelte-1uk5m2w"></div>
            Checking camera availability...`,h(e,"class","camera-status svelte-1uk5m2w")},m(t,l){V(t,e,l)},p:he,d(t){t&&H(e)}}}function Wn(n){let e,t;return{c(){e=m("div"),t=O(n[3]),h(e,"class","status-message svelte-1uk5m2w"),ge(e,"success",n[3].includes("success")),ge(e,"error",n[3].includes("Failed")||n[3].includes("Invalid")||n[3].includes("denied")||n[3].includes("Error"))},m(l,i){V(l,e,i),r(e,t)},p(l,i){i[0]&8&&Y(t,l[3]),i[0]&8&&ge(e,"success",l[3].includes("success")),i[0]&8&&ge(e,"error",l[3].includes("Failed")||l[3].includes("Invalid")||l[3].includes("denied")||l[3].includes("Error"))},d(l){l&&H(e)}}}function Gn(n){let e;return{c(){e=m("div"),e.innerHTML='<h4 class="svelte-1uk5m2w">Import Information</h4> <ul class="svelte-1uk5m2w"><li class="svelte-1uk5m2w"><strong>Merge:</strong> Combines imported data with existing data</li> <li class="svelte-1uk5m2w"><strong>Selective:</strong> Choose specific teams, races, or data types to import</li> <li class="svelte-1uk5m2w"><strong>Replace:</strong> Completely replaces all current data (use with caution)</li> <li class="svelte-1uk5m2w">Runners with the same name will be combined automatically</li> <li class="svelte-1uk5m2w">Teams with the same name will be combined automatically</li></ul>',h(e,"class","info-section svelte-1uk5m2w")},m(t,l){V(t,e,l)},d(t){t&&H(e)}}}function us(n){let e,t,l,i,s,o,u;function c(g,_){return g[9]?is:ss}let a=c(n),d=a(n),p=n[3]&&Wn(n),f=!n[9]&&Gn();return{c(){e=m("div"),t=m("div"),t.innerHTML='<h2 class="svelte-1uk5m2w">Import Data</h2> <p class="svelte-1uk5m2w">Import timing data from other devices or backup files</p>',l=y(),d.c(),i=y(),p&&p.c(),s=y(),f&&f.c(),h(t,"class","header svelte-1uk5m2w"),h(e,"class","import-container svelte-1uk5m2w")},m(g,_){V(g,e,_),r(e,t),r(e,l),d.m(e,null),r(e,i),p&&p.m(e,null),r(e,s),f&&f.m(e,null),o||(u=$(window,"beforeunload",n[23]),o=!0)},p(g,_){a===(a=c(g))&&d?d.p(g,_):(d.d(1),d=a(g),d&&(d.c(),d.m(e,i))),g[3]?p?p.p(g,_):(p=Wn(g),p.c(),p.m(e,s)):p&&(p.d(1),p=null),g[9]?f&&(f.d(1),f=null):f||(f=Gn(),f.c(),f.m(e,null))},i:he,o:he,d(g){g&&H(e),d.d(),p&&p.d(),f&&f.d(),o=!1,u()}}}const Yn=n=>n.raceName;function ds(n,e,t){let l;Be(n,ve,L=>t(37,l=L));let i,s,o=null,u=!1,c="",a=!1,d=!1,p="",f="merge",g=null,_=!1,v=!0,S=!0,w=!0,E=[],T=[];async function R(){try{console.log("Checking camera support...");const L=await ne.hasCamera();if(console.log("QrScanner.hasCamera():",L),L)try{const U=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});console.log("Camera stream obtained successfully"),U.getTracks().forEach(x=>x.stop()),t(4,a=!0),t(6,p="")}catch(U){console.error("getUserMedia error:",U),t(4,a=!1),U.name==="NotAllowedError"?t(6,p="Camera access denied. Please allow camera permissions and refresh the page."):U.name==="NotFoundError"?t(6,p="No camera found on this device."):U.name==="NotSupportedError"?t(6,p="Camera not supported in this browser."):t(6,p=`Camera error: ${U.message}`)}else t(4,a=!1),t(6,p="Camera not supported on this device or browser.");t(5,d=!0),console.log("Camera check complete. hasCamera:",a,"error:",p)}catch(L){console.error("Error checking camera support:",L),t(4,a=!1),t(6,p="Failed to check camera support."),t(5,d=!0)}}async function B(){if(!s||u||!a){console.log("Cannot start scanning:",{videoElement:!!s,isScanning:u,hasCamera:a});return}try{t(3,c="Starting camera..."),console.log("Creating QR scanner..."),o=new ne(s,L=>{console.log("QR code detected:",L.data),M(),C(L.data)},{highlightScanRegion:!0,highlightCodeOutline:!0,preferredCamera:"environment",maxScansPerSecond:5}),console.log("Starting QR scanner..."),await o.start(),t(2,u=!0),t(3,c="Scanning for QR code... Point camera at QR code"),console.log("QR scanner started successfully")}catch(L){console.error("Error starting QR scanner:",L);let U="Failed to start camera. ";L.name==="NotAllowedError"?U+="Camera access denied. Please allow camera permissions and try again.":L.name==="NotFoundError"?U+="No camera found on this device.":L.name==="NotReadableError"?U+="Camera is already in use by another application.":L.name==="OverconstrainedError"?U+="Camera constraints could not be satisfied.":U+=`Error: ${L.message}`,t(3,c=U),t(2,u=!1),setTimeout(()=>{c===U&&t(3,c="")},1e4)}}function M(){console.log("Stopping QR scanner..."),o&&(o.destroy(),o=null,console.log("QR scanner destroyed")),t(2,u=!1),!c.includes("QR code detected")&&!c.includes("Data loaded")&&t(3,c="")}function C(L){try{console.log("Processing QR result, data length:",L.length);const U=JSON.parse(L);console.log("QR data parsed successfully:",U),P(U)}catch(U){console.error("Error parsing QR code:",U),t(3,c="Invalid QR code data - not a valid timing session"),setTimeout(()=>t(3,c=""),5e3)}}function I(L){var ae;const x=(ae=L.target.files)==null?void 0:ae[0];if(!x)return;const me=new FileReader;me.onload=le=>{var F;try{const D=(F=le.target)==null?void 0:F.result,q=JSON.parse(D);P(q)}catch(D){console.error("Error parsing file:",D),t(3,c="Invalid file format - not a valid JSON timing session"),setTimeout(()=>t(3,c=""),3e3)}},me.readAsText(x)}function N(L){const U=L.target,x=U.value.trim();if(x)try{const me=JSON.parse(x);P(me),U.value=""}catch{t(3,c="Invalid JSON format"),setTimeout(()=>t(3,c=""),3e3)}}function P(L){var U,x;t(8,g=L),t(9,_=!0),t(13,E=((U=L.teams)==null?void 0:U.map(me=>me.id))||[]),t(14,T=[...new Set((x=L.times)==null?void 0:x.map(me=>me.raceName).filter(Boolean))]),t(3,c="Data loaded! Review and confirm import below."),setTimeout(()=>t(3,c=""),5e3)}function Q(){if(g){switch(f){case"replace":k(g);break;case"selective":b(g);break;case"merge":default:A(g);break}t(8,g=null),t(9,_=!1),t(3,c="Import completed successfully!"),setTimeout(()=>t(3,c=""),3e3)}}function k(L){ve.set({...L,id:l.id,updated:Date.now()})}function b(L){var ye,st,qt;let U=[],x=[],me=[];if(v&&(U=((ye=L.teams)==null?void 0:ye.filter(re=>E.includes(re.id)))||[]),S&&(x=((st=L.runners)==null?void 0:st.filter(re=>E.includes(re.teamId)))||[]),w){const re=new Set(x.map(Ce=>Ce.id));me=((qt=L.times)==null?void 0:qt.filter(Ce=>re.has(Ce.runnerId)&&(!Ce.raceName||T.includes(Ce.raceName))))||[]}const ae=new Set(l.teams.map(re=>re.name.toLowerCase())),le=new Set(l.runners.map(re=>re.name.toLowerCase())),F=U.filter(re=>!ae.has(re.name.toLowerCase())),D=new Map;U.forEach(re=>{const Ce=l.teams.find(Ee=>Ee.name.toLowerCase()===re.name.toLowerCase());if(Ce)D.set(re.id,Ce.id);else{const Ee=crypto.randomUUID();D.set(re.id,Ee),F.push({...re,id:Ee})}});const q=x.filter(re=>!le.has(re.name.toLowerCase())),W=new Map;x.forEach(re=>{const Ce=l.runners.find(Ee=>Ee.name.toLowerCase()===re.name.toLowerCase());if(Ce)W.set(re.id,Ce.id);else{const Ee=crypto.randomUUID(),vl=D.get(re.teamId)||re.teamId;W.set(re.id,Ee),q.push({...re,id:Ee,teamId:vl})}});const De=me.map(re=>({...re,runnerId:W.get(re.runnerId)||re.runnerId}));ve.update(re=>({...re,teams:[...re.teams,...F],runners:[...re.runners,...q],times:[...re.times,...De],unit:L.unit||re.unit,updated:Date.now()}))}function A(L){var q;const U=new Set(l.runners.map(W=>W.name.toLowerCase())),x=new Set(l.teams.map(W=>W.name.toLowerCase())),me=((q=L.teams)==null?void 0:q.filter(W=>!x.has(W.name.toLowerCase())))||[],ae=new Map;(L.teams||[]).forEach(W=>{const De=l.teams.find(ye=>ye.name.toLowerCase()===W.name.toLowerCase());if(De)ae.set(W.id,De.id);else{const ye=crypto.randomUUID();ae.set(W.id,ye),me.push({...W,id:ye})}});const le=(L.runners||[]).filter(W=>!U.has(W.name.toLowerCase())),F=new Map;(L.runners||[]).forEach(W=>{const De=l.runners.find(ye=>ye.name.toLowerCase()===W.name.toLowerCase());if(De)F.set(W.id,De.id);else{const ye=crypto.randomUUID(),st=ae.get(W.teamId)||W.teamId;F.set(W.id,ye),le.push({...W,id:ye,teamId:st})}});const D=(L.times||[]).map(W=>({...W,runnerId:F.get(W.runnerId)||W.runnerId}));ve.update(W=>({...W,teams:[...W.teams,...me],runners:[...W.runners,...le],times:[...W.times,...D],unit:L.unit||W.unit,updated:Date.now()}))}function G(){t(8,g=null),t(9,_=!1),t(3,c="")}function z(){var ae,le,F,D;if(!g)return"";const L=((ae=g.teams)==null?void 0:ae.length)||0,U=((le=g.runners)==null?void 0:le.length)||0,x=((F=g.times)==null?void 0:F.length)||0,me=new Set((D=g.times)==null?void 0:D.map(q=>q.raceName).filter(Boolean)).size;return`${L} teams, ${U} runners, ${x} times across ${me} races`}R();function Z(){M()}const ue=[[],[],[]];function ee(L){ut[L?"unshift":"push"](()=>{s=L,t(1,s)})}function se(L){ut[L?"unshift":"push"](()=>{i=L,t(0,i)})}const J=L=>{setTimeout(()=>N(L),100)};function pe(){f=this.__value,t(7,f)}function K(){f=this.__value,t(7,f)}function X(){f=this.__value,t(7,f)}function oe(){v=this.checked,t(10,v)}function de(){S=this.checked,t(11,S)}function ce(){w=this.checked,t(12,w)}function te(){E=Qt(ue[1],this.__value,this.checked),t(13,E)}function j(){T=Qt(ue[0],this.__value,this.checked),t(14,T)}return[i,s,u,c,a,d,p,f,g,_,v,S,w,E,T,R,B,M,I,N,Q,G,z,Z,ee,se,J,pe,ue,K,X,oe,de,ce,te,j]}class fs extends Ye{constructor(e){super(),Ge(this,e,ds,us,Pe,{},null,[-1,-1])}}function hs(n){let e,t;return e=new fs({}),{c(){nt(e.$$.fragment)},m(l,i){Ke(e,l,i),t=!0},i(l){t||(Te(e.$$.fragment,l),t=!0)},o(l){Ae(e.$$.fragment,l),t=!1},d(l){We(e,l)}}}function ms(n){let e,t;return e=new es({}),{c(){nt(e.$$.fragment)},m(l,i){Ke(e,l,i),t=!0},i(l){t||(Te(e.$$.fragment,l),t=!0)},o(l){Ae(e.$$.fragment,l),t=!1},d(l){We(e,l)}}}function gs(n){let e,t;return e=new li({}),{c(){nt(e.$$.fragment)},m(l,i){Ke(e,l,i),t=!0},i(l){t||(Te(e.$$.fragment,l),t=!0)},o(l){Ae(e.$$.fragment,l),t=!1},d(l){We(e,l)}}}function ps(n){let e,t;return e=new Kl({}),{c(){nt(e.$$.fragment)},m(l,i){Ke(e,l,i),t=!0},i(l){t||(Te(e.$$.fragment,l),t=!0)},o(l){Ae(e.$$.fragment,l),t=!1},d(l){We(e,l)}}}function _s(n){let e,t,l,i,s,o,u,c,a;i=new Hl({});const d=[ps,gs,ms,hs],p=[];function f(g,_){return g[0]==="setup"?0:g[0]==="timing"?1:g[0]==="share"?2:g[0]==="import"?3:-1}return~(u=f(n))&&(c=p[u]=d[u](n)),{c(){e=m("main"),t=m("header"),t.innerHTML='<h1 class="svelte-yynuvd">‚è±Ô∏è Cross Country Timer</h1>',l=y(),nt(i.$$.fragment),s=y(),o=m("div"),c&&c.c(),h(t,"class","app-header svelte-yynuvd"),h(o,"class","app-content svelte-yynuvd"),h(e,"class","app svelte-yynuvd")},m(g,_){V(g,e,_),r(e,t),r(e,l),Ke(i,e,null),r(e,s),r(e,o),~u&&p[u].m(o,null),a=!0},p(g,[_]){let v=u;u=f(g),u!==v&&(c&&(Nl(),Ae(p[v],1,1,()=>{p[v]=null}),Dl()),~u?(c=p[u],c||(c=p[u]=d[u](g),c.c()),Te(c,1),c.m(o,null)):c=null)},i(g){a||(Te(i.$$.fragment,g),Te(c),a=!0)},o(g){Ae(i.$$.fragment,g),Ae(c),a=!1},d(g){g&&H(e),We(i),~u&&p[u].d()}}}function vs(n,e,t){let l;return Be(n,Rt,i=>t(0,l=i)),[l]}class ws extends Ye{constructor(e){super(),Ge(this,e,vs,_s,Pe,{})}}new ws({target:document.getElementById("app")});
