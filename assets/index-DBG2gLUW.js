var vi=Object.defineProperty;var bi=(n,e,t)=>e in n?vi(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var vt=(n,e,t)=>bi(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const s of l)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(l){const s={};return l.integrity&&(s.integrity=l.integrity),l.referrerPolicy&&(s.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?s.credentials="include":l.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(l){if(l.ep)return;l.ep=!0;const s=t(l);fetch(l.href,s)}})();function fe(){}function Yn(n){return n()}function qt(){return Object.create(null)}function _e(n){n.forEach(Yn)}function Lt(n){return typeof n=="function"}function Be(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}let st;function Ht(n,e){return n===e?!0:(st||(st=document.createElement("a")),st.href=e,n===st.href)}function yi(n){return Object.keys(n).length===0}function Zn(n,...e){if(n==null){for(const i of e)i(void 0);return fe}const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Ae(n,e,t){n.$$.on_destroy.push(Zn(e,t))}function wi(n,e,t){return n.set(t),e}function r(n,e){n.appendChild(e)}function H(n,e,t){n.insertBefore(e,t||null)}function q(n){n.parentNode&&n.parentNode.removeChild(n)}function Me(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function m(n){return document.createElement(n)}function F(n){return document.createTextNode(n)}function k(){return F(" ")}function Xe(){return F("")}function Q(n,e,t,i){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t,i)}function Xn(n){return function(e){return e.preventDefault(),n.call(this,e)}}function xn(n){return function(e){return e.stopPropagation(),n.call(this,e)}}function h(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function $t(n,e,t){const i=new Set;for(let l=0;l<n.length;l+=1)n[l].checked&&i.add(n[l].__value);return t||i.delete(e),Array.from(i)}function ht(n){let e;return{p(...t){e=t,e.forEach(i=>n.push(i))},r(){e.forEach(t=>n.splice(n.indexOf(t),1))}}}function ki(n){return Array.from(n.childNodes)}function Y(n,e){e=""+e,n.data!==e&&(n.data=e)}function ie(n,e){n.value=e??""}function be(n,e,t,i){t==null?n.style.removeProperty(e):n.style.setProperty(e,t,"")}function ke(n,e,t){for(let i=0;i<n.options.length;i+=1){const l=n.options[i];if(l.__value===e){l.selected=!0;return}}(!t||e!==void 0)&&(n.selectedIndex=-1)}function Ue(n){const e=n.querySelector(":checked");return e&&e.__value}function me(n,e,t){n.classList.toggle(e,!!t)}let xe;function Ye(n){xe=n}function Ci(){if(!xe)throw new Error("Function called outside component initialization");return xe}function Si(n){Ci().$$.on_destroy.push(n)}function Vt(n,e){const t=n.$$.callbacks[e.type];t&&t.slice().forEach(i=>i.call(this,e))}const Fe=[],ct=[];let qe=[];const jt=[],Ei=Promise.resolve();let Et=!1;function Ti(){Et||(Et=!0,Ei.then(ei))}function Re(n){qe.push(n)}const bt=new Set;let Pe=0;function ei(){if(Pe!==0)return;const n=xe;do{try{for(;Pe<Fe.length;){const e=Fe[Pe];Pe++,Ye(e),Ri(e.$$)}}catch(e){throw Fe.length=0,Pe=0,e}for(Ye(null),Fe.length=0,Pe=0;ct.length;)ct.pop()();for(let e=0;e<qe.length;e+=1){const t=qe[e];bt.has(t)||(bt.add(t),t())}qe.length=0}while(Fe.length);for(;jt.length;)jt.pop()();Et=!1,bt.clear(),Ye(n)}function Ri(n){if(n.fragment!==null){n.update(),_e(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(Re)}}function Ii(n){const e=[],t=[];qe.forEach(i=>n.indexOf(i)===-1?e.push(i):t.push(i)),t.forEach(i=>i()),qe=e}const at=new Set;let Le;function Mi(){Le={r:0,c:[],p:Le}}function Ni(){Le.r||_e(Le.c),Le=Le.p}function Te(n,e){n&&n.i&&(at.delete(n),n.i(e))}function De(n,e,t,i){if(n&&n.o){if(at.has(n))return;at.add(n),Le.c.push(()=>{at.delete(n),i&&(t&&n.d(1),i())}),n.o(e)}else i&&i()}function de(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function He(n,e){n.d(1),e.delete(n.key)}function $e(n,e,t,i,l,s,o,u,c,a,d,p){let f=n.length,g=s.length,_=f;const v={};for(;_--;)v[n[_].key]=_;const S=[],b=new Map,E=new Map,R=[];for(_=g;_--;){const C=p(l,s,_),I=t(C);let N=o.get(I);N?R.push(()=>N.p(C,e)):(N=a(I,C),N.c()),b.set(I,S[_]=N),I in v&&E.set(I,Math.abs(_-v[I]))}const T=new Set,A=new Set;function M(C){Te(C,1),C.m(u,d),o.set(C.key,C),d=C.first,g--}for(;f&&g;){const C=S[g-1],I=n[f-1],N=C.key,O=I.key;C===I?(d=C.first,f--,g--):b.has(O)?!o.has(N)||T.has(N)?M(C):A.has(O)?f--:E.get(N)>E.get(O)?(A.add(N),M(C)):(T.add(O),f--):(c(I,o),f--)}for(;f--;){const C=n[f];b.has(C.key)||c(C,o)}for(;g;)M(S[g-1]);return _e(R),S}function tt(n){n&&n.c()}function Je(n,e,t){const{fragment:i,after_update:l}=n.$$;i&&i.m(e,t),Re(()=>{const s=n.$$.on_mount.map(Yn).filter(Lt);n.$$.on_destroy?n.$$.on_destroy.push(...s):_e(s),n.$$.on_mount=[]}),l.forEach(Re)}function Ke(n,e){const t=n.$$;t.fragment!==null&&(Ii(t.after_update),_e(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Li(n,e){n.$$.dirty[0]===-1&&(Fe.push(n),Ti(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function We(n,e,t,i,l,s,o=null,u=[-1]){const c=xe;Ye(n);const a=n.$$={fragment:null,ctx:[],props:s,update:fe,not_equal:l,bound:qt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:qt(),dirty:u,skip_bound:!1,root:e.target||c.$$.root};o&&o(a.root);let d=!1;if(a.ctx=t?t(n,e.props||{},(p,f,...g)=>{const _=g.length?g[0]:f;return a.ctx&&l(a.ctx[p],a.ctx[p]=_)&&(!a.skip_bound&&a.bound[p]&&a.bound[p](_),d&&Li(n,p)),f}):[],a.update(),d=!0,_e(a.before_update),a.fragment=i?i(a.ctx):!1,e.target){if(e.hydrate){const p=ki(e.target);a.fragment&&a.fragment.l(p),p.forEach(q)}else a.fragment&&a.fragment.c();e.intro&&Te(n.$$.fragment),Je(n,e.target,e.anchor),ei()}Ye(c)}class Ge{constructor(){vt(this,"$$");vt(this,"$$set")}$destroy(){Ke(this,1),this.$destroy=fe}$on(e,t){if(!Lt(t))return fe;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(t),()=>{const l=i.indexOf(t);l!==-1&&i.splice(l,1)}}$set(e){this.$$set&&!yi(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Di="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Di);const Oe=[];function Ai(n,e){return{subscribe:Dt(n,e).subscribe}}function Dt(n,e=fe){let t;const i=new Set;function l(u){if(Be(n,u)&&(n=u,t)){const c=!Oe.length;for(const a of i)a[1](),Oe.push(a,n);if(c){for(let a=0;a<Oe.length;a+=2)Oe[a][0](Oe[a+1]);Oe.length=0}}}function s(u){l(u(n))}function o(u,c=fe){const a=[u,c];return i.add(a),i.size===1&&(t=e(l,s)||fe),u(n),()=>{i.delete(a),i.size===0&&t&&(t(),t=null)}}return{set:l,update:s,subscribe:o}}function Bi(n,e,t){const i=!Array.isArray(n),l=i?[n]:n;if(!l.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const s=e.length<2;return Ai(t,(o,u)=>{let c=!1;const a=[];let d=0,p=fe;const f=()=>{if(d)return;p();const _=e(i?a[0]:a,o,u);s?o(_):p=Lt(_)?_:fe},g=l.map((_,v)=>Zn(_,S=>{a[v]=S,d&=~(1<<v),c&&f()},()=>{d|=1<<v}));return c=!0,f(),function(){_e(g),p(),c=!1}})}const zt=typeof window<"u",Qt="xc-timer-session";function Pi(){const n={id:crypto.randomUUID(),name:"New Session",teams:[],runners:[],times:[],unit:"km",created:Date.now(),updated:Date.now(),currentRace:""},{subscribe:e,set:t,update:i}=Dt(n);if(zt){const l=localStorage.getItem(Qt);if(l)try{const s=JSON.parse(l);s.teams||(s.teams=[]),s.currentRace||(s.currentRace=""),s.runners&&(s.runners=s.runners.map(o=>{if(o.age&&!o.grade){let u="Freshman";return o.age>=18?u="Senior":o.age>=17?u="Junior":o.age>=16&&(u="Sophomore"),{id:o.id,name:o.name,grade:u,teamId:o.teamId||""}}return{id:o.id,name:o.name,grade:o.grade||"Freshman",teamId:o.teamId||""}})),t(s)}catch(s){console.error("Failed to load session from storage:",s)}}return e(l=>{zt&&localStorage.setItem(Qt,JSON.stringify(l))}),{subscribe:e,set:t,update:i,addTeam:l=>{i(s=>({...s,teams:[...s.teams,{...l,id:crypto.randomUUID()}],updated:Date.now()}))},removeTeam:l=>{i(s=>({...s,teams:s.teams.filter(o=>o.id!==l),runners:s.runners.map(o=>o.teamId===l?{...o,teamId:""}:o),updated:Date.now()}))},addRunner:l=>{i(s=>({...s,runners:[...s.runners,{...l,id:crypto.randomUUID()}],updated:Date.now()}))},removeRunner:l=>{i(s=>({...s,runners:s.runners.filter(o=>o.id!==l),times:s.times.filter(o=>o.runnerId!==l),updated:Date.now()}))},addTime:(l,s)=>{i(o=>({...o,times:[...o.times.filter(u=>!(u.runnerId===l.runnerId&&u.checkpoint===l.checkpoint)),{...l,timestamp:Date.now(),raceName:s||o.currentRace}],updated:Date.now()}))},removeTime:(l,s)=>{i(o=>({...o,times:o.times.filter(u=>!(u.runnerId===l&&u.checkpoint===s)),updated:Date.now()}))},setUnit:l=>{i(s=>({...s,unit:l,updated:Date.now()}))},setCurrentRace:l=>{i(s=>({...s,currentRace:l,updated:Date.now()}))},importData:l=>{i(s=>({...s,...l,updated:Date.now()}))},reset:()=>{const l={...n,id:crypto.randomUUID(),created:Date.now(),updated:Date.now()};t(l)}}}const ve=Pi(),Tt=Dt("setup"),Oi=Bi(ve,n=>n.unit==="km"?["1K","2K","3K","4K","5K"]:["1M","2M","3M","3.1M"]);function Fi(n){let e,t,i,l,s,o,u,c,a,d;return{c(){e=m("nav"),t=m("button"),t.textContent="ðŸƒ Setup",i=k(),l=m("button"),l.textContent="â±ï¸ Timing",s=k(),o=m("button"),o.textContent="ðŸ“¤ Share",u=k(),c=m("button"),c.textContent="ðŸ“¥ Import",h(t,"class","nav-btn svelte-nms0ce"),me(t,"active",n[0]==="setup"),h(l,"class","nav-btn svelte-nms0ce"),me(l,"active",n[0]==="timing"),h(o,"class","nav-btn svelte-nms0ce"),me(o,"active",n[0]==="share"),h(c,"class","nav-btn svelte-nms0ce"),me(c,"active",n[0]==="import"),h(e,"class","nav svelte-nms0ce")},m(p,f){H(p,e,f),r(e,t),r(e,i),r(e,l),r(e,s),r(e,o),r(e,u),r(e,c),a||(d=[Q(t,"click",n[2]),Q(l,"click",n[3]),Q(o,"click",n[4]),Q(c,"click",n[5])],a=!0)},p(p,[f]){f&1&&me(t,"active",p[0]==="setup"),f&1&&me(l,"active",p[0]==="timing"),f&1&&me(o,"active",p[0]==="share"),f&1&&me(c,"active",p[0]==="import")},i:fe,o:fe,d(p){p&&q(e),a=!1,_e(d)}}}function Ui(n,e,t){let i;Ae(n,Tt,a=>t(0,i=a));function l(a){wi(Tt,i=a,i)}return[i,l,()=>l("setup"),()=>l("timing"),()=>l("share"),()=>l("import")]}class qi extends Ge{constructor(e){super(),We(this,e,Ui,Fi,Be,{})}}function Jt(n,e,t){const i=n.slice();i[36]=e[t];const l=i[20](i[36].id);return i[37]=l,i}function Kt(n,e,t){const i=n.slice();return i[40]=e[t],i}function Wt(n,e,t){const i=n.slice();return i[36]=e[t],i}function Gt(n,e,t){const i=n.slice();return i[36]=e[t],i}function Yt(n,e,t){const i=n.slice();return i[47]=e[t],i}function Zt(n){let e,t,i,l,s,o,u,c,a,d,p,f,g,_,v,S,b,E,R,T,A=de(n[11]),M=[];for(let C=0;C<A.length;C+=1)M[C]=Xt(Yt(n,A,C));return{c(){e=m("form"),t=m("div"),i=m("div"),l=m("label"),l.textContent="Team Name",s=k(),o=m("input"),u=k(),c=m("div"),a=m("label"),a.textContent="Team Color",d=k(),p=m("div"),f=m("input"),g=k(),_=m("div");for(let C=0;C<M.length;C+=1)M[C].c();v=k(),S=m("button"),b=F("Create Team"),h(l,"for","team-name"),h(l,"class","svelte-1r1d1yc"),h(o,"id","team-name"),h(o,"type","text"),h(o,"placeholder","e.g., Girls Team, Boys Team"),o.required=!0,h(o,"class","svelte-1r1d1yc"),h(i,"class","form-group svelte-1r1d1yc"),h(a,"for","team-color"),h(a,"class","svelte-1r1d1yc"),h(f,"id","team-color"),h(f,"type","color"),h(f,"class","color-input svelte-1r1d1yc"),h(_,"class","color-options svelte-1r1d1yc"),h(p,"class","color-picker svelte-1r1d1yc"),h(c,"class","form-group svelte-1r1d1yc"),h(t,"class","form-row svelte-1r1d1yc"),h(S,"type","submit"),h(S,"class","add-btn svelte-1r1d1yc"),S.disabled=E=!n[3].trim(),h(e,"class","team-form svelte-1r1d1yc")},m(C,I){H(C,e,I),r(e,t),r(t,i),r(i,l),r(i,s),r(i,o),ie(o,n[3]),r(t,u),r(t,c),r(c,a),r(c,d),r(c,p),r(p,f),ie(f,n[4]),r(p,g),r(p,_);for(let N=0;N<M.length;N+=1)M[N]&&M[N].m(_,null);r(e,v),r(e,S),r(S,b),R||(T=[Q(o,"input",n[27]),Q(o,"keydown",n[21]),Q(f,"input",n[28]),Q(e,"submit",Xn(n[12]))],R=!0)},p(C,I){if(I[0]&8&&o.value!==C[3]&&ie(o,C[3]),I[0]&16&&ie(f,C[4]),I[0]&2064){A=de(C[11]);let N;for(N=0;N<A.length;N+=1){const O=Yt(C,A,N);M[N]?M[N].p(O,I):(M[N]=Xt(O),M[N].c(),M[N].m(_,null))}for(;N<M.length;N+=1)M[N].d(1);M.length=A.length}I[0]&8&&E!==(E=!C[3].trim())&&(S.disabled=E)},d(C){C&&q(e),Me(M,C),R=!1,_e(T)}}}function Xt(n){let e,t,i;function l(){return n[29](n[47])}return{c(){e=m("button"),h(e,"type","button"),h(e,"class","color-option svelte-1r1d1yc"),be(e,"background-color",n[47]),me(e,"selected",n[4]===n[47])},m(s,o){H(s,e,o),t||(i=Q(e,"click",l),t=!0)},p(s,o){n=s,o[0]&2064&&me(e,"selected",n[4]===n[47])},d(s){s&&q(e),t=!1,i()}}}function xt(n,e){let t,i,l,s=e[36].name+"",o,u,c,a=e[20](e[36].id).length+"",d,p,f,g,_,v;function S(){return e[30](e[36])}return{key:n,first:null,c(){t=m("div"),i=m("div"),l=m("div"),o=F(s),u=k(),c=m("div"),d=F(a),p=F(" runners"),f=k(),g=m("button"),g.textContent="âœ•",h(l,"class","team-name svelte-1r1d1yc"),h(c,"class","team-stats svelte-1r1d1yc"),h(i,"class","team-info svelte-1r1d1yc"),h(g,"class","remove-btn svelte-1r1d1yc"),h(g,"title","Remove team"),h(t,"class","team-card svelte-1r1d1yc"),be(t,"border-left","4px solid "+e[36].color),this.first=t},m(b,E){H(b,t,E),r(t,i),r(i,l),r(l,o),r(i,u),r(i,c),r(c,d),r(c,p),r(t,f),r(t,g),_||(v=Q(g,"click",S),_=!0)},p(b,E){e=b,E[0]&1024&&s!==(s=e[36].name+"")&&Y(o,s),E[0]&1024&&a!==(a=e[20](e[36].id).length+"")&&Y(d,a),E[0]&1024&&be(t,"border-left","4px solid "+e[36].color)},d(b){b&&q(t),_=!1,v()}}}function en(n){let e;return{c(){e=m("div"),e.textContent="No teams created yet. Create a team to start adding runners!",h(e,"class","empty-state svelte-1r1d1yc")},m(t,i){H(t,e,i)},d(t){t&&q(e)}}}function Hi(n){let e,t,i,l,s,o,u,c,a,d,p,f,g,_,v,S,b,E,R,T,A,M,C,I,N,O,V,w=de(n[10].teams),y=[];for(let D=0;D<w.length;D+=1)y[D]=tn(Wt(n,w,D));return{c(){e=m("form"),t=m("div"),i=m("label"),i.textContent="Team",l=k(),s=m("select"),o=m("option"),o.textContent="Select a team";for(let D=0;D<y.length;D+=1)y[D].c();u=k(),c=m("div"),a=m("div"),d=m("label"),d.textContent="Runner Name",p=k(),f=m("input"),g=k(),_=m("div"),v=m("label"),v.textContent="Grade",S=k(),b=m("select"),E=m("option"),E.textContent="Freshman",R=m("option"),R.textContent="Sophomore",T=m("option"),T.textContent="Junior",A=m("option"),A.textContent="Senior",M=k(),C=m("button"),I=F("Add Runner"),h(i,"for","team-select"),h(i,"class","svelte-1r1d1yc"),o.__value="",ie(o,o.__value),h(s,"id","team-select"),s.required=!0,h(s,"class","svelte-1r1d1yc"),n[2]===void 0&&Re(()=>n[31].call(s)),h(t,"class","form-group svelte-1r1d1yc"),h(d,"for","name"),h(d,"class","svelte-1r1d1yc"),h(f,"id","name"),h(f,"type","text"),h(f,"placeholder","Enter runner name"),f.required=!0,h(f,"class","svelte-1r1d1yc"),h(a,"class","form-group svelte-1r1d1yc"),h(v,"for","grade"),h(v,"class","svelte-1r1d1yc"),E.__value="Freshman",ie(E,E.__value),R.__value="Sophomore",ie(R,R.__value),T.__value="Junior",ie(T,T.__value),A.__value="Senior",ie(A,A.__value),h(b,"id","grade"),b.required=!0,h(b,"class","svelte-1r1d1yc"),n[1]===void 0&&Re(()=>n[33].call(b)),h(_,"class","form-group svelte-1r1d1yc"),h(c,"class","form-row svelte-1r1d1yc"),h(C,"type","submit"),h(C,"class","add-btn svelte-1r1d1yc"),C.disabled=N=!n[0].trim()||!n[2],h(e,"class","add-runner-form svelte-1r1d1yc")},m(D,W){H(D,e,W),r(e,t),r(t,i),r(t,l),r(t,s),r(s,o);for(let j=0;j<y.length;j+=1)y[j]&&y[j].m(s,null);ke(s,n[2],!0),r(e,u),r(e,c),r(c,a),r(a,d),r(a,p),r(a,f),ie(f,n[0]),r(c,g),r(c,_),r(_,v),r(_,S),r(_,b),r(b,E),r(b,R),r(b,T),r(b,A),ke(b,n[1],!0),r(e,M),r(e,C),r(C,I),O||(V=[Q(s,"change",n[31]),Q(f,"input",n[32]),Q(f,"keydown",n[21]),Q(b,"change",n[33]),Q(e,"submit",Xn(n[16]))],O=!0)},p(D,W){if(W[0]&1024){w=de(D[10].teams);let j;for(j=0;j<w.length;j+=1){const G=Wt(D,w,j);y[j]?y[j].p(G,W):(y[j]=tn(G),y[j].c(),y[j].m(s,null))}for(;j<y.length;j+=1)y[j].d(1);y.length=w.length}W[0]&1028&&ke(s,D[2]),W[0]&1&&f.value!==D[0]&&ie(f,D[0]),W[0]&2&&ke(b,D[1]),W[0]&1029&&N!==(N=!D[0].trim()||!D[2])&&(C.disabled=N)},d(D){D&&q(e),Me(y,D),O=!1,_e(V)}}}function $i(n){let e;return{c(){e=m("div"),e.textContent="Please create at least one team before adding runners.",h(e,"class","no-teams-message svelte-1r1d1yc")},m(t,i){H(t,e,i)},p:fe,d(t){t&&q(e)}}}function tn(n){let e,t=n[36].name+"",i,l;return{c(){e=m("option"),i=F(t),e.__value=l=n[36].id,ie(e,e.__value)},m(s,o){H(s,e,o),r(e,i)},p(s,o){o[0]&1024&&t!==(t=s[36].name+"")&&Y(i,t),o[0]&1024&&l!==(l=s[36].id)&&(e.__value=l,ie(e,e.__value))},d(s){s&&q(e)}}}function nn(n){let e,t,i=n[36].name+"",l,s,o=n[37].length+"",u,c,a,d,p=[],f=new Map,g=de(n[37]);const _=v=>v[40].id;for(let v=0;v<g.length;v+=1){let S=Kt(n,g,v),b=_(S);f.set(b,p[v]=ln(b,S))}return{c(){e=m("div"),t=m("h4"),l=F(i),s=F(" ("),u=F(o),c=F(")"),a=k(),d=m("div");for(let v=0;v<p.length;v+=1)p[v].c();be(t,"color",n[36].color),h(t,"class","svelte-1r1d1yc"),h(d,"class","runners-grid svelte-1r1d1yc"),h(e,"class","team-runners-section svelte-1r1d1yc")},m(v,S){H(v,e,S),r(e,t),r(t,l),r(t,s),r(t,u),r(t,c),r(e,a),r(e,d);for(let b=0;b<p.length;b+=1)p[b]&&p[b].m(d,null)},p(v,S){S[0]&1024&&i!==(i=v[36].name+"")&&Y(l,i),S[0]&1024&&o!==(o=v[37].length+"")&&Y(u,o),S[0]&1024&&be(t,"color",v[36].color),S[0]&1180672&&(g=de(v[37]),p=$e(p,S,_,1,v,g,f,d,He,ln,null,Kt))},d(v){v&&q(e);for(let S=0;S<p.length;S+=1)p[S].d()}}}function ln(n,e){let t,i,l,s=e[40].name+"",o,u,c,a=e[40].grade+"",d,p,f,g,_;function v(){return e[34](e[40])}return{key:n,first:null,c(){t=m("div"),i=m("div"),l=m("div"),o=F(s),u=k(),c=m("div"),d=F(a),p=k(),f=m("button"),f.textContent="âœ•",h(l,"class","runner-name svelte-1r1d1yc"),h(c,"class","runner-details svelte-1r1d1yc"),h(i,"class","runner-info svelte-1r1d1yc"),h(f,"class","remove-btn svelte-1r1d1yc"),h(f,"title","Remove runner"),h(t,"class","runner-card svelte-1r1d1yc"),be(t,"border-left","4px solid "+e[36].color),this.first=t},m(S,b){H(S,t,b),r(t,i),r(i,l),r(l,o),r(i,u),r(i,c),r(c,d),r(t,p),r(t,f),g||(_=Q(f,"click",v),g=!0)},p(S,b){e=S,b[0]&1024&&s!==(s=e[40].name+"")&&Y(o,s),b[0]&1024&&a!==(a=e[40].grade+"")&&Y(d,a),b[0]&1024&&be(t,"border-left","4px solid "+e[36].color)},d(S){S&&q(t),g=!1,_()}}}function sn(n,e){let t,i,l=e[37].length>0&&nn(e);return{key:n,first:null,c(){t=Xe(),l&&l.c(),i=Xe(),this.first=t},m(s,o){H(s,t,o),l&&l.m(s,o),H(s,i,o)},p(s,o){e=s,e[37].length>0?l?l.p(e,o):(l=nn(e),l.c(),l.m(i.parentNode,i)):l&&(l.d(1),l=null)},d(s){s&&(q(t),q(i)),l&&l.d(s)}}}function on(n){let e;return{c(){e=m("div"),e.textContent="No runners added yet. Add some runners to get started!",h(e,"class","empty-state svelte-1r1d1yc")},m(t,i){H(t,e,i)},d(t){t&&q(e)}}}function rn(n){let e,t,i,l,s,o,u,c,a=n[9].name+"",d,p,f,g,_,v,S,b,E,R;function T(C,I){return C[9].runnerCount>0?ji:Vi}let A=T(n),M=A(n);return{c(){e=m("div"),t=m("div"),i=m("div"),i.innerHTML='<h3 class="svelte-1r1d1yc">Remove Team</h3>',l=k(),s=m("div"),o=m("p"),u=F("Are you sure you'd like to remove the team "),c=m("strong"),d=F(a),p=F("?"),f=k(),M.c(),g=k(),_=m("div"),v=m("button"),v.textContent="Cancel",S=k(),b=m("button"),b.textContent="Remove Team",h(i,"class","dialog-header svelte-1r1d1yc"),h(o,"class","svelte-1r1d1yc"),h(s,"class","dialog-content svelte-1r1d1yc"),h(v,"class","dialog-btn cancel-btn svelte-1r1d1yc"),h(b,"class","dialog-btn confirm-btn svelte-1r1d1yc"),h(_,"class","dialog-actions svelte-1r1d1yc"),h(t,"class","confirmation-dialog svelte-1r1d1yc"),h(e,"class","modal-overlay svelte-1r1d1yc")},m(C,I){H(C,e,I),r(e,t),r(t,i),r(t,l),r(t,s),r(s,o),r(o,u),r(o,c),r(c,d),r(o,p),r(s,f),M.m(s,null),r(t,g),r(t,_),r(_,v),r(_,S),r(_,b),E||(R=[Q(v,"click",n[15]),Q(b,"click",n[14]),Q(t,"click",xn(n[23])),Q(e,"click",n[15])],E=!0)},p(C,I){I[0]&512&&a!==(a=C[9].name+"")&&Y(d,a),A===(A=T(C))&&M?M.p(C,I):(M.d(1),M=A(C),M&&(M.c(),M.m(s,null)))},d(C){C&&q(e),M.d(),E=!1,_e(R)}}}function Vi(n){let e;return{c(){e=m("p"),e.textContent="This team has no runners, so no additional data will be removed.",h(e,"class","info-text svelte-1r1d1yc")},m(t,i){H(t,e,i)},p:fe,d(t){t&&q(e)}}}function ji(n){let e,t,i=n[9].runnerCount+"",l,s,o=n[9].runnerCount===1?"":"s",u,c;return{c(){e=m("p"),t=F("This will remove "),l=F(i),s=F(" runner"),u=F(o),c=F(" and all their recorded times."),h(e,"class","warning-text svelte-1r1d1yc")},m(a,d){H(a,e,d),r(e,t),r(e,l),r(e,s),r(e,u),r(e,c)},p(a,d){d[0]&512&&i!==(i=a[9].runnerCount+"")&&Y(l,i),d[0]&512&&o!==(o=a[9].runnerCount===1?"":"s")&&Y(u,o)},d(a){a&&q(e)}}}function an(n){let e,t,i,l,s,o,u,c,a=n[7].name+"",d,p,f,g=n[7].teamName+"",_,v,S,b,E,R,T,A,M,C,I;return{c(){e=m("div"),t=m("div"),i=m("div"),i.innerHTML='<h3 class="svelte-1r1d1yc">Remove Runner</h3>',l=k(),s=m("div"),o=m("p"),u=F("Are you sure you'd like to remove "),c=m("strong"),d=F(a),p=F(" from "),f=m("strong"),_=F(g),v=F("?"),S=k(),b=m("p"),b.textContent="This will also remove all recorded times for this runner.",E=k(),R=m("div"),T=m("button"),T.textContent="Cancel",A=k(),M=m("button"),M.textContent="Remove Runner",h(i,"class","dialog-header svelte-1r1d1yc"),h(o,"class","svelte-1r1d1yc"),h(b,"class","warning-text svelte-1r1d1yc"),h(s,"class","dialog-content svelte-1r1d1yc"),h(T,"class","dialog-btn cancel-btn svelte-1r1d1yc"),h(M,"class","dialog-btn confirm-btn svelte-1r1d1yc"),h(R,"class","dialog-actions svelte-1r1d1yc"),h(t,"class","confirmation-dialog svelte-1r1d1yc"),h(e,"class","modal-overlay svelte-1r1d1yc")},m(N,O){H(N,e,O),r(e,t),r(t,i),r(t,l),r(t,s),r(s,o),r(o,u),r(o,c),r(c,d),r(o,p),r(o,f),r(f,_),r(o,v),r(s,S),r(s,b),r(t,E),r(t,R),r(R,T),r(R,A),r(R,M),C||(I=[Q(T,"click",n[19]),Q(M,"click",n[18]),Q(t,"click",xn(n[22])),Q(e,"click",n[19])],C=!0)},p(N,O){O[0]&128&&a!==(a=N[7].name+"")&&Y(d,a),O[0]&128&&g!==(g=N[7].teamName+"")&&Y(_,g)},d(N){N&&q(e),C=!1,_e(I)}}}function zi(n){let e,t,i,l,s,o,u,c,a,d,p,f,g,_=n[10].teams.length+"",v,S,b,E,R=n[5]?"Cancel":"+ Add Team",T,A,M,C,I=[],N=new Map,O,V,w,y,D,W,j,G=[],ce=new Map,x,le,J,ge,K,Z,se=n[5]&&Zt(n),ue=de(n[10].teams);const re=B=>B[36].id;for(let B=0;B<ue.length;B+=1){let P=Gt(n,ue,B),he=re(P);N.set(he,I[B]=xt(he,P))}let ee=n[10].teams.length===0&&en();function L(B,P){return B[10].teams.length===0?$i:Hi}let $=L(n),z=$(n),te=de(n[10].teams);const pe=B=>B[36].id;for(let B=0;B<te.length;B+=1){let P=Jt(n,te,B),he=pe(P);ce.set(he,G[B]=sn(he,P))}let ae=n[10].runners.length===0&&n[10].teams.length>0&&on(),X=n[8]&&n[9]&&rn(n),U=n[6]&&n[7]&&an(n);return{c(){e=m("div"),t=m("div"),i=m("h2"),i.textContent="Runner Setup",l=k(),s=m("div"),o=m("button"),o.textContent="Kilometers",u=k(),c=m("button"),c.textContent="Miles",a=k(),d=m("div"),p=m("div"),f=m("h3"),g=F("Teams ("),v=F(_),S=F(")"),b=k(),E=m("button"),T=F(R),A=k(),se&&se.c(),M=k(),C=m("div");for(let B=0;B<I.length;B+=1)I[B].c();O=k(),ee&&ee.c(),V=k(),w=m("div"),y=m("h3"),y.textContent="Add Runner",D=k(),z.c(),W=k(),j=m("div");for(let B=0;B<G.length;B+=1)G[B].c();x=k(),ae&&ae.c(),le=k(),X&&X.c(),J=k(),U&&U.c(),ge=Xe(),h(i,"class","svelte-1r1d1yc"),h(o,"class","unit-btn svelte-1r1d1yc"),me(o,"active",n[10].unit==="km"),h(c,"class","unit-btn svelte-1r1d1yc"),me(c,"active",n[10].unit==="miles"),h(s,"class","unit-toggle svelte-1r1d1yc"),h(t,"class","header svelte-1r1d1yc"),h(f,"class","svelte-1r1d1yc"),h(E,"class","add-team-btn svelte-1r1d1yc"),me(E,"active",n[5]),h(p,"class","section-header svelte-1r1d1yc"),h(C,"class","teams-list svelte-1r1d1yc"),h(d,"class","teams-section svelte-1r1d1yc"),h(y,"class","svelte-1r1d1yc"),h(w,"class","runners-section svelte-1r1d1yc"),h(j,"class","runners-by-team svelte-1r1d1yc"),h(e,"class","setup-container svelte-1r1d1yc")},m(B,P){H(B,e,P),r(e,t),r(t,i),r(t,l),r(t,s),r(s,o),r(s,u),r(s,c),r(e,a),r(e,d),r(d,p),r(p,f),r(f,g),r(f,v),r(f,S),r(p,b),r(p,E),r(E,T),r(d,A),se&&se.m(d,null),r(d,M),r(d,C);for(let he=0;he<I.length;he+=1)I[he]&&I[he].m(C,null);r(C,O),ee&&ee.m(C,null),r(e,V),r(e,w),r(w,y),r(w,D),z.m(w,null),r(e,W),r(e,j);for(let he=0;he<G.length;he+=1)G[he]&&G[he].m(j,null);r(j,x),ae&&ae.m(j,null),H(B,le,P),X&&X.m(B,P),H(B,J,P),U&&U.m(B,P),H(B,ge,P),K||(Z=[Q(window,"keydown",n[21]),Q(o,"click",n[24]),Q(c,"click",n[25]),Q(E,"click",n[26])],K=!0)},p(B,P){P[0]&1024&&me(o,"active",B[10].unit==="km"),P[0]&1024&&me(c,"active",B[10].unit==="miles"),P[0]&1024&&_!==(_=B[10].teams.length+"")&&Y(v,_),P[0]&32&&R!==(R=B[5]?"Cancel":"+ Add Team")&&Y(T,R),P[0]&32&&me(E,"active",B[5]),B[5]?se?se.p(B,P):(se=Zt(B),se.c(),se.m(d,M)):se&&(se.d(1),se=null),P[0]&1057792&&(ue=de(B[10].teams),I=$e(I,P,re,1,B,ue,N,C,He,xt,O,Gt)),B[10].teams.length===0?ee||(ee=en(),ee.c(),ee.m(C,null)):ee&&(ee.d(1),ee=null),$===($=L(B))&&z?z.p(B,P):(z.d(1),z=$(B),z&&(z.c(),z.m(w,null))),P[0]&1180672&&(te=de(B[10].teams),G=$e(G,P,pe,1,B,te,ce,j,He,sn,x,Jt)),B[10].runners.length===0&&B[10].teams.length>0?ae||(ae=on(),ae.c(),ae.m(j,null)):ae&&(ae.d(1),ae=null),B[8]&&B[9]?X?X.p(B,P):(X=rn(B),X.c(),X.m(J.parentNode,J)):X&&(X.d(1),X=null),B[6]&&B[7]?U?U.p(B,P):(U=an(B),U.c(),U.m(ge.parentNode,ge)):U&&(U.d(1),U=null)},i:fe,o:fe,d(B){B&&(q(e),q(le),q(J),q(ge)),se&&se.d();for(let P=0;P<I.length;P+=1)I[P].d();ee&&ee.d(),z.d();for(let P=0;P<G.length;P+=1)G[P].d();ae&&ae.d(),X&&X.d(B),U&&U.d(B),K=!1,_e(Z)}}}function Qi(n,e,t){let i;Ae(n,ve,K=>t(10,i=K));let l="",s="Freshman",o="",u="",c="#22c55e",a=!1,d=!1,p=null,f=!1,g=null;const _=["#22c55e","#3b82f6","#f97316","#ef4444","#8b5cf6","#06b6d4","#f59e0b","#10b981"];function v(){u.trim()&&(ve.addTeam({name:u.trim(),color:c}),t(3,u=""),t(4,c="#22c55e"),t(5,a=!1))}function S(K){const Z=i.teams.find(ue=>ue.id===K),se=I(K).length;Z&&(t(9,g={id:Z.id,name:Z.name,runnerCount:se}),t(8,f=!0))}function b(){g&&(ve.removeTeam(g.id),E())}function E(){t(9,g=null),t(8,f=!1)}function R(){!l.trim()||!o||(ve.addRunner({name:l.trim(),grade:s,teamId:o}),t(0,l=""),t(1,s="Freshman"))}function T(K){const Z=i.runners.find(ue=>ue.id===K),se=Z?C(Z.teamId):null;Z&&se&&(t(7,p={id:Z.id,name:Z.name,teamName:se.name}),t(6,d=!0))}function A(){p&&(ve.removeRunner(p.id),M())}function M(){t(7,p=null),t(6,d=!1)}function C(K){return i.teams.find(Z=>Z.id===K)}function I(K){return i.runners.filter(Z=>Z.teamId===K)}function N(K){K.key==="Enter"&&(a&&u.trim()?v():!a&&l.trim()&&o&&R()),K.key==="Escape"&&(d?M():f&&E())}function O(K){Vt.call(this,n,K)}function V(K){Vt.call(this,n,K)}const w=()=>ve.setUnit("km"),y=()=>ve.setUnit("miles"),D=()=>t(5,a=!a);function W(){u=this.value,t(3,u)}function j(){c=this.value,t(4,c)}const G=K=>t(4,c=K),ce=K=>S(K.id);function x(){o=Ue(this),t(2,o)}function le(){l=this.value,t(0,l)}function J(){s=Ue(this),t(1,s)}return[l,s,o,u,c,a,d,p,f,g,i,_,v,S,b,E,R,T,A,M,I,N,O,V,w,y,D,W,j,G,ce,x,le,J,K=>T(K.id)]}class Ji extends Ge{constructor(e){super(),We(this,e,Qi,zi,Be,{},null,[-1,-1])}}function cn(n,e,t){const i=n.slice();i[25]=e[t];const l=i[14](i[25].teamId);return i[26]=l,i}function un(n,e,t){const i=n.slice();i[25]=e[t];const l=i[14](i[25].teamId);return i[26]=l,i}function dn(n,e,t){const i=n.slice();return i[31]=e[t],i}function fn(n,e,t){const i=n.slice();return i[26]=e[t],i}function hn(n){let e;return{c(){e=m("div"),e.textContent="Enter a race name to begin timing",h(e,"class","input-hint svelte-1bc13oq")},m(t,i){H(t,e,i)},d(t){t&&q(e)}}}function Ki(n){let e,t,i;return{c(){e=m("button"),e.textContent="â¸ï¸ Stop Timer",h(e,"class","timer-btn stop-btn svelte-1bc13oq")},m(l,s){H(l,e,s),t||(i=Q(e,"click",n[10]),t=!0)},p:fe,d(l){l&&q(e),t=!1,i()}}}function Wi(n){let e,t,i,l,s;return{c(){e=m("button"),t=F("â–¶ï¸ Start Timer"),h(e,"class","timer-btn start-btn svelte-1bc13oq"),e.disabled=i=n[0].length===0||!n[1]||!n[2].trim()},m(o,u){H(o,e,u),r(e,t),l||(s=Q(e,"click",n[9]),l=!0)},p(o,u){u[0]&263&&i!==(i=o[0].length===0||!o[1]||!o[2].trim())&&(e.disabled=i)},d(o){o&&q(e),l=!1,s()}}}function mn(n,e){let t,i,l,s,o,u,c=e[26].name+"",a,d,p,f;function g(){return e[18](e[26])}return{key:n,first:null,c(){t=m("label"),i=m("input"),o=k(),u=m("span"),a=F(c),d=k(),h(i,"type","checkbox"),i.value=l=e[26].id,i.checked=s=e[0].includes(e[26].id),i.disabled=e[4],h(i,"class","svelte-1bc13oq"),h(u,"class","checkbox-label svelte-1bc13oq"),be(u,"color",e[26].color),h(t,"class","team-checkbox svelte-1bc13oq"),this.first=t},m(_,v){H(_,t,v),r(t,i),r(t,o),r(t,u),r(u,a),r(t,d),p||(f=Q(i,"change",g),p=!0)},p(_,v){e=_,v[0]&8&&l!==(l=e[26].id)&&(i.value=l),v[0]&9&&s!==(s=e[0].includes(e[26].id))&&(i.checked=s),v[0]&16&&(i.disabled=e[4]),v[0]&8&&c!==(c=e[26].name+"")&&Y(a,c),v[0]&8&&be(u,"color",e[26].color)},d(_){_&&q(t),p=!1,f()}}}function gn(n){let e;return{c(){e=m("div"),e.textContent="Select at least one team",h(e,"class","selection-hint svelte-1bc13oq")},m(t,i){H(t,e,i)},d(t){t&&q(e)}}}function pn(n){let e,t=n[31]+"",i,l;return{c(){e=m("option"),i=F(t),e.__value=l=n[31],ie(e,e.__value)},m(s,o){H(s,e,o),r(e,i)},p(s,o){o[0]&256&&t!==(t=s[31]+"")&&Y(i,t),o[0]&256&&l!==(l=s[31])&&(e.__value=l,ie(e,e.__value))},d(s){s&&q(e)}}}function _n(n){let e;return{c(){e=m("div"),e.textContent="Select a checkpoint",h(e,"class","selection-hint svelte-1bc13oq")},m(t,i){H(t,e,i)},d(t){t&&q(e)}}}function Gi(n){let e,t,i,l,s;function o(a,d){if(a[3].teams.length===0)return Xi;if(a[3].runners.length===0)return Zi}let u=o(n),c=u&&u(n);return{c(){e=m("div"),t=m("h3"),t.textContent="Setup Required",i=k(),l=m("p"),l.textContent="Please enter a race name, select team(s), and choose a checkpoint to begin timing.",s=k(),c&&c.c(),h(t,"class","svelte-1bc13oq"),h(e,"class","setup-message svelte-1bc13oq")},m(a,d){H(a,e,d),r(e,t),r(e,i),r(e,l),r(e,s),c&&c.m(e,null)},p(a,d){u!==(u=o(a))&&(c&&c.d(1),c=u&&u(a),c&&(c.c(),c.m(e,null)))},d(a){a&&q(e),c&&c.d()}}}function Yi(n){let e,t,i,l,s,o,u,c,a=n[15]()+"",d,p,f,g,_,v,S=n[6].length+"",b,E,R=n[7].length+"",T,A,M,C,I,N,O=n[4]&&n[6].length>0&&vn(n),V=n[7].length>0&&yn(n),w=!n[4]&&n[6].length===0&&n[7].length===0&&kn(n);return{c(){e=m("div"),t=m("div"),i=m("strong"),i.textContent="Race:",l=k(),s=F(n[2]),o=F(" â€¢ "),u=m("strong"),u.textContent="Timing:",c=k(),d=F(a),p=F(" at "),f=F(n[1]),g=k(),_=m("span"),v=F("("),b=F(S),E=F(" pending, "),T=F(R),A=F(" completed)"),M=k(),O&&O.c(),C=k(),V&&V.c(),I=k(),w&&w.c(),N=Xe(),h(_,"class","runner-count svelte-1bc13oq"),h(t,"class","timing-summary svelte-1bc13oq"),h(e,"class","timing-info svelte-1bc13oq")},m(y,D){H(y,e,D),r(e,t),r(t,i),r(t,l),r(t,s),r(t,o),r(t,u),r(t,c),r(t,d),r(t,p),r(t,f),r(t,g),r(t,_),r(_,v),r(_,b),r(_,E),r(_,T),r(_,A),H(y,M,D),O&&O.m(y,D),H(y,C,D),V&&V.m(y,D),H(y,I,D),w&&w.m(y,D),H(y,N,D)},p(y,D){D[0]&4&&Y(s,y[2]),D[0]&2&&Y(f,y[1]),D[0]&64&&S!==(S=y[6].length+"")&&Y(b,S),D[0]&128&&R!==(R=y[7].length+"")&&Y(T,R),y[4]&&y[6].length>0?O?O.p(y,D):(O=vn(y),O.c(),O.m(C.parentNode,C)):O&&(O.d(1),O=null),y[7].length>0?V?V.p(y,D):(V=yn(y),V.c(),V.m(I.parentNode,I)):V&&(V.d(1),V=null),!y[4]&&y[6].length===0&&y[7].length===0?w?w.p(y,D):(w=kn(y),w.c(),w.m(N.parentNode,N)):w&&(w.d(1),w=null)},d(y){y&&(q(e),q(M),q(C),q(I),q(N)),O&&O.d(y),V&&V.d(y),w&&w.d(y)}}}function Zi(n){let e;return{c(){e=m("p"),e.textContent="âš ï¸ No runners added yet. Go to Setup to add runners to your teams.",h(e,"class","warning svelte-1bc13oq")},m(t,i){H(t,e,i)},d(t){t&&q(e)}}}function Xi(n){let e;return{c(){e=m("p"),e.textContent="âš ï¸ No teams created yet. Go to Setup to create teams and add runners.",h(e,"class","warning svelte-1bc13oq")},m(t,i){H(t,e,i)},d(t){t&&q(e)}}}function vn(n){let e,t,i,l,s=[],o=new Map,u=de(n[6]);const c=a=>a[25].id;for(let a=0;a<u.length;a+=1){let d=un(n,u,a),p=c(d);o.set(p,s[a]=bn(p,d))}return{c(){e=m("div"),t=m("h3"),t.textContent="Tap to Record Time",i=k(),l=m("div");for(let a=0;a<s.length;a+=1)s[a].c();h(t,"class","svelte-1bc13oq"),h(l,"class","available-runners svelte-1bc13oq"),h(e,"class","runners-timing-list svelte-1bc13oq")},m(a,d){H(a,e,d),r(e,t),r(e,i),r(e,l);for(let p=0;p<s.length;p+=1)s[p]&&s[p].m(l,null)},p(a,d){d[0]&24672&&(u=de(a[6]),s=$e(s,d,c,1,a,u,o,l,He,bn,null,un))},d(a){a&&q(e);for(let d=0;d<s.length;d+=1)s[d].d()}}}function bn(n,e){var M;let t,i,l,s=e[25].name+"",o,u,c,a=e[25].grade+"",d,p,f=((M=e[26])==null?void 0:M.name)+"",g,_,v,S=ut(e[5])+"",b,E,R,T;function A(){return e[20](e[25])}return{key:n,first:null,c(){var C;t=m("div"),i=m("div"),l=m("div"),o=F(s),u=k(),c=m("div"),d=F(a),p=F(" â€¢ "),g=F(f),_=k(),v=m("button"),b=F(S),E=k(),h(l,"class","runner-name svelte-1bc13oq"),h(c,"class","runner-details svelte-1bc13oq"),h(i,"class","runner-info svelte-1bc13oq"),h(v,"class","time-btn svelte-1bc13oq"),h(t,"class","runner-timing-row svelte-1bc13oq"),be(t,"border-left","4px solid "+(((C=e[26])==null?void 0:C.color)||"#6b7280")),this.first=t},m(C,I){H(C,t,I),r(t,i),r(i,l),r(l,o),r(i,u),r(i,c),r(c,d),r(c,p),r(c,g),r(t,_),r(t,v),r(v,b),r(t,E),R||(T=Q(v,"click",A),R=!0)},p(C,I){var N,O;e=C,I[0]&64&&s!==(s=e[25].name+"")&&Y(o,s),I[0]&64&&a!==(a=e[25].grade+"")&&Y(d,a),I[0]&64&&f!==(f=((N=e[26])==null?void 0:N.name)+"")&&Y(g,f),I[0]&32&&S!==(S=ut(e[5])+"")&&Y(b,S),I[0]&64&&be(t,"border-left","4px solid "+(((O=e[26])==null?void 0:O.color)||"#6b7280"))},d(C){C&&q(t),R=!1,T()}}}function yn(n){let e,t,i,l,s,o,u,c,a,d=[],p=new Map,f,g,_=de(n[7]);const v=S=>S[25].id;for(let S=0;S<_.length;S+=1){let b=cn(n,_,S),E=v(b);p.set(E,d[S]=wn(E,b))}return{c(){e=m("div"),t=m("div"),i=m("h3"),i.textContent="Recorded Times",l=k(),s=m("button"),o=F("ðŸ—‘ï¸ Reset Times"),c=k(),a=m("div");for(let S=0;S<d.length;S+=1)d[S].c();h(i,"class","svelte-1bc13oq"),h(s,"class","reset-checkpoint-btn svelte-1bc13oq"),h(s,"title",u="Clear all times for "+n[15]()+" at "+n[1]),h(t,"class","completed-header svelte-1bc13oq"),h(a,"class","completed-list svelte-1bc13oq"),h(e,"class","completed-runners svelte-1bc13oq")},m(S,b){H(S,e,b),r(e,t),r(t,i),r(t,l),r(t,s),r(s,o),r(e,c),r(e,a);for(let E=0;E<d.length;E+=1)d[E]&&d[E].m(a,null);f||(g=Q(s,"click",n[11]),f=!0)},p(S,b){b[0]&258&&u!==(u="Clear all times for "+S[15]()+" at "+S[1])&&h(s,"title",u),b[0]&20608&&(_=de(S[7]),d=$e(d,b,v,1,S,_,p,a,He,wn,null,cn))},d(S){S&&q(e);for(let b=0;b<d.length;b+=1)d[b].d();f=!1,g()}}}function wn(n,e){var V;let t,i,l,s=e[25].name+"",o,u,c,a=e[25].grade+"",d,p,f=((V=e[26])==null?void 0:V.name)+"",g,_,v,S,b=e[25].recordedTime+"",E,R,T,A,M,C,I,N;function O(){return e[21](e[25])}return{key:n,first:null,c(){var w;t=m("div"),i=m("div"),l=m("div"),o=F(s),u=k(),c=m("div"),d=F(a),p=F(" â€¢ "),g=F(f),_=k(),v=m("div"),S=m("div"),E=F(b),R=k(),T=m("button"),A=F("â†©ï¸"),C=k(),h(l,"class","runner-name svelte-1bc13oq"),h(c,"class","runner-details svelte-1bc13oq"),h(i,"class","runner-info svelte-1bc13oq"),h(S,"class","recorded-time svelte-1bc13oq"),h(T,"class","unset-btn svelte-1bc13oq"),h(T,"title",M="Remove time and return "+e[25].name+" to active timing"),h(v,"class","time-actions svelte-1bc13oq"),h(t,"class","completed-runner-row svelte-1bc13oq"),be(t,"border-left","4px solid "+(((w=e[26])==null?void 0:w.color)||"#6b7280")),this.first=t},m(w,y){H(w,t,y),r(t,i),r(i,l),r(l,o),r(i,u),r(i,c),r(c,d),r(c,p),r(c,g),r(t,_),r(t,v),r(v,S),r(S,E),r(v,R),r(v,T),r(T,A),r(t,C),I||(N=Q(T,"click",O),I=!0)},p(w,y){var D,W;e=w,y[0]&128&&s!==(s=e[25].name+"")&&Y(o,s),y[0]&128&&a!==(a=e[25].grade+"")&&Y(d,a),y[0]&128&&f!==(f=((D=e[26])==null?void 0:D.name)+"")&&Y(g,f),y[0]&128&&b!==(b=e[25].recordedTime+"")&&Y(E,b),y[0]&128&&M!==(M="Remove time and return "+e[25].name+" to active timing")&&h(T,"title",M),y[0]&128&&be(t,"border-left","4px solid "+(((W=e[26])==null?void 0:W.color)||"#6b7280"))},d(w){w&&q(t),I=!1,N()}}}function kn(n){let e,t,i,l;return{c(){e=m("div"),t=F("All runners from selected team(s) already have times recorded for "),i=F(n[1]),l=F("."),h(e,"class","no-runners-message svelte-1bc13oq")},m(s,o){H(s,e,o),r(e,t),r(e,i),r(e,l)},p(s,o){o[0]&2&&Y(i,s[1])},d(s){s&&q(e)}}}function xi(n){let e,t,i,l,s,o=ut(n[5])+"",u,c,a,d,p,f,g,_,v,S=!n[2].trim(),b,E,R,T,A,M,C,I,N=[],O=new Map,V,w,y,D,W,j,G,ce,x,le,J,ge,K=S&&hn();function Z(U,B){return U[4]?Ki:Wi}let se=Z(n),ue=se(n),re=de(n[3].teams);const ee=U=>U[26].id;for(let U=0;U<re.length;U+=1){let B=fn(n,re,U),P=ee(B);O.set(P,N[U]=mn(P,B))}let L=n[0].length===0&&gn(),$=de(n[8]),z=[];for(let U=0;U<$.length;U+=1)z[U]=pn(dn(n,$,U));let te=!n[1]&&_n();function pe(U,B){return B[0]&7&&(le=null),le==null&&(le=!!(U[0].length>0&&U[1]&&U[2].trim())),le?Yi:Gi}let ae=pe(n,[-1,-1]),X=ae(n);return{c(){e=m("div"),t=m("div"),i=m("h2"),i.textContent="Race Timer",l=k(),s=m("div"),u=F(o),c=k(),a=m("div"),d=m("div"),p=m("div"),f=m("label"),f.textContent="Race Name",g=k(),_=m("input"),v=k(),K&&K.c(),b=k(),E=m("div"),ue.c(),R=k(),T=m("div"),A=m("div"),M=m("label"),M.textContent="Select Team(s):",C=k(),I=m("div");for(let U=0;U<N.length;U+=1)N[U].c();V=k(),L&&L.c(),w=k(),y=m("div"),D=m("label"),D.textContent="Checkpoint:",W=k(),j=m("select"),G=m("option"),G.textContent="Select Checkpoint";for(let U=0;U<z.length;U+=1)z[U].c();ce=k(),te&&te.c(),x=k(),X.c(),h(i,"class","svelte-1bc13oq"),h(s,"class","timer-display svelte-1bc13oq"),me(s,"running",n[4]),h(t,"class","header svelte-1bc13oq"),h(f,"for","race-name"),h(f,"class","svelte-1bc13oq"),h(_,"id","race-name"),h(_,"type","text"),h(_,"placeholder","e.g., State Championship, League Meet"),_.disabled=n[4],h(_,"class","race-input svelte-1bc13oq"),h(p,"class","form-group svelte-1bc13oq"),h(d,"class","race-input-section svelte-1bc13oq"),h(E,"class","timer-controls svelte-1bc13oq"),h(M,"class","svelte-1bc13oq"),h(I,"class","team-checkboxes svelte-1bc13oq"),h(A,"class","team-selection svelte-1bc13oq"),h(D,"for","checkpoint-select"),h(D,"class","svelte-1bc13oq"),G.__value="",ie(G,G.__value),h(j,"id","checkpoint-select"),j.disabled=n[4],h(j,"class","svelte-1bc13oq"),n[1]===void 0&&Re(()=>n[19].call(j)),h(y,"class","checkpoint-selection svelte-1bc13oq"),h(T,"class","selection-controls svelte-1bc13oq"),h(a,"class","controls-section svelte-1bc13oq"),h(e,"class","timing-container svelte-1bc13oq")},m(U,B){H(U,e,B),r(e,t),r(t,i),r(t,l),r(t,s),r(s,u),r(e,c),r(e,a),r(a,d),r(d,p),r(p,f),r(p,g),r(p,_),ie(_,n[2]),r(p,v),K&&K.m(p,null),r(a,b),r(a,E),ue.m(E,null),r(a,R),r(a,T),r(T,A),r(A,M),r(A,C),r(A,I);for(let P=0;P<N.length;P+=1)N[P]&&N[P].m(I,null);r(A,V),L&&L.m(A,null),r(T,w),r(T,y),r(y,D),r(y,W),r(y,j),r(j,G);for(let P=0;P<z.length;P+=1)z[P]&&z[P].m(j,null);ke(j,n[1],!0),r(y,ce),te&&te.m(y,null),r(e,x),X.m(e,null),J||(ge=[Q(_,"input",n[17]),Q(j,"change",n[19])],J=!0)},p(U,B){if(B[0]&32&&o!==(o=ut(U[5])+"")&&Y(u,o),B[0]&16&&me(s,"running",U[4]),B[0]&16&&(_.disabled=U[4]),B[0]&4&&_.value!==U[2]&&ie(_,U[2]),B[0]&4&&(S=!U[2].trim()),S?K||(K=hn(),K.c(),K.m(p,null)):K&&(K.d(1),K=null),se===(se=Z(U))&&ue?ue.p(U,B):(ue.d(1),ue=se(U),ue&&(ue.c(),ue.m(E,null))),B[0]&65561&&(re=de(U[3].teams),N=$e(N,B,ee,1,U,re,O,I,He,mn,null,fn)),U[0].length===0?L||(L=gn(),L.c(),L.m(A,null)):L&&(L.d(1),L=null),B[0]&256){$=de(U[8]);let P;for(P=0;P<$.length;P+=1){const he=dn(U,$,P);z[P]?z[P].p(he,B):(z[P]=pn(he),z[P].c(),z[P].m(j,null))}for(;P<z.length;P+=1)z[P].d(1);z.length=$.length}B[0]&16&&(j.disabled=U[4]),B[0]&258&&ke(j,U[1]),U[1]?te&&(te.d(1),te=null):te||(te=_n(),te.c(),te.m(y,null)),ae===(ae=pe(U,B))&&X?X.p(U,B):(X.d(1),X=ae(U),X&&(X.c(),X.m(e,null)))},i:fe,o:fe,d(U){U&&q(e),K&&K.d(),ue.d();for(let B=0;B<N.length;B+=1)N[B].d();L&&L.d(),Me(z,U),te&&te.d(),X.d(),J=!1,_e(ge)}}}function ut(n){const e=Math.floor(n/1e3),t=Math.floor(e/60),i=e%60,l=Math.floor(n%1e3/10);return`${t.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}.${l.toString().padStart(2,"0")}`}function el(n){const e=Math.floor(n/1e3),t=Math.floor(e/60),i=e%60;return`${t}:${i.toString().padStart(2,"0")}`}function tl(n,e,t){let i,l;Ae(n,ve,w=>t(3,i=w)),Ae(n,Oi,w=>t(8,l=w));let s=!1,o=0,u=0,c=null,a=[],d="",p="",f=[],g=[];function _(){const w=i.runners.filter(W=>a.includes(W.teamId)),y=[],D=[];w.forEach(W=>{const j=i.times.find(G=>G.runnerId===W.id&&G.checkpoint===d);j?D.push({...W,recordedTime:j.time}):y.push(W)}),t(6,f=y),t(7,g=D)}function v(){a.length===0||!d||!p.trim()||(ve.setCurrentRace(p.trim()),o=Date.now(),t(5,u=0),t(4,s=!0),c=setInterval(()=>{t(5,u=Date.now()-o)},10))}function S(){t(4,s=!1),c&&(clearInterval(c),c=null)}function b(){ve.update(w=>({...w,times:w.times.filter(y=>{if(y.checkpoint!==d)return!0;const D=w.runners.find(W=>W.id===y.runnerId);return!D||!a.includes(D.teamId)}),updated:Date.now()}))}function E(w){ve.removeTime(w.id,d)}function R(w){if(!s)return;const y=el(u);ve.addTime({runnerId:w.id,checkpoint:d,time:y},p.trim())}function T(w){return i.teams.find(y=>y.id===w)}function A(){return a.map(w=>{var y;return(y=T(w))==null?void 0:y.name}).filter(Boolean).join(", ")}function M(w){a.includes(w)?t(0,a=a.filter(y=>y!==w)):t(0,a=[...a,w])}Si(()=>{c&&clearInterval(c)});function C(){p=this.value,t(2,p),t(3,i)}const I=w=>M(w.id);function N(){d=Ue(this),t(1,d)}const O=w=>R(w),V=w=>E(w);return n.$$.update=()=>{n.$$.dirty[0]&12&&i.currentRace&&!p&&t(2,p=i.currentRace),n.$$.dirty[0]&11&&(a.length>0&&d&&i?_():(t(6,f=[]),t(7,g=[])))},[a,d,p,i,s,u,f,g,l,v,S,b,E,R,T,A,M,C,I,N,O,V]}class nl extends Ge{constructor(e){super(),We(this,e,tl,xi,Be,{},null,[-1,-1])}}var nt={},il=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},ti={},ye={};let At;const ll=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];ye.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};ye.getSymbolTotalCodewords=function(e){return ll[e]};ye.getBCHDigit=function(n){let e=0;for(;n!==0;)e++,n>>>=1;return e};ye.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');At=e};ye.isKanjiModeEnabled=function(){return typeof At<"u"};ye.toSJIS=function(e){return At(e)};var mt={};(function(n){n.L={bit:1},n.M={bit:0},n.Q={bit:3},n.H={bit:2};function e(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return n.L;case"m":case"medium":return n.M;case"q":case"quartile":return n.Q;case"h":case"high":return n.H;default:throw new Error("Unknown EC Level: "+t)}}n.isValid=function(i){return i&&typeof i.bit<"u"&&i.bit>=0&&i.bit<4},n.from=function(i,l){if(n.isValid(i))return i;try{return e(i)}catch{return l}}})(mt);function ni(){this.buffer=[],this.length=0}ni.prototype={get:function(n){const e=Math.floor(n/8);return(this.buffer[e]>>>7-n%8&1)===1},put:function(n,e){for(let t=0;t<e;t++)this.putBit((n>>>e-t-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(n){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),n&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var sl=ni;function it(n){if(!n||n<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=n,this.data=new Uint8Array(n*n),this.reservedBit=new Uint8Array(n*n)}it.prototype.set=function(n,e,t,i){const l=n*this.size+e;this.data[l]=t,i&&(this.reservedBit[l]=!0)};it.prototype.get=function(n,e){return this.data[n*this.size+e]};it.prototype.xor=function(n,e,t){this.data[n*this.size+e]^=t};it.prototype.isReserved=function(n,e){return this.reservedBit[n*this.size+e]};var ol=it,ii={};(function(n){const e=ye.getSymbolSize;n.getRowColCoords=function(i){if(i===1)return[];const l=Math.floor(i/7)+2,s=e(i),o=s===145?26:Math.ceil((s-13)/(2*l-2))*2,u=[s-7];for(let c=1;c<l-1;c++)u[c]=u[c-1]-o;return u.push(6),u.reverse()},n.getPositions=function(i){const l=[],s=n.getRowColCoords(i),o=s.length;for(let u=0;u<o;u++)for(let c=0;c<o;c++)u===0&&c===0||u===0&&c===o-1||u===o-1&&c===0||l.push([s[u],s[c]]);return l}})(ii);var li={};const rl=ye.getSymbolSize,Cn=7;li.getPositions=function(e){const t=rl(e);return[[0,0],[t-Cn,0],[0,t-Cn]]};var si={};(function(n){n.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};n.isValid=function(l){return l!=null&&l!==""&&!isNaN(l)&&l>=0&&l<=7},n.from=function(l){return n.isValid(l)?parseInt(l,10):void 0},n.getPenaltyN1=function(l){const s=l.size;let o=0,u=0,c=0,a=null,d=null;for(let p=0;p<s;p++){u=c=0,a=d=null;for(let f=0;f<s;f++){let g=l.get(p,f);g===a?u++:(u>=5&&(o+=e.N1+(u-5)),a=g,u=1),g=l.get(f,p),g===d?c++:(c>=5&&(o+=e.N1+(c-5)),d=g,c=1)}u>=5&&(o+=e.N1+(u-5)),c>=5&&(o+=e.N1+(c-5))}return o},n.getPenaltyN2=function(l){const s=l.size;let o=0;for(let u=0;u<s-1;u++)for(let c=0;c<s-1;c++){const a=l.get(u,c)+l.get(u,c+1)+l.get(u+1,c)+l.get(u+1,c+1);(a===4||a===0)&&o++}return o*e.N2},n.getPenaltyN3=function(l){const s=l.size;let o=0,u=0,c=0;for(let a=0;a<s;a++){u=c=0;for(let d=0;d<s;d++)u=u<<1&2047|l.get(a,d),d>=10&&(u===1488||u===93)&&o++,c=c<<1&2047|l.get(d,a),d>=10&&(c===1488||c===93)&&o++}return o*e.N3},n.getPenaltyN4=function(l){let s=0;const o=l.data.length;for(let c=0;c<o;c++)s+=l.data[c];return Math.abs(Math.ceil(s*100/o/5)-10)*e.N4};function t(i,l,s){switch(i){case n.Patterns.PATTERN000:return(l+s)%2===0;case n.Patterns.PATTERN001:return l%2===0;case n.Patterns.PATTERN010:return s%3===0;case n.Patterns.PATTERN011:return(l+s)%3===0;case n.Patterns.PATTERN100:return(Math.floor(l/2)+Math.floor(s/3))%2===0;case n.Patterns.PATTERN101:return l*s%2+l*s%3===0;case n.Patterns.PATTERN110:return(l*s%2+l*s%3)%2===0;case n.Patterns.PATTERN111:return(l*s%3+(l+s)%2)%2===0;default:throw new Error("bad maskPattern:"+i)}}n.applyMask=function(l,s){const o=s.size;for(let u=0;u<o;u++)for(let c=0;c<o;c++)s.isReserved(c,u)||s.xor(c,u,t(l,c,u))},n.getBestMask=function(l,s){const o=Object.keys(n.Patterns).length;let u=0,c=1/0;for(let a=0;a<o;a++){s(a),n.applyMask(a,l);const d=n.getPenaltyN1(l)+n.getPenaltyN2(l)+n.getPenaltyN3(l)+n.getPenaltyN4(l);n.applyMask(a,l),d<c&&(c=d,u=a)}return u}})(si);var gt={};const Ie=mt,ot=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],rt=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];gt.getBlocksCount=function(e,t){switch(t){case Ie.L:return ot[(e-1)*4+0];case Ie.M:return ot[(e-1)*4+1];case Ie.Q:return ot[(e-1)*4+2];case Ie.H:return ot[(e-1)*4+3];default:return}};gt.getTotalCodewordsCount=function(e,t){switch(t){case Ie.L:return rt[(e-1)*4+0];case Ie.M:return rt[(e-1)*4+1];case Ie.Q:return rt[(e-1)*4+2];case Ie.H:return rt[(e-1)*4+3];default:return}};var oi={},pt={};const Ze=new Uint8Array(512),dt=new Uint8Array(256);(function(){let e=1;for(let t=0;t<255;t++)Ze[t]=e,dt[e]=t,e<<=1,e&256&&(e^=285);for(let t=255;t<512;t++)Ze[t]=Ze[t-255]})();pt.log=function(e){if(e<1)throw new Error("log("+e+")");return dt[e]};pt.exp=function(e){return Ze[e]};pt.mul=function(e,t){return e===0||t===0?0:Ze[dt[e]+dt[t]]};(function(n){const e=pt;n.mul=function(i,l){const s=new Uint8Array(i.length+l.length-1);for(let o=0;o<i.length;o++)for(let u=0;u<l.length;u++)s[o+u]^=e.mul(i[o],l[u]);return s},n.mod=function(i,l){let s=new Uint8Array(i);for(;s.length-l.length>=0;){const o=s[0];for(let c=0;c<l.length;c++)s[c]^=e.mul(l[c],o);let u=0;for(;u<s.length&&s[u]===0;)u++;s=s.slice(u)}return s},n.generateECPolynomial=function(i){let l=new Uint8Array([1]);for(let s=0;s<i;s++)l=n.mul(l,new Uint8Array([1,e.exp(s)]));return l}})(oi);const ri=oi;function Bt(n){this.genPoly=void 0,this.degree=n,this.degree&&this.initialize(this.degree)}Bt.prototype.initialize=function(e){this.degree=e,this.genPoly=ri.generateECPolynomial(this.degree)};Bt.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(e.length+this.degree);t.set(e);const i=ri.mod(t,this.genPoly),l=this.degree-i.length;if(l>0){const s=new Uint8Array(this.degree);return s.set(i,l),s}return i};var al=Bt,ai={},Ne={},Pt={};Pt.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var Se={};const ci="[0-9]+",cl="[A-Z $%*+\\-./:]+";let et="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";et=et.replace(/u/g,"\\u");const ul="(?:(?![A-Z0-9 $%*+\\-./:]|"+et+`)(?:.|[\r
]))+`;Se.KANJI=new RegExp(et,"g");Se.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Se.BYTE=new RegExp(ul,"g");Se.NUMERIC=new RegExp(ci,"g");Se.ALPHANUMERIC=new RegExp(cl,"g");const dl=new RegExp("^"+et+"$"),fl=new RegExp("^"+ci+"$"),hl=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Se.testKanji=function(e){return dl.test(e)};Se.testNumeric=function(e){return fl.test(e)};Se.testAlphanumeric=function(e){return hl.test(e)};(function(n){const e=Pt,t=Se;n.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},n.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},n.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},n.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},n.MIXED={bit:-1},n.getCharCountIndicator=function(s,o){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?s.ccBits[0]:o<27?s.ccBits[1]:s.ccBits[2]},n.getBestModeForData=function(s){return t.testNumeric(s)?n.NUMERIC:t.testAlphanumeric(s)?n.ALPHANUMERIC:t.testKanji(s)?n.KANJI:n.BYTE},n.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},n.isValid=function(s){return s&&s.bit&&s.ccBits};function i(l){if(typeof l!="string")throw new Error("Param is not a string");switch(l.toLowerCase()){case"numeric":return n.NUMERIC;case"alphanumeric":return n.ALPHANUMERIC;case"kanji":return n.KANJI;case"byte":return n.BYTE;default:throw new Error("Unknown mode: "+l)}}n.from=function(s,o){if(n.isValid(s))return s;try{return i(s)}catch{return o}}})(Ne);(function(n){const e=ye,t=gt,i=mt,l=Ne,s=Pt,o=7973,u=e.getBCHDigit(o);function c(f,g,_){for(let v=1;v<=40;v++)if(g<=n.getCapacity(v,_,f))return v}function a(f,g){return l.getCharCountIndicator(f,g)+4}function d(f,g){let _=0;return f.forEach(function(v){const S=a(v.mode,g);_+=S+v.getBitsLength()}),_}function p(f,g){for(let _=1;_<=40;_++)if(d(f,_)<=n.getCapacity(_,g,l.MIXED))return _}n.from=function(g,_){return s.isValid(g)?parseInt(g,10):_},n.getCapacity=function(g,_,v){if(!s.isValid(g))throw new Error("Invalid QR Code version");typeof v>"u"&&(v=l.BYTE);const S=e.getSymbolTotalCodewords(g),b=t.getTotalCodewordsCount(g,_),E=(S-b)*8;if(v===l.MIXED)return E;const R=E-a(v,g);switch(v){case l.NUMERIC:return Math.floor(R/10*3);case l.ALPHANUMERIC:return Math.floor(R/11*2);case l.KANJI:return Math.floor(R/13);case l.BYTE:default:return Math.floor(R/8)}},n.getBestVersionForData=function(g,_){let v;const S=i.from(_,i.M);if(Array.isArray(g)){if(g.length>1)return p(g,S);if(g.length===0)return 1;v=g[0]}else v=g;return c(v.mode,v.getLength(),S)},n.getEncodedBits=function(g){if(!s.isValid(g)||g<7)throw new Error("Invalid QR Code version");let _=g<<12;for(;e.getBCHDigit(_)-u>=0;)_^=o<<e.getBCHDigit(_)-u;return g<<12|_}})(ai);var ui={};const Rt=ye,di=1335,ml=21522,Sn=Rt.getBCHDigit(di);ui.getEncodedBits=function(e,t){const i=e.bit<<3|t;let l=i<<10;for(;Rt.getBCHDigit(l)-Sn>=0;)l^=di<<Rt.getBCHDigit(l)-Sn;return(i<<10|l)^ml};var fi={};const gl=Ne;function Ve(n){this.mode=gl.NUMERIC,this.data=n.toString()}Ve.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};Ve.prototype.getLength=function(){return this.data.length};Ve.prototype.getBitsLength=function(){return Ve.getBitsLength(this.data.length)};Ve.prototype.write=function(e){let t,i,l;for(t=0;t+3<=this.data.length;t+=3)i=this.data.substr(t,3),l=parseInt(i,10),e.put(l,10);const s=this.data.length-t;s>0&&(i=this.data.substr(t),l=parseInt(i,10),e.put(l,s*3+1))};var pl=Ve;const _l=Ne,yt=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function je(n){this.mode=_l.ALPHANUMERIC,this.data=n}je.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};je.prototype.getLength=function(){return this.data.length};je.prototype.getBitsLength=function(){return je.getBitsLength(this.data.length)};je.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let i=yt.indexOf(this.data[t])*45;i+=yt.indexOf(this.data[t+1]),e.put(i,11)}this.data.length%2&&e.put(yt.indexOf(this.data[t]),6)};var vl=je;const bl=Ne;function ze(n){this.mode=bl.BYTE,typeof n=="string"?this.data=new TextEncoder().encode(n):this.data=new Uint8Array(n)}ze.getBitsLength=function(e){return e*8};ze.prototype.getLength=function(){return this.data.length};ze.prototype.getBitsLength=function(){return ze.getBitsLength(this.data.length)};ze.prototype.write=function(n){for(let e=0,t=this.data.length;e<t;e++)n.put(this.data[e],8)};var yl=ze;const wl=Ne,kl=ye;function Qe(n){this.mode=wl.KANJI,this.data=n}Qe.getBitsLength=function(e){return e*13};Qe.prototype.getLength=function(){return this.data.length};Qe.prototype.getBitsLength=function(){return Qe.getBitsLength(this.data.length)};Qe.prototype.write=function(n){let e;for(e=0;e<this.data.length;e++){let t=kl.toSJIS(this.data[e]);if(t>=33088&&t<=40956)t-=33088;else if(t>=57408&&t<=60351)t-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);t=(t>>>8&255)*192+(t&255),n.put(t,13)}};var Cl=Qe,hi={exports:{}};(function(n){var e={single_source_shortest_paths:function(t,i,l){var s={},o={};o[i]=0;var u=e.PriorityQueue.make();u.push(i,0);for(var c,a,d,p,f,g,_,v,S;!u.empty();){c=u.pop(),a=c.value,p=c.cost,f=t[a]||{};for(d in f)f.hasOwnProperty(d)&&(g=f[d],_=p+g,v=o[d],S=typeof o[d]>"u",(S||v>_)&&(o[d]=_,u.push(d,_),s[d]=a))}if(typeof l<"u"&&typeof o[l]>"u"){var b=["Could not find a path from ",i," to ",l,"."].join("");throw new Error(b)}return s},extract_shortest_path_from_predecessor_list:function(t,i){for(var l=[],s=i;s;)l.push(s),t[s],s=t[s];return l.reverse(),l},find_path:function(t,i,l){var s=e.single_source_shortest_paths(t,i,l);return e.extract_shortest_path_from_predecessor_list(s,l)},PriorityQueue:{make:function(t){var i=e.PriorityQueue,l={},s;t=t||{};for(s in i)i.hasOwnProperty(s)&&(l[s]=i[s]);return l.queue=[],l.sorter=t.sorter||i.default_sorter,l},default_sorter:function(t,i){return t.cost-i.cost},push:function(t,i){var l={value:t,cost:i};this.queue.push(l),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};n.exports=e})(hi);var Sl=hi.exports;(function(n){const e=Ne,t=pl,i=vl,l=yl,s=Cl,o=Se,u=ye,c=Sl;function a(b){return unescape(encodeURIComponent(b)).length}function d(b,E,R){const T=[];let A;for(;(A=b.exec(R))!==null;)T.push({data:A[0],index:A.index,mode:E,length:A[0].length});return T}function p(b){const E=d(o.NUMERIC,e.NUMERIC,b),R=d(o.ALPHANUMERIC,e.ALPHANUMERIC,b);let T,A;return u.isKanjiModeEnabled()?(T=d(o.BYTE,e.BYTE,b),A=d(o.KANJI,e.KANJI,b)):(T=d(o.BYTE_KANJI,e.BYTE,b),A=[]),E.concat(R,T,A).sort(function(C,I){return C.index-I.index}).map(function(C){return{data:C.data,mode:C.mode,length:C.length}})}function f(b,E){switch(E){case e.NUMERIC:return t.getBitsLength(b);case e.ALPHANUMERIC:return i.getBitsLength(b);case e.KANJI:return s.getBitsLength(b);case e.BYTE:return l.getBitsLength(b)}}function g(b){return b.reduce(function(E,R){const T=E.length-1>=0?E[E.length-1]:null;return T&&T.mode===R.mode?(E[E.length-1].data+=R.data,E):(E.push(R),E)},[])}function _(b){const E=[];for(let R=0;R<b.length;R++){const T=b[R];switch(T.mode){case e.NUMERIC:E.push([T,{data:T.data,mode:e.ALPHANUMERIC,length:T.length},{data:T.data,mode:e.BYTE,length:T.length}]);break;case e.ALPHANUMERIC:E.push([T,{data:T.data,mode:e.BYTE,length:T.length}]);break;case e.KANJI:E.push([T,{data:T.data,mode:e.BYTE,length:a(T.data)}]);break;case e.BYTE:E.push([{data:T.data,mode:e.BYTE,length:a(T.data)}])}}return E}function v(b,E){const R={},T={start:{}};let A=["start"];for(let M=0;M<b.length;M++){const C=b[M],I=[];for(let N=0;N<C.length;N++){const O=C[N],V=""+M+N;I.push(V),R[V]={node:O,lastCount:0},T[V]={};for(let w=0;w<A.length;w++){const y=A[w];R[y]&&R[y].node.mode===O.mode?(T[y][V]=f(R[y].lastCount+O.length,O.mode)-f(R[y].lastCount,O.mode),R[y].lastCount+=O.length):(R[y]&&(R[y].lastCount=O.length),T[y][V]=f(O.length,O.mode)+4+e.getCharCountIndicator(O.mode,E))}}A=I}for(let M=0;M<A.length;M++)T[A[M]].end=0;return{map:T,table:R}}function S(b,E){let R;const T=e.getBestModeForData(b);if(R=e.from(E,T),R!==e.BYTE&&R.bit<T.bit)throw new Error('"'+b+'" cannot be encoded with mode '+e.toString(R)+`.
 Suggested mode is: `+e.toString(T));switch(R===e.KANJI&&!u.isKanjiModeEnabled()&&(R=e.BYTE),R){case e.NUMERIC:return new t(b);case e.ALPHANUMERIC:return new i(b);case e.KANJI:return new s(b);case e.BYTE:return new l(b)}}n.fromArray=function(E){return E.reduce(function(R,T){return typeof T=="string"?R.push(S(T,null)):T.data&&R.push(S(T.data,T.mode)),R},[])},n.fromString=function(E,R){const T=p(E,u.isKanjiModeEnabled()),A=_(T),M=v(A,R),C=c.find_path(M.map,"start","end"),I=[];for(let N=1;N<C.length-1;N++)I.push(M.table[C[N]].node);return n.fromArray(g(I))},n.rawSplit=function(E){return n.fromArray(p(E,u.isKanjiModeEnabled()))}})(fi);const _t=ye,wt=mt,El=sl,Tl=ol,Rl=ii,Il=li,It=si,Mt=gt,Ml=al,ft=ai,Nl=ui,Ll=Ne,kt=fi;function Dl(n,e){const t=n.size,i=Il.getPositions(e);for(let l=0;l<i.length;l++){const s=i[l][0],o=i[l][1];for(let u=-1;u<=7;u++)if(!(s+u<=-1||t<=s+u))for(let c=-1;c<=7;c++)o+c<=-1||t<=o+c||(u>=0&&u<=6&&(c===0||c===6)||c>=0&&c<=6&&(u===0||u===6)||u>=2&&u<=4&&c>=2&&c<=4?n.set(s+u,o+c,!0,!0):n.set(s+u,o+c,!1,!0))}}function Al(n){const e=n.size;for(let t=8;t<e-8;t++){const i=t%2===0;n.set(t,6,i,!0),n.set(6,t,i,!0)}}function Bl(n,e){const t=Rl.getPositions(e);for(let i=0;i<t.length;i++){const l=t[i][0],s=t[i][1];for(let o=-2;o<=2;o++)for(let u=-2;u<=2;u++)o===-2||o===2||u===-2||u===2||o===0&&u===0?n.set(l+o,s+u,!0,!0):n.set(l+o,s+u,!1,!0)}}function Pl(n,e){const t=n.size,i=ft.getEncodedBits(e);let l,s,o;for(let u=0;u<18;u++)l=Math.floor(u/3),s=u%3+t-8-3,o=(i>>u&1)===1,n.set(l,s,o,!0),n.set(s,l,o,!0)}function Ct(n,e,t){const i=n.size,l=Nl.getEncodedBits(e,t);let s,o;for(s=0;s<15;s++)o=(l>>s&1)===1,s<6?n.set(s,8,o,!0):s<8?n.set(s+1,8,o,!0):n.set(i-15+s,8,o,!0),s<8?n.set(8,i-s-1,o,!0):s<9?n.set(8,15-s-1+1,o,!0):n.set(8,15-s-1,o,!0);n.set(i-8,8,1,!0)}function Ol(n,e){const t=n.size;let i=-1,l=t-1,s=7,o=0;for(let u=t-1;u>0;u-=2)for(u===6&&u--;;){for(let c=0;c<2;c++)if(!n.isReserved(l,u-c)){let a=!1;o<e.length&&(a=(e[o]>>>s&1)===1),n.set(l,u-c,a),s--,s===-1&&(o++,s=7)}if(l+=i,l<0||t<=l){l-=i,i=-i;break}}}function Fl(n,e,t){const i=new El;t.forEach(function(c){i.put(c.mode.bit,4),i.put(c.getLength(),Ll.getCharCountIndicator(c.mode,n)),c.write(i)});const l=_t.getSymbolTotalCodewords(n),s=Mt.getTotalCodewordsCount(n,e),o=(l-s)*8;for(i.getLengthInBits()+4<=o&&i.put(0,4);i.getLengthInBits()%8!==0;)i.putBit(0);const u=(o-i.getLengthInBits())/8;for(let c=0;c<u;c++)i.put(c%2?17:236,8);return Ul(i,n,e)}function Ul(n,e,t){const i=_t.getSymbolTotalCodewords(e),l=Mt.getTotalCodewordsCount(e,t),s=i-l,o=Mt.getBlocksCount(e,t),u=i%o,c=o-u,a=Math.floor(i/o),d=Math.floor(s/o),p=d+1,f=a-d,g=new Ml(f);let _=0;const v=new Array(o),S=new Array(o);let b=0;const E=new Uint8Array(n.buffer);for(let C=0;C<o;C++){const I=C<c?d:p;v[C]=E.slice(_,_+I),S[C]=g.encode(v[C]),_+=I,b=Math.max(b,I)}const R=new Uint8Array(i);let T=0,A,M;for(A=0;A<b;A++)for(M=0;M<o;M++)A<v[M].length&&(R[T++]=v[M][A]);for(A=0;A<f;A++)for(M=0;M<o;M++)R[T++]=S[M][A];return R}function ql(n,e,t,i){let l;if(Array.isArray(n))l=kt.fromArray(n);else if(typeof n=="string"){let a=e;if(!a){const d=kt.rawSplit(n);a=ft.getBestVersionForData(d,t)}l=kt.fromString(n,a||40)}else throw new Error("Invalid data");const s=ft.getBestVersionForData(l,t);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=s;else if(e<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);const o=Fl(e,t,l),u=_t.getSymbolSize(e),c=new Tl(u);return Dl(c,e),Al(c),Bl(c,e),Ct(c,t,0),e>=7&&Pl(c,e),Ol(c,o),isNaN(i)&&(i=It.getBestMask(c,Ct.bind(null,c,t))),It.applyMask(i,c),Ct(c,t,i),{modules:c,version:e,errorCorrectionLevel:t,maskPattern:i,segments:l}}ti.create=function(e,t){if(typeof e>"u"||e==="")throw new Error("No input text");let i=wt.M,l,s;return typeof t<"u"&&(i=wt.from(t.errorCorrectionLevel,wt.M),l=ft.from(t.version),s=It.from(t.maskPattern),t.toSJISFunc&&_t.setToSJISFunction(t.toSJISFunc)),ql(e,l,i,s)};var mi={},Ot={};(function(n){function e(t){if(typeof t=="number"&&(t=t.toString()),typeof t!="string")throw new Error("Color should be defined as hex string");let i=t.slice().replace("#","").split("");if(i.length<3||i.length===5||i.length>8)throw new Error("Invalid hex color: "+t);(i.length===3||i.length===4)&&(i=Array.prototype.concat.apply([],i.map(function(s){return[s,s]}))),i.length===6&&i.push("F","F");const l=parseInt(i.join(""),16);return{r:l>>24&255,g:l>>16&255,b:l>>8&255,a:l&255,hex:"#"+i.slice(0,6).join("")}}n.getOptions=function(i){i||(i={}),i.color||(i.color={});const l=typeof i.margin>"u"||i.margin===null||i.margin<0?4:i.margin,s=i.width&&i.width>=21?i.width:void 0,o=i.scale||4;return{width:s,scale:s?4:o,margin:l,color:{dark:e(i.color.dark||"#000000ff"),light:e(i.color.light||"#ffffffff")},type:i.type,rendererOpts:i.rendererOpts||{}}},n.getScale=function(i,l){return l.width&&l.width>=i+l.margin*2?l.width/(i+l.margin*2):l.scale},n.getImageWidth=function(i,l){const s=n.getScale(i,l);return Math.floor((i+l.margin*2)*s)},n.qrToImageData=function(i,l,s){const o=l.modules.size,u=l.modules.data,c=n.getScale(o,s),a=Math.floor((o+s.margin*2)*c),d=s.margin*c,p=[s.color.light,s.color.dark];for(let f=0;f<a;f++)for(let g=0;g<a;g++){let _=(f*a+g)*4,v=s.color.light;if(f>=d&&g>=d&&f<a-d&&g<a-d){const S=Math.floor((f-d)/c),b=Math.floor((g-d)/c);v=p[u[S*o+b]?1:0]}i[_++]=v.r,i[_++]=v.g,i[_++]=v.b,i[_]=v.a}}})(Ot);(function(n){const e=Ot;function t(l,s,o){l.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=o,s.width=o,s.style.height=o+"px",s.style.width=o+"px"}function i(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}n.render=function(s,o,u){let c=u,a=o;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),o||(a=i()),c=e.getOptions(c);const d=e.getImageWidth(s.modules.size,c),p=a.getContext("2d"),f=p.createImageData(d,d);return e.qrToImageData(f.data,s,c),t(p,a,d),p.putImageData(f,0,0),a},n.renderToDataURL=function(s,o,u){let c=u;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),c||(c={});const a=n.render(s,o,c),d=c.type||"image/png",p=c.rendererOpts||{};return a.toDataURL(d,p.quality)}})(mi);var gi={};const Hl=Ot;function En(n,e){const t=n.a/255,i=e+'="'+n.hex+'"';return t<1?i+" "+e+'-opacity="'+t.toFixed(2).slice(1)+'"':i}function St(n,e,t){let i=n+e;return typeof t<"u"&&(i+=" "+t),i}function $l(n,e,t){let i="",l=0,s=!1,o=0;for(let u=0;u<n.length;u++){const c=Math.floor(u%e),a=Math.floor(u/e);!c&&!s&&(s=!0),n[u]?(o++,u>0&&c>0&&n[u-1]||(i+=s?St("M",c+t,.5+a+t):St("m",l,0),l=0,s=!1),c+1<e&&n[u+1]||(i+=St("h",o),o=0)):l++}return i}gi.render=function(e,t,i){const l=Hl.getOptions(t),s=e.modules.size,o=e.modules.data,u=s+l.margin*2,c=l.color.light.a?"<path "+En(l.color.light,"fill")+' d="M0 0h'+u+"v"+u+'H0z"/>':"",a="<path "+En(l.color.dark,"stroke")+' d="'+$l(o,s,l.margin)+'"/>',d='viewBox="0 0 '+u+" "+u+'"',f='<svg xmlns="http://www.w3.org/2000/svg" '+(l.width?'width="'+l.width+'" height="'+l.width+'" ':"")+d+' shape-rendering="crispEdges">'+c+a+`</svg>
`;return typeof i=="function"&&i(null,f),f};const Vl=il,Nt=ti,pi=mi,jl=gi;function Ft(n,e,t,i,l){const s=[].slice.call(arguments,1),o=s.length,u=typeof s[o-1]=="function";if(!u&&!Vl())throw new Error("Callback required as last argument");if(u){if(o<2)throw new Error("Too few arguments provided");o===2?(l=t,t=e,e=i=void 0):o===3&&(e.getContext&&typeof l>"u"?(l=i,i=void 0):(l=i,i=t,t=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(t=e,e=i=void 0):o===2&&!e.getContext&&(i=t,t=e,e=void 0),new Promise(function(c,a){try{const d=Nt.create(t,i);c(n(d,e,i))}catch(d){a(d)}})}try{const c=Nt.create(t,i);l(null,n(c,e,i))}catch(c){l(c)}}nt.create=Nt.create;nt.toCanvas=Ft.bind(null,pi.render);nt.toDataURL=Ft.bind(null,pi.renderToDataURL);nt.toString=Ft.bind(null,function(n,e,t){return jl.render(n,t)});async function zl(n){const e={title:`${n.name} - Cross Country Times`,text:`Times for ${n.runners.length} runners`,url:Ql(n)};if(navigator.share&&navigator.canShare&&navigator.canShare(e))try{return await navigator.share(e),!0}catch(t){return console.log("Error sharing:",t),!1}try{return await navigator.clipboard.writeText(JSON.stringify(n,null,2)),!0}catch(t){return console.log("Error copying to clipboard:",t),!1}}function Ql(n){return`data:application/json;base64,${btoa(JSON.stringify(n))}`}async function Jl(n){const e=JSON.stringify(n);try{return await nt.toDataURL(e,{width:256,margin:2,color:{dark:"#000000",light:"#ffffff"}})}catch(t){throw console.error("Error generating QR code:",t),t}}function Kl(n){const e=JSON.stringify(n,null,2),t=new Blob([e],{type:"application/json"}),i=URL.createObjectURL(t),l=document.createElement("a");l.href=i,l.download=`xc-times-${n.name.replace(/\s+/g,"-").toLowerCase()}.json`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(i)}function Tn(n,e,t){const i=n.slice();return i[25]=e[t],i}function Rn(n,e,t){const i=n.slice();return i[28]=e[t],i}function In(n,e,t){const i=n.slice();return i[31]=e[t],i}function Mn(n){let e,t,i,l,s,o,u,c=n[12](),a=(n[0]==="team"||n[0]==="checkpoint"||n[0]==="race")&&Nn(n),d=(n[0]==="checkpoint"||n[0]==="race")&&Dn(n),p=n[0]==="checkpoint"&&Bn(n),f=c&&Wl(n);return{c(){e=m("div"),t=m("h4"),t.textContent="Selection Details",i=k(),l=m("div"),a&&a.c(),s=k(),d&&d.c(),o=k(),p&&p.c(),u=k(),f&&f.c(),h(t,"class","svelte-1e4sey9"),h(l,"class","selection-grid svelte-1e4sey9"),h(e,"class","selection-section svelte-1e4sey9")},m(g,_){H(g,e,_),r(e,t),r(e,i),r(e,l),a&&a.m(l,null),r(l,s),d&&d.m(l,null),r(l,o),p&&p.m(l,null),r(e,u),f&&f.m(e,null)},p(g,_){g[0]==="team"||g[0]==="checkpoint"||g[0]==="race"?a?a.p(g,_):(a=Nn(g),a.c(),a.m(l,s)):a&&(a.d(1),a=null),g[0]==="checkpoint"||g[0]==="race"?d?d.p(g,_):(d=Dn(g),d.c(),d.m(l,o)):d&&(d.d(1),d=null),g[0]==="checkpoint"?p?p.p(g,_):(p=Bn(g),p.c(),p.m(l,null)):p&&(p.d(1),p=null),c&&f.p(g,_)},d(g){g&&q(e),a&&a.d(),d&&d.d(),p&&p.d(),f&&f.d()}}}function Nn(n){let e,t,i,l,s,o,u,c=de(n[1].teams),a=[];for(let d=0;d<c.length;d+=1)a[d]=Ln(In(n,c,d));return{c(){e=m("div"),t=m("label"),t.textContent="Team",i=k(),l=m("select"),s=m("option"),s.textContent="Select a team";for(let d=0;d<a.length;d+=1)a[d].c();h(t,"for","team-select"),h(t,"class","svelte-1e4sey9"),s.__value="",ie(s,s.__value),h(l,"id","team-select"),h(l,"class","svelte-1e4sey9"),n[5]===void 0&&Re(()=>n[21].call(l)),h(e,"class","form-group svelte-1e4sey9")},m(d,p){H(d,e,p),r(e,t),r(e,i),r(e,l),r(l,s);for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(l,null);ke(l,n[5],!0),o||(u=Q(l,"change",n[21]),o=!0)},p(d,p){if(p[0]&2){c=de(d[1].teams);let f;for(f=0;f<c.length;f+=1){const g=In(d,c,f);a[f]?a[f].p(g,p):(a[f]=Ln(g),a[f].c(),a[f].m(l,null))}for(;f<a.length;f+=1)a[f].d(1);a.length=c.length}p[0]&34&&ke(l,d[5])},d(d){d&&q(e),Me(a,d),o=!1,u()}}}function Ln(n){let e,t=n[31].name+"",i,l;return{c(){e=m("option"),i=F(t),e.__value=l=n[31].id,ie(e,e.__value)},m(s,o){H(s,e,o),r(e,i)},p(s,o){o[0]&2&&t!==(t=s[31].name+"")&&Y(i,t),o[0]&2&&l!==(l=s[31].id)&&(e.__value=l,ie(e,e.__value))},d(s){s&&q(e)}}}function Dn(n){let e,t,i,l,s,o,u,c=de(n[9]),a=[];for(let d=0;d<c.length;d+=1)a[d]=An(Rn(n,c,d));return{c(){e=m("div"),t=m("label"),t.textContent="Race",i=k(),l=m("select"),s=m("option"),s.textContent="Select a race";for(let d=0;d<a.length;d+=1)a[d].c();h(t,"for","race-select"),h(t,"class","svelte-1e4sey9"),s.__value="",ie(s,s.__value),h(l,"id","race-select"),h(l,"class","svelte-1e4sey9"),n[7]===void 0&&Re(()=>n[22].call(l)),h(e,"class","form-group svelte-1e4sey9")},m(d,p){H(d,e,p),r(e,t),r(e,i),r(e,l),r(l,s);for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(l,null);ke(l,n[7],!0),o||(u=Q(l,"change",n[22]),o=!0)},p(d,p){if(p[0]&512){c=de(d[9]);let f;for(f=0;f<c.length;f+=1){const g=Rn(d,c,f);a[f]?a[f].p(g,p):(a[f]=An(g),a[f].c(),a[f].m(l,null))}for(;f<a.length;f+=1)a[f].d(1);a.length=c.length}p[0]&640&&ke(l,d[7])},d(d){d&&q(e),Me(a,d),o=!1,u()}}}function An(n){let e,t=n[28]+"",i,l;return{c(){e=m("option"),i=F(t),e.__value=l=n[28],ie(e,e.__value)},m(s,o){H(s,e,o),r(e,i)},p(s,o){o[0]&512&&t!==(t=s[28]+"")&&Y(i,t),o[0]&512&&l!==(l=s[28])&&(e.__value=l,ie(e,e.__value))},d(s){s&&q(e)}}}function Bn(n){let e,t,i,l,s,o,u,c=de(n[8]),a=[];for(let d=0;d<c.length;d+=1)a[d]=Pn(Tn(n,c,d));return{c(){e=m("div"),t=m("label"),t.textContent="Checkpoint",i=k(),l=m("select"),s=m("option"),s.textContent="Select checkpoint";for(let d=0;d<a.length;d+=1)a[d].c();h(t,"for","checkpoint-select"),h(t,"class","svelte-1e4sey9"),s.__value="",ie(s,s.__value),h(l,"id","checkpoint-select"),h(l,"class","svelte-1e4sey9"),n[6]===void 0&&Re(()=>n[23].call(l)),h(e,"class","form-group svelte-1e4sey9")},m(d,p){H(d,e,p),r(e,t),r(e,i),r(e,l),r(l,s);for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(l,null);ke(l,n[6],!0),o||(u=Q(l,"change",n[23]),o=!0)},p(d,p){if(p[0]&256){c=de(d[8]);let f;for(f=0;f<c.length;f+=1){const g=Tn(d,c,f);a[f]?a[f].p(g,p):(a[f]=Pn(g),a[f].c(),a[f].m(l,null))}for(;f<a.length;f+=1)a[f].d(1);a.length=c.length}p[0]&320&&ke(l,d[6])},d(d){d&&q(e),Me(a,d),o=!1,u()}}}function Pn(n){let e,t=n[25]+"",i,l;return{c(){e=m("option"),i=F(t),e.__value=l=n[25],ie(e,e.__value)},m(s,o){H(s,e,o),r(e,i)},p(s,o){o[0]&256&&t!==(t=s[25]+"")&&Y(i,t),o[0]&256&&l!==(l=s[25])&&(e.__value=l,ie(e,e.__value))},d(s){s&&q(e)}}}function Wl(n){let e,t,i,l=n[11]()+"",s;return{c(){e=m("div"),t=m("strong"),t.textContent="Preview:",i=k(),s=F(l),h(e,"class","selection-preview svelte-1e4sey9")},m(o,u){H(o,e,u),r(e,t),r(e,i),r(e,s)},p:fe,d(o){o&&q(e)}}}function Gl(n){let e;return{c(){e=m("div"),e.innerHTML="<p>Please complete your selection above to enable sharing options.</p>",h(e,"class","selection-required svelte-1e4sey9")},m(t,i){H(t,e,i)},p:fe,d(t){t&&q(e)}}}function Yl(n){let e,t,i,l,s,o,u,c,a,d,p,f,g,_,v=n[3]?"Generating...":"Generate QR Code",S,b,E,R,T,A,M,C,I,N,O,V,w=n[2]&&On(n);return{c(){e=m("div"),t=m("div"),i=m("h4"),i.textContent="ðŸ”— Web Share",l=k(),s=m("p"),s.textContent="Share selected data via your device's native share menu",o=k(),u=m("button"),u.textContent="Share Data",c=k(),a=m("div"),d=m("h4"),d.textContent="ðŸ“± QR Code",p=k(),f=m("p"),f.textContent="Generate a QR code for other devices to scan and import",g=k(),_=m("button"),S=F(v),b=k(),E=m("div"),R=m("h4"),R.textContent="ðŸ’¾ Download JSON",T=k(),A=m("p"),A.textContent="Download selected data as a JSON file for backup",M=k(),C=m("button"),C.textContent="Download File",I=k(),w&&w.c(),N=Xe(),h(i,"class","svelte-1e4sey9"),h(s,"class","svelte-1e4sey9"),h(u,"class","action-btn primary svelte-1e4sey9"),h(t,"class","action-card svelte-1e4sey9"),h(d,"class","svelte-1e4sey9"),h(f,"class","svelte-1e4sey9"),h(_,"class","action-btn secondary svelte-1e4sey9"),_.disabled=n[3],h(a,"class","action-card svelte-1e4sey9"),h(R,"class","svelte-1e4sey9"),h(A,"class","svelte-1e4sey9"),h(C,"class","action-btn secondary svelte-1e4sey9"),h(E,"class","action-card svelte-1e4sey9"),h(e,"class","actions-grid svelte-1e4sey9")},m(y,D){H(y,e,D),r(e,t),r(t,i),r(t,l),r(t,s),r(t,o),r(t,u),r(e,c),r(e,a),r(a,d),r(a,p),r(a,f),r(a,g),r(a,_),r(_,S),r(e,b),r(e,E),r(E,R),r(E,T),r(E,A),r(E,M),r(E,C),H(y,I,D),w&&w.m(y,D),H(y,N,D),O||(V=[Q(u,"click",n[13]),Q(_,"click",n[14]),Q(C,"click",n[15])],O=!0)},p(y,D){D[0]&8&&v!==(v=y[3]?"Generating...":"Generate QR Code")&&Y(S,v),D[0]&8&&(_.disabled=y[3]),y[2]?w?w.p(y,D):(w=On(y),w.c(),w.m(N.parentNode,N)):w&&(w.d(1),w=null)},d(y){y&&(q(e),q(I),q(N)),w&&w.d(y),O=!1,_e(V)}}}function On(n){let e,t,i,l,s,o,u,c;return{c(){e=m("div"),t=m("h4"),t.textContent="QR Code for Import",i=k(),l=m("div"),s=m("img"),u=k(),c=m("p"),c.textContent=`Other devices can scan this QR code to import: ${n[10]()}`,h(t,"class","svelte-1e4sey9"),Ht(s.src,o=n[2])||h(s,"src",o),h(s,"alt","QR Code for session data"),h(s,"class","qr-code svelte-1e4sey9"),h(l,"class","qr-code-container svelte-1e4sey9"),h(c,"class","qr-instructions svelte-1e4sey9"),h(e,"class","qr-code-section svelte-1e4sey9")},m(a,d){H(a,e,d),r(e,t),r(e,i),r(e,l),r(l,s),r(e,u),r(e,c)},p(a,d){d[0]&4&&!Ht(s.src,o=a[2])&&h(s,"src",o)},d(a){a&&q(e)}}}function Fn(n){let e,t;return{c(){e=m("div"),t=F(n[4]),h(e,"class","status-message svelte-1e4sey9"),me(e,"success",n[4].includes("success")),me(e,"error",n[4].includes("failed"))},m(i,l){H(i,e,l),r(e,t)},p(i,l){l[0]&16&&Y(t,i[4]),l[0]&16&&me(e,"success",i[4].includes("success")),l[0]&16&&me(e,"error",i[4].includes("failed"))},d(i){i&&q(e)}}}function Un(n){let e;return{c(){e=m("div"),e.innerHTML="<p>No data to share yet!</p> <p>Add some runners and times first.</p>",h(e,"class","empty-state svelte-1e4sey9")},m(t,i){H(t,e,i)},d(t){t&&q(e)}}}function Zl(n){let e,t,i,l,s,o,u=n[1].name+"",c,a,d,p,f,g,_,v,S,b,E,R,T,A,M,C,I,N,O,V,w,y,D,W,j,G,ce,x,le,J,ge,K,Z=n[0]!=="all"&&Mn(n);function se($,z){return $[12]()?Yl:Gl}let re=se(n)(n),ee=n[4]&&Fn(n),L=n[1].runners.length===0&&Un();return J=ht(n[17][0]),{c(){e=m("div"),t=m("div"),i=m("h2"),i.textContent="Share & Export",l=k(),s=m("div"),o=F("Session: "),c=F(u),a=k(),d=m("div"),p=m("h3"),p.textContent="What would you like to share?",f=k(),g=m("div"),_=m("label"),v=m("input"),S=k(),b=m("div"),b.innerHTML='<div class="option-title svelte-1e4sey9">ðŸ“¦ Complete Session</div> <div class="option-description svelte-1e4sey9">All teams, runners, and timing data</div>',E=k(),R=m("label"),T=m("input"),A=k(),M=m("div"),M.innerHTML='<div class="option-title svelte-1e4sey9">ðŸ‘¥ Team Data</div> <div class="option-description svelte-1e4sey9">All runners and times for a specific team</div>',C=k(),I=m("label"),N=m("input"),O=k(),V=m("div"),V.innerHTML='<div class="option-title svelte-1e4sey9">ðŸ“ Single Checkpoint</div> <div class="option-description svelte-1e4sey9">Times for one team at one checkpoint in a race</div>',w=k(),y=m("label"),D=m("input"),W=k(),j=m("div"),j.innerHTML='<div class="option-title svelte-1e4sey9">ðŸ Full Race</div> <div class="option-description svelte-1e4sey9">All checkpoints for one team in a specific race</div>',G=k(),Z&&Z.c(),ce=k(),re.c(),x=k(),ee&&ee.c(),le=k(),L&&L.c(),h(i,"class","svelte-1e4sey9"),h(s,"class","session-info svelte-1e4sey9"),h(t,"class","header svelte-1e4sey9"),h(p,"class","svelte-1e4sey9"),h(v,"type","radio"),v.__value="all",ie(v,v.__value),h(v,"class","svelte-1e4sey9"),h(b,"class","option-content svelte-1e4sey9"),h(_,"class","mode-option svelte-1e4sey9"),h(T,"type","radio"),T.__value="team",ie(T,T.__value),h(T,"class","svelte-1e4sey9"),h(M,"class","option-content svelte-1e4sey9"),h(R,"class","mode-option svelte-1e4sey9"),h(N,"type","radio"),N.__value="checkpoint",ie(N,N.__value),h(N,"class","svelte-1e4sey9"),h(V,"class","option-content svelte-1e4sey9"),h(I,"class","mode-option svelte-1e4sey9"),h(D,"type","radio"),D.__value="race",ie(D,D.__value),h(D,"class","svelte-1e4sey9"),h(j,"class","option-content svelte-1e4sey9"),h(y,"class","mode-option svelte-1e4sey9"),h(g,"class","mode-options svelte-1e4sey9"),h(d,"class","share-mode-section svelte-1e4sey9"),h(e,"class","share-container svelte-1e4sey9"),J.p(v,T,N,D)},m($,z){H($,e,z),r(e,t),r(t,i),r(t,l),r(t,s),r(s,o),r(s,c),r(e,a),r(e,d),r(d,p),r(d,f),r(d,g),r(g,_),r(_,v),v.checked=v.__value===n[0],r(_,S),r(_,b),r(g,E),r(g,R),r(R,T),T.checked=T.__value===n[0],r(R,A),r(R,M),r(g,C),r(g,I),r(I,N),N.checked=N.__value===n[0],r(I,O),r(I,V),r(g,w),r(g,y),r(y,D),D.checked=D.__value===n[0],r(y,W),r(y,j),r(e,G),Z&&Z.m(e,null),r(e,ce),re.m(e,null),r(e,x),ee&&ee.m(e,null),r(e,le),L&&L.m(e,null),ge||(K=[Q(v,"change",n[16]),Q(T,"change",n[18]),Q(N,"change",n[19]),Q(D,"change",n[20])],ge=!0)},p($,z){z[0]&2&&u!==(u=$[1].name+"")&&Y(c,u),z[0]&1&&(v.checked=v.__value===$[0]),z[0]&1&&(T.checked=T.__value===$[0]),z[0]&1&&(N.checked=N.__value===$[0]),z[0]&1&&(D.checked=D.__value===$[0]),$[0]!=="all"?Z?Z.p($,z):(Z=Mn($),Z.c(),Z.m(e,ce)):Z&&(Z.d(1),Z=null),re.p($,z),$[4]?ee?ee.p($,z):(ee=Fn($),ee.c(),ee.m(e,le)):ee&&(ee.d(1),ee=null),$[1].runners.length===0?L||(L=Un(),L.c(),L.m(e,null)):L&&(L.d(1),L=null)},i:fe,o:fe,d($){$&&q(e),Z&&Z.d(),re.d(),ee&&ee.d(),L&&L.d(),J.r(),ge=!1,_e(K)}}}function Xl(n,e,t){let i,l,s;Ae(n,ve,w=>t(1,s=w));let o="",u=!1,c="",a="all",d="",p="",f="";function g(){let w=[],y=[],D=[];switch(a){case"all":return s;case"team":if(!d)return{...s,runners:[],times:[],teams:[]};const W=s.teams.find(J=>J.id===d);W&&(D=[W]),w=s.runners.filter(J=>J.teamId===d);const j=new Set(w.map(J=>J.id));y=s.times.filter(J=>j.has(J.runnerId));break;case"checkpoint":if(!d||!p||!f)return{...s,runners:[],times:[],teams:[]};const G=s.teams.find(J=>J.id===d);G&&(D=[G]),w=s.runners.filter(J=>J.teamId===d);const ce=new Set(w.map(J=>J.id));y=s.times.filter(J=>ce.has(J.runnerId)&&J.checkpoint===p&&J.raceName===f);break;case"race":if(!d||!f)return{...s,runners:[],times:[],teams:[]};const x=s.teams.find(J=>J.id===d);x&&(D=[x]),w=s.runners.filter(J=>J.teamId===d);const le=new Set(w.map(J=>J.id));y=s.times.filter(J=>le.has(J.runnerId)&&J.raceName===f);break}return{...s,teams:D,runners:w,times:y,name:_()}}function _(){const w=s.teams.find(D=>D.id===d),y=(w==null?void 0:w.name)||"Unknown Team";switch(a){case"all":return s.name;case"team":return`${y} - Team Data`;case"checkpoint":return`${y} - ${f} - ${p}`;case"race":return`${y} - ${f} - Full Race`;default:return s.name}}function v(){const w=s.teams.find(D=>D.id===d),y=(w==null?void 0:w.name)||"Unknown Team";switch(a){case"all":return`Complete session with ${s.teams.length} teams, ${s.runners.length} runners, and ${s.times.length} times`;case"team":const D=s.runners.filter(ce=>ce.teamId===d),W=s.times.filter(ce=>D.some(x=>x.id===ce.runnerId));return`${y}: ${D.length} runners with ${W.length} recorded times`;case"checkpoint":const j=g().times.length;return`${y} - ${f} at ${p}: ${j} times`;case"race":const G=g().times.length;return`${y} - ${f}: ${G} times across all checkpoints`;default:return""}}function S(){switch(a){case"all":return!0;case"team":return!!d;case"checkpoint":return!!(d&&p&&f);case"race":return!!(d&&f);default:return!1}}async function b(){if(!S())return;t(4,c="Sharing...");const w=g(),y=await zl(w);t(4,c=y?"Shared successfully!":"Share failed, data copied to clipboard"),setTimeout(()=>t(4,c=""),3e3)}async function E(){if(!(u||!S())){t(3,u=!0);try{const w=g();t(2,o=await Jl(w))}catch(w){console.error("Failed to generate QR code:",w),t(4,c="Failed to generate QR code"),setTimeout(()=>t(4,c=""),3e3)}finally{t(3,u=!1)}}}function R(){if(!S())return;const w=g();Kl(w),t(4,c="File downloaded!"),setTimeout(()=>t(4,c=""),3e3)}const T=[[]];function A(){a=this.__value,t(0,a)}function M(){a=this.__value,t(0,a)}function C(){a=this.__value,t(0,a)}function I(){a=this.__value,t(0,a)}function N(){d=Ue(this),t(5,d),t(0,a)}function O(){f=Ue(this),t(7,f),t(0,a),t(9,i),t(1,s)}function V(){p=Ue(this),t(6,p),t(0,a),t(8,l),t(1,s)}return n.$$.update=()=>{n.$$.dirty[0]&2&&t(9,i=[...new Set(s.times.map(w=>w.raceName).filter(Boolean))]),n.$$.dirty[0]&2&&t(8,l=s.unit==="km"?["1K","2K","3K","4K","5K"]:["1M","2M","3M","3.1M"]),n.$$.dirty[0]&1&&a&&(t(5,d=""),t(6,p=""),t(7,f=""),t(2,o=""))},[a,s,o,u,c,d,p,f,l,i,_,v,S,b,E,R,A,T,M,C,I,N,O,V]}class xl extends Ge{constructor(e){super(),We(this,e,Xl,Zl,Be,{},null,[-1,-1])}}const es="modulepreload",ts=function(n){return"/cross-country-timer/"+n},qn={},ns=function(e,t,i){let l=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),u=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));l=Promise.allSettled(t.map(c=>{if(c=ts(c),c in qn)return;qn[c]=!0;const a=c.endsWith(".css"),d=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const p=document.createElement("link");if(p.rel=a?"stylesheet":es,a||(p.as="script"),p.crossOrigin="",p.href=c,u&&p.setAttribute("nonce",u),document.head.appendChild(p),a)return new Promise((f,g)=>{p.addEventListener("load",f),p.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=o,window.dispatchEvent(u),!u.defaultPrevented)throw o}return l.then(o=>{for(const u of o||[])u.status==="rejected"&&s(u.reason);return e().catch(s)})};class ne{constructor(e,t,i,l,s){this._legacyCanvasSize=ne.DEFAULT_CANVAS_SIZE,this._preferredCamera="environment",this._maxScansPerSecond=25,this._lastScanTimestamp=-1,this._destroyed=this._flashOn=this._paused=this._active=!1,this.$video=e,this.$canvas=document.createElement("canvas"),i&&typeof i=="object"?this._onDecode=t:(console.warn(i||l||s?"You're using a deprecated version of the QrScanner constructor which will be removed in the future":"Note that the type of the scan result passed to onDecode will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),this._legacyOnDecode=t),t=typeof i=="object"?i:{},this._onDecodeError=t.onDecodeError||(typeof i=="function"?i:this._onDecodeError),this._calculateScanRegion=t.calculateScanRegion||(typeof l=="function"?l:this._calculateScanRegion),this._preferredCamera=t.preferredCamera||s||this._preferredCamera,this._legacyCanvasSize=typeof i=="number"?i:typeof l=="number"?l:this._legacyCanvasSize,this._maxScansPerSecond=t.maxScansPerSecond||this._maxScansPerSecond,this._onPlay=this._onPlay.bind(this),this._onLoadedMetaData=this._onLoadedMetaData.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this._updateOverlay=this._updateOverlay.bind(this),e.disablePictureInPicture=!0,e.playsInline=!0,e.muted=!0;let o=!1;if(e.hidden&&(e.hidden=!1,o=!0),document.body.contains(e)||(document.body.appendChild(e),o=!0),i=e.parentElement,t.highlightScanRegion||t.highlightCodeOutline){if(l=!!t.overlay,this.$overlay=t.overlay||document.createElement("div"),s=this.$overlay.style,s.position="absolute",s.display="none",s.pointerEvents="none",this.$overlay.classList.add("scan-region-highlight"),!l&&t.highlightScanRegion){this.$overlay.innerHTML='<svg class="scan-region-highlight-svg" viewBox="0 0 238 238" preserveAspectRatio="none" style="position:absolute;width:100%;height:100%;left:0;top:0;fill:none;stroke:#e9b213;stroke-width:4;stroke-linecap:round;stroke-linejoin:round"><path d="M31 2H10a8 8 0 0 0-8 8v21M207 2h21a8 8 0 0 1 8 8v21m0 176v21a8 8 0 0 1-8 8h-21m-176 0H10a8 8 0 0 1-8-8v-21"/></svg>';try{this.$overlay.firstElementChild.animate({transform:["scale(.98)","scale(1.01)"]},{duration:400,iterations:1/0,direction:"alternate",easing:"ease-in-out"})}catch{}i.insertBefore(this.$overlay,this.$video.nextSibling)}t.highlightCodeOutline&&(this.$overlay.insertAdjacentHTML("beforeend",'<svg class="code-outline-highlight" preserveAspectRatio="none" style="display:none;width:100%;height:100%;fill:none;stroke:#e9b213;stroke-width:5;stroke-dasharray:25;stroke-linecap:round;stroke-linejoin:round"><polygon/></svg>'),this.$codeOutlineHighlight=this.$overlay.lastElementChild)}this._scanRegion=this._calculateScanRegion(e),requestAnimationFrame(()=>{let u=window.getComputedStyle(e);u.display==="none"&&(e.style.setProperty("display","block","important"),o=!0),u.visibility!=="visible"&&(e.style.setProperty("visibility","visible","important"),o=!0),o&&(console.warn("QrScanner has overwritten the video hiding style to avoid Safari stopping the playback."),e.style.opacity="0",e.style.width="0",e.style.height="0",this.$overlay&&this.$overlay.parentElement&&this.$overlay.parentElement.removeChild(this.$overlay),delete this.$overlay,delete this.$codeOutlineHighlight),this.$overlay&&this._updateOverlay()}),e.addEventListener("play",this._onPlay),e.addEventListener("loadedmetadata",this._onLoadedMetaData),document.addEventListener("visibilitychange",this._onVisibilityChange),window.addEventListener("resize",this._updateOverlay),this._qrEnginePromise=ne.createQrEngine()}static set WORKER_PATH(e){console.warn("Setting QrScanner.WORKER_PATH is not required and not supported anymore. Have a look at the README for new setup instructions.")}static async hasCamera(){try{return!!(await ne.listCameras(!1)).length}catch{return!1}}static async listCameras(e=!1){if(!navigator.mediaDevices)return[];let t=async()=>(await navigator.mediaDevices.enumerateDevices()).filter(l=>l.kind==="videoinput"),i;try{e&&(await t()).every(l=>!l.label)&&(i=await navigator.mediaDevices.getUserMedia({audio:!1,video:!0}))}catch{}try{return(await t()).map((l,s)=>({id:l.deviceId,label:l.label||(s===0?"Default Camera":`Camera ${s+1}`)}))}finally{i&&(console.warn("Call listCameras after successfully starting a QR scanner to avoid creating a temporary video stream"),ne._stopVideoStream(i))}}async hasFlash(){let e;try{if(this.$video.srcObject){if(!(this.$video.srcObject instanceof MediaStream))return!1;e=this.$video.srcObject}else e=(await this._getCameraStream()).stream;return"torch"in e.getVideoTracks()[0].getSettings()}catch{return!1}finally{e&&e!==this.$video.srcObject&&(console.warn("Call hasFlash after successfully starting the scanner to avoid creating a temporary video stream"),ne._stopVideoStream(e))}}isFlashOn(){return this._flashOn}async toggleFlash(){this._flashOn?await this.turnFlashOff():await this.turnFlashOn()}async turnFlashOn(){if(!this._flashOn&&!this._destroyed&&(this._flashOn=!0,this._active&&!this._paused))try{if(!await this.hasFlash())throw"No flash available";await this.$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:!0}]})}catch(e){throw this._flashOn=!1,e}}async turnFlashOff(){this._flashOn&&(this._flashOn=!1,await this._restartVideoStream())}destroy(){this.$video.removeEventListener("loadedmetadata",this._onLoadedMetaData),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),window.removeEventListener("resize",this._updateOverlay),this._destroyed=!0,this._flashOn=!1,this.stop(),ne._postWorkerMessage(this._qrEnginePromise,"close")}async start(){if(this._destroyed)throw Error("The QR scanner can not be started as it had been destroyed.");if((!this._active||this._paused)&&(window.location.protocol!=="https:"&&console.warn("The camera stream is only accessible if the page is transferred via https."),this._active=!0,!document.hidden))if(this._paused=!1,this.$video.srcObject)await this.$video.play();else try{let{stream:e,facingMode:t}=await this._getCameraStream();!this._active||this._paused?ne._stopVideoStream(e):(this._setVideoMirror(t),this.$video.srcObject=e,await this.$video.play(),this._flashOn&&(this._flashOn=!1,this.turnFlashOn().catch(()=>{})))}catch(e){if(!this._paused)throw this._active=!1,e}}stop(){this.pause(),this._active=!1}async pause(e=!1){if(this._paused=!0,!this._active)return!0;this.$video.pause(),this.$overlay&&(this.$overlay.style.display="none");let t=()=>{this.$video.srcObject instanceof MediaStream&&(ne._stopVideoStream(this.$video.srcObject),this.$video.srcObject=null)};return e?(t(),!0):(await new Promise(i=>setTimeout(i,300)),this._paused?(t(),!0):!1)}async setCamera(e){e!==this._preferredCamera&&(this._preferredCamera=e,await this._restartVideoStream())}static async scanImage(e,t,i,l,s=!1,o=!1){let u,c=!1;t&&("scanRegion"in t||"qrEngine"in t||"canvas"in t||"disallowCanvasResizing"in t||"alsoTryWithoutScanRegion"in t||"returnDetailedScanResult"in t)?(u=t.scanRegion,i=t.qrEngine,l=t.canvas,s=t.disallowCanvasResizing||!1,o=t.alsoTryWithoutScanRegion||!1,c=!0):console.warn(t||i||l||s||o?"You're using a deprecated api for scanImage which will be removed in the future.":"Note that the return type of scanImage will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),t=!!i;try{let a,d;[i,a]=await Promise.all([i||ne.createQrEngine(),ne._loadImage(e)]),[l,d]=ne._drawToCanvas(a,u,l,s);let p;if(i instanceof Worker){let f=i;t||ne._postWorkerMessageSync(f,"inversionMode","both"),p=await new Promise((g,_)=>{let v,S,b,E=-1;S=T=>{T.data.id===E&&(f.removeEventListener("message",S),f.removeEventListener("error",b),clearTimeout(v),T.data.data!==null?g({data:T.data.data,cornerPoints:ne._convertPoints(T.data.cornerPoints,u)}):_(ne.NO_QR_CODE_FOUND))},b=T=>{f.removeEventListener("message",S),f.removeEventListener("error",b),clearTimeout(v),_("Scanner error: "+(T?T.message||T:"Unknown Error"))},f.addEventListener("message",S),f.addEventListener("error",b),v=setTimeout(()=>b("timeout"),1e4);let R=d.getImageData(0,0,l.width,l.height);E=ne._postWorkerMessageSync(f,"decode",R,[R.data.buffer])})}else p=await Promise.race([new Promise((f,g)=>window.setTimeout(()=>g("Scanner error: timeout"),1e4)),(async()=>{try{var[f]=await i.detect(l);if(!f)throw ne.NO_QR_CODE_FOUND;return{data:f.rawValue,cornerPoints:ne._convertPoints(f.cornerPoints,u)}}catch(g){if(f=g.message||g,/not implemented|service unavailable/.test(f))return ne._disableBarcodeDetector=!0,ne.scanImage(e,{scanRegion:u,canvas:l,disallowCanvasResizing:s,alsoTryWithoutScanRegion:o});throw`Scanner error: ${f}`}})()]);return c?p:p.data}catch(a){if(!u||!o)throw a;let d=await ne.scanImage(e,{qrEngine:i,canvas:l,disallowCanvasResizing:s});return c?d:d.data}finally{t||ne._postWorkerMessage(i,"close")}}setGrayscaleWeights(e,t,i,l=!0){ne._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:e,green:t,blue:i,useIntegerApproximation:l})}setInversionMode(e){ne._postWorkerMessage(this._qrEnginePromise,"inversionMode",e)}static async createQrEngine(e){if(e&&console.warn("Specifying a worker path is not required and not supported anymore."),e=()=>ns(()=>import("./qr-scanner-worker.min-D85Z9gVD.js"),[]).then(i=>i.createWorker()),!(!ne._disableBarcodeDetector&&"BarcodeDetector"in window&&BarcodeDetector.getSupportedFormats&&(await BarcodeDetector.getSupportedFormats()).includes("qr_code")))return e();let t=navigator.userAgentData;return t&&t.brands.some(({brand:i})=>/Chromium/i.test(i))&&/mac ?OS/i.test(t.platform)&&await t.getHighEntropyValues(["architecture","platformVersion"]).then(({architecture:i,platformVersion:l})=>/arm/i.test(i||"arm")&&13<=parseInt(l||"13")).catch(()=>!0)?e():new BarcodeDetector({formats:["qr_code"]})}_onPlay(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay(),this.$overlay&&(this.$overlay.style.display=""),this._scanFrame()}_onLoadedMetaData(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay()}_onVisibilityChange(){document.hidden?this.pause():this._active&&this.start()}_calculateScanRegion(e){let t=Math.round(.6666666666666666*Math.min(e.videoWidth,e.videoHeight));return{x:Math.round((e.videoWidth-t)/2),y:Math.round((e.videoHeight-t)/2),width:t,height:t,downScaledWidth:this._legacyCanvasSize,downScaledHeight:this._legacyCanvasSize}}_updateOverlay(){requestAnimationFrame(()=>{if(this.$overlay){var e=this.$video,t=e.videoWidth,i=e.videoHeight,l=e.offsetWidth,s=e.offsetHeight,o=e.offsetLeft,u=e.offsetTop,c=window.getComputedStyle(e),a=c.objectFit,d=t/i,p=l/s;switch(a){case"none":var f=t,g=i;break;case"fill":f=l,g=s;break;default:(a==="cover"?d>p:d<p)?(g=s,f=g*d):(f=l,g=f/d),a==="scale-down"&&(f=Math.min(f,t),g=Math.min(g,i))}var[_,v]=c.objectPosition.split(" ").map((b,E)=>{const R=parseFloat(b);return b.endsWith("%")?(E?s-g:l-f)*R/100:R});c=this._scanRegion.width||t,p=this._scanRegion.height||i,a=this._scanRegion.x||0;var S=this._scanRegion.y||0;d=this.$overlay.style,d.width=`${c/t*f}px`,d.height=`${p/i*g}px`,d.top=`${u+v+S/i*g}px`,i=/scaleX\(-1\)/.test(e.style.transform),d.left=`${o+(i?l-_-f:_)+(i?t-a-c:a)/t*f}px`,d.transform=e.style.transform}})}static _convertPoints(e,t){if(!t)return e;let i=t.x||0,l=t.y||0,s=t.width&&t.downScaledWidth?t.width/t.downScaledWidth:1;t=t.height&&t.downScaledHeight?t.height/t.downScaledHeight:1;for(let o of e)o.x=o.x*s+i,o.y=o.y*t+l;return e}_scanFrame(){!this._active||this.$video.paused||this.$video.ended||("requestVideoFrameCallback"in this.$video?this.$video.requestVideoFrameCallback.bind(this.$video):requestAnimationFrame)(async()=>{if(!(1>=this.$video.readyState)){var e=Date.now()-this._lastScanTimestamp,t=1e3/this._maxScansPerSecond;e<t&&await new Promise(l=>setTimeout(l,t-e)),this._lastScanTimestamp=Date.now();try{var i=await ne.scanImage(this.$video,{scanRegion:this._scanRegion,qrEngine:this._qrEnginePromise,canvas:this.$canvas})}catch(l){if(!this._active)return;this._onDecodeError(l)}!ne._disableBarcodeDetector||await this._qrEnginePromise instanceof Worker||(this._qrEnginePromise=ne.createQrEngine()),i?(this._onDecode?this._onDecode(i):this._legacyOnDecode&&this._legacyOnDecode(i.data),this.$codeOutlineHighlight&&(clearTimeout(this._codeOutlineHighlightRemovalTimeout),this._codeOutlineHighlightRemovalTimeout=void 0,this.$codeOutlineHighlight.setAttribute("viewBox",`${this._scanRegion.x||0} ${this._scanRegion.y||0} ${this._scanRegion.width||this.$video.videoWidth} ${this._scanRegion.height||this.$video.videoHeight}`),this.$codeOutlineHighlight.firstElementChild.setAttribute("points",i.cornerPoints.map(({x:l,y:s})=>`${l},${s}`).join(" ")),this.$codeOutlineHighlight.style.display="")):this.$codeOutlineHighlight&&!this._codeOutlineHighlightRemovalTimeout&&(this._codeOutlineHighlightRemovalTimeout=setTimeout(()=>this.$codeOutlineHighlight.style.display="none",100))}this._scanFrame()})}_onDecodeError(e){e!==ne.NO_QR_CODE_FOUND&&console.log(e)}async _getCameraStream(){if(!navigator.mediaDevices)throw"Camera not found.";let e=/^(environment|user)$/.test(this._preferredCamera)?"facingMode":"deviceId",t=[{width:{min:1024}},{width:{min:768}},{}],i=t.map(l=>Object.assign({},l,{[e]:{exact:this._preferredCamera}}));for(let l of[...i,...t])try{let s=await navigator.mediaDevices.getUserMedia({video:l,audio:!1}),o=this._getFacingMode(s)||(l.facingMode?this._preferredCamera:this._preferredCamera==="environment"?"user":"environment");return{stream:s,facingMode:o}}catch{}throw"Camera not found."}async _restartVideoStream(){let e=this._paused;await this.pause(!0)&&!e&&this._active&&await this.start()}static _stopVideoStream(e){for(let t of e.getTracks())t.stop(),e.removeTrack(t)}_setVideoMirror(e){this.$video.style.transform="scaleX("+(e==="user"?-1:1)+")"}_getFacingMode(e){return(e=e.getVideoTracks()[0])?/rear|back|environment/i.test(e.label)?"environment":/front|user|face/i.test(e.label)?"user":null:null}static _drawToCanvas(e,t,i,l=!1){i=i||document.createElement("canvas");let s=t&&t.x?t.x:0,o=t&&t.y?t.y:0,u=t&&t.width?t.width:e.videoWidth||e.width,c=t&&t.height?t.height:e.videoHeight||e.height;return l||(l=t&&t.downScaledWidth?t.downScaledWidth:u,t=t&&t.downScaledHeight?t.downScaledHeight:c,i.width!==l&&(i.width=l),i.height!==t&&(i.height=t)),t=i.getContext("2d",{alpha:!1}),t.imageSmoothingEnabled=!1,t.drawImage(e,s,o,u,c,0,0,i.width,i.height),[i,t]}static async _loadImage(e){if(e instanceof Image)return await ne._awaitImageLoad(e),e;if(e instanceof HTMLVideoElement||e instanceof HTMLCanvasElement||e instanceof SVGImageElement||"OffscreenCanvas"in window&&e instanceof OffscreenCanvas||"ImageBitmap"in window&&e instanceof ImageBitmap)return e;if(e instanceof File||e instanceof Blob||e instanceof URL||typeof e=="string"){let t=new Image;t.src=e instanceof File||e instanceof Blob?URL.createObjectURL(e):e.toString();try{return await ne._awaitImageLoad(t),t}finally{(e instanceof File||e instanceof Blob)&&URL.revokeObjectURL(t.src)}}else throw"Unsupported image type."}static async _awaitImageLoad(e){e.complete&&e.naturalWidth!==0||await new Promise((t,i)=>{let l=s=>{e.removeEventListener("load",l),e.removeEventListener("error",l),s instanceof ErrorEvent?i("Image load error"):t()};e.addEventListener("load",l),e.addEventListener("error",l)})}static async _postWorkerMessage(e,t,i,l){return ne._postWorkerMessageSync(await e,t,i,l)}static _postWorkerMessageSync(e,t,i,l){if(!(e instanceof Worker))return-1;let s=ne._workerMessageId++;return e.postMessage({id:s,type:t,data:i},l),s}}ne.DEFAULT_CANVAS_SIZE=400;ne.NO_QR_CODE_FOUND="No QR code found";ne._disableBarcodeDetector=!1;ne._workerMessageId=0;function Hn(n,e,t){const i=n.slice();return i[42]=e[t],i}function $n(n,e,t){const i=n.slice();return i[45]=e[t],i}function is(n){var ee;let e,t,i,l,s,o,u=(((ee=n[7])==null?void 0:ee.name)||"Imported Session")+"",c,a,d,p=n[20]()+"",f,g,_,v,S,b,E,R,T,A,M,C,I,N,O,V,w,y,D,W,j,G,ce,x,le,J,ge=n[6]==="replace"?"Replace Data":"Import Data",K,Z,se,ue,re=n[6]==="selective"&&Vn(n);return Z=ht(n[26][2]),{c(){e=m("div"),t=m("div"),i=m("h3"),i.textContent="Import Preview",l=k(),s=m("div"),o=m("strong"),c=F(u),a=m("br"),d=k(),f=F(p),g=k(),_=m("div"),v=m("h4"),v.textContent="How would you like to import this data?",S=k(),b=m("div"),E=m("label"),R=m("input"),T=k(),A=m("div"),A.innerHTML='<div class="option-title svelte-1xicnd3">ðŸ”„ Merge</div> <div class="option-description svelte-1xicnd3">Combine with existing data (recommended)</div>',M=k(),C=m("label"),I=m("input"),N=k(),O=m("div"),O.innerHTML='<div class="option-title svelte-1xicnd3">ðŸŽ¯ Selective</div> <div class="option-description svelte-1xicnd3">Choose specific teams, races, or data types</div>',V=k(),w=m("label"),y=m("input"),D=k(),W=m("div"),W.innerHTML='<div class="option-title svelte-1xicnd3">âš ï¸ Replace All</div> <div class="option-description svelte-1xicnd3">Replace all current data (destructive)</div>',j=k(),re&&re.c(),G=k(),ce=m("div"),x=m("button"),x.textContent="Cancel",le=k(),J=m("button"),K=F(ge),h(i,"class","svelte-1xicnd3"),h(s,"class","preview-summary svelte-1xicnd3"),h(t,"class","preview-header svelte-1xicnd3"),h(v,"class","svelte-1xicnd3"),h(R,"type","radio"),R.__value="merge",ie(R,R.__value),h(R,"class","svelte-1xicnd3"),h(A,"class","option-content svelte-1xicnd3"),h(E,"class","mode-option svelte-1xicnd3"),h(I,"type","radio"),I.__value="selective",ie(I,I.__value),h(I,"class","svelte-1xicnd3"),h(O,"class","option-content svelte-1xicnd3"),h(C,"class","mode-option svelte-1xicnd3"),h(y,"type","radio"),y.__value="replace",ie(y,y.__value),h(y,"class","svelte-1xicnd3"),h(W,"class","option-content svelte-1xicnd3"),h(w,"class","mode-option svelte-1xicnd3"),h(b,"class","mode-options svelte-1xicnd3"),h(_,"class","import-mode-section svelte-1xicnd3"),h(x,"class","action-btn secondary svelte-1xicnd3"),h(J,"class","action-btn primary svelte-1xicnd3"),h(ce,"class","preview-actions svelte-1xicnd3"),h(e,"class","preview-section svelte-1xicnd3"),Z.p(R,I,y)},m(L,$){H(L,e,$),r(e,t),r(t,i),r(t,l),r(t,s),r(s,o),r(o,c),r(s,a),r(s,d),r(s,f),r(e,g),r(e,_),r(_,v),r(_,S),r(_,b),r(b,E),r(E,R),R.checked=R.__value===n[6],r(E,T),r(E,A),r(b,M),r(b,C),r(C,I),I.checked=I.__value===n[6],r(C,N),r(C,O),r(b,V),r(b,w),r(w,y),y.checked=y.__value===n[6],r(w,D),r(w,W),r(e,j),re&&re.m(e,null),r(e,G),r(e,ce),r(ce,x),r(ce,le),r(ce,J),r(J,K),se||(ue=[Q(R,"change",n[25]),Q(I,"change",n[27]),Q(y,"change",n[28]),Q(x,"click",n[19]),Q(J,"click",n[18])],se=!0)},p(L,$){var z;$[0]&128&&u!==(u=(((z=L[7])==null?void 0:z.name)||"Imported Session")+"")&&Y(c,u),$[0]&64&&(R.checked=R.__value===L[6]),$[0]&64&&(I.checked=I.__value===L[6]),$[0]&64&&(y.checked=y.__value===L[6]),L[6]==="selective"?re?re.p(L,$):(re=Vn(L),re.c(),re.m(e,G)):re&&(re.d(1),re=null),$[0]&64&&ge!==(ge=L[6]==="replace"?"Replace Data":"Import Data")&&Y(K,ge)},d(L){L&&q(e),re&&re.d(),Z.r(),se=!1,_e(ue)}}}function ls(n){let e,t,i,l,s,o,u,c,a,d,p,f,g,_,v,S,b,E,R,T,A,M,C,I;function N(w,y){return w[5]?w[4]?w[2]?ss:os:rs:as}let O=N(n),V=O(n);return{c(){e=m("div"),t=m("div"),i=m("h3"),i.textContent="ðŸ“± Scan QR Code",l=k(),s=m("p"),s.textContent="Scan a QR code generated by another timer device",o=k(),V.c(),u=k(),c=m("div"),a=m("h3"),a.textContent="ðŸ“ Upload File",d=k(),p=m("p"),p.textContent="Import timing data from a JSON backup file",f=k(),g=m("input"),_=k(),v=m("label"),v.textContent="ðŸ“‚ Choose File",S=k(),b=m("div"),E=m("h3"),E.textContent="ðŸ”„ Manual Import",R=k(),T=m("p"),T.textContent="Paste JSON data directly",A=k(),M=m("textarea"),h(i,"class","svelte-1xicnd3"),h(s,"class","svelte-1xicnd3"),h(t,"class","method-card svelte-1xicnd3"),h(a,"class","svelte-1xicnd3"),h(p,"class","svelte-1xicnd3"),h(g,"type","file"),h(g,"accept",".json"),h(g,"class","file-input svelte-1xicnd3"),h(g,"id","file-upload"),h(v,"for","file-upload"),h(v,"class","method-btn secondary svelte-1xicnd3"),h(c,"class","method-card svelte-1xicnd3"),h(E,"class","svelte-1xicnd3"),h(T,"class","svelte-1xicnd3"),h(M,"placeholder","Paste JSON data here..."),h(M,"class","json-input svelte-1xicnd3"),h(b,"class","method-card svelte-1xicnd3"),h(e,"class","import-methods svelte-1xicnd3")},m(w,y){H(w,e,y),r(e,t),r(t,i),r(t,l),r(t,s),r(t,o),V.m(t,null),r(e,u),r(e,c),r(c,a),r(c,d),r(c,p),r(c,f),r(c,g),n[23](g),r(c,_),r(c,v),r(e,S),r(e,b),r(b,E),r(b,R),r(b,T),r(b,A),r(b,M),C||(I=[Q(g,"change",n[16]),Q(M,"paste",n[24])],C=!0)},p(w,y){O===(O=N(w))&&V?V.p(w,y):(V.d(1),V=O(w),V&&(V.c(),V.m(t,null)))},d(w){w&&q(e),V.d(),n[23](null),C=!1,_e(I)}}}function Vn(n){var J,ge,K,Z,se,ue,re,ee;let e,t,i,l,s,o,u,c,a,d=(((ge=(J=n[7])==null?void 0:J.teams)==null?void 0:ge.length)||0)+"",p,f,g,_,v,S,b,E,R=(((Z=(K=n[7])==null?void 0:K.runners)==null?void 0:Z.length)||0)+"",T,A,M,C,I,N,O,V,w=(((ue=(se=n[7])==null?void 0:se.times)==null?void 0:ue.length)||0)+"",y,D,W,j,G,ce,x=n[9]&&((ee=(re=n[7])==null?void 0:re.teams)==null?void 0:ee.length)&&jn(n),le=n[11]&&n[13].length>0&&Qn(n);return{c(){e=m("div"),t=m("h4"),t.textContent="Select what to import:",i=k(),l=m("div"),s=m("label"),o=m("input"),u=k(),c=m("span"),a=F("Teams ("),p=F(d),f=F(")"),g=k(),_=m("label"),v=m("input"),S=k(),b=m("span"),E=F("Runners ("),T=F(R),A=F(")"),M=k(),C=m("label"),I=m("input"),N=k(),O=m("span"),V=F("Times ("),y=F(w),D=F(")"),W=k(),x&&x.c(),j=k(),le&&le.c(),h(t,"class","svelte-1xicnd3"),h(o,"type","checkbox"),h(o,"class","svelte-1xicnd3"),h(s,"class","checkbox-option svelte-1xicnd3"),h(v,"type","checkbox"),h(v,"class","svelte-1xicnd3"),h(_,"class","checkbox-option svelte-1xicnd3"),h(I,"type","checkbox"),h(I,"class","svelte-1xicnd3"),h(C,"class","checkbox-option svelte-1xicnd3"),h(l,"class","data-type-options svelte-1xicnd3"),h(e,"class","selective-options svelte-1xicnd3")},m(L,$){H(L,e,$),r(e,t),r(e,i),r(e,l),r(l,s),r(s,o),o.checked=n[9],r(s,u),r(s,c),r(c,a),r(c,p),r(c,f),r(l,g),r(l,_),r(_,v),v.checked=n[10],r(_,S),r(_,b),r(b,E),r(b,T),r(b,A),r(l,M),r(l,C),r(C,I),I.checked=n[11],r(C,N),r(C,O),r(O,V),r(O,y),r(O,D),r(e,W),x&&x.m(e,null),r(e,j),le&&le.m(e,null),G||(ce=[Q(o,"change",n[29]),Q(v,"change",n[30]),Q(I,"change",n[31])],G=!0)},p(L,$){var z,te,pe,ae,X,U,B,P;$[0]&512&&(o.checked=L[9]),$[0]&128&&d!==(d=(((te=(z=L[7])==null?void 0:z.teams)==null?void 0:te.length)||0)+"")&&Y(p,d),$[0]&1024&&(v.checked=L[10]),$[0]&128&&R!==(R=(((ae=(pe=L[7])==null?void 0:pe.runners)==null?void 0:ae.length)||0)+"")&&Y(T,R),$[0]&2048&&(I.checked=L[11]),$[0]&128&&w!==(w=(((U=(X=L[7])==null?void 0:X.times)==null?void 0:U.length)||0)+"")&&Y(y,w),L[9]&&((P=(B=L[7])==null?void 0:B.teams)!=null&&P.length)?x?x.p(L,$):(x=jn(L),x.c(),x.m(e,j)):x&&(x.d(1),x=null),L[11]&&L[13].length>0?le?le.p(L,$):(le=Qn(L),le.c(),le.m(e,null)):le&&(le.d(1),le=null)},d(L){L&&q(e),x&&x.d(),le&&le.d(),G=!1,_e(ce)}}}function jn(n){let e,t,i,l,s=de(n[7].teams),o=[];for(let u=0;u<s.length;u+=1)o[u]=zn($n(n,s,u));return{c(){e=m("div"),t=m("h5"),t.textContent="Select Teams:",i=k(),l=m("div");for(let u=0;u<o.length;u+=1)o[u].c();h(t,"class","svelte-1xicnd3"),h(l,"class","team-checkboxes svelte-1xicnd3"),h(e,"class","selection-group svelte-1xicnd3")},m(u,c){H(u,e,c),r(e,t),r(e,i),r(e,l);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(l,null)},p(u,c){if(c[0]&4224){s=de(u[7].teams);let a;for(a=0;a<s.length;a+=1){const d=$n(u,s,a);o[a]?o[a].p(d,c):(o[a]=zn(d),o[a].c(),o[a].m(l,null))}for(;a<o.length;a+=1)o[a].d(1);o.length=s.length}},d(u){u&&q(e),Me(o,u)}}}function zn(n){let e,t,i,l=!1,s,o,u=n[45].name+"",c,a,d,p,f;return d=ht(n[26][1]),{c(){e=m("label"),t=m("input"),s=k(),o=m("span"),c=F(u),a=k(),h(t,"type","checkbox"),t.__value=i=n[45].id,ie(t,t.__value),h(t,"class","svelte-1xicnd3"),be(o,"color",n[45].color),h(e,"class","checkbox-option svelte-1xicnd3"),d.p(t)},m(g,_){H(g,e,_),r(e,t),t.checked=~(n[12]||[]).indexOf(t.__value),r(e,s),r(e,o),r(o,c),r(e,a),p||(f=Q(t,"change",n[32]),p=!0)},p(g,_){_[0]&128&&i!==(i=g[45].id)&&(t.__value=i,ie(t,t.__value),l=!0),(l||_[0]&4224)&&(t.checked=~(g[12]||[]).indexOf(t.__value)),_[0]&128&&u!==(u=g[45].name+"")&&Y(c,u),_[0]&128&&be(o,"color",g[45].color)},d(g){g&&q(e),d.r(),p=!1,f()}}}function Qn(n){var u,c;let e,t,i,l,s=de([...new Set((c=(u=n[7])==null?void 0:u.times)==null?void 0:c.map(Gn).filter(Boolean))]),o=[];for(let a=0;a<s.length;a+=1)o[a]=Jn(Hn(n,s,a));return{c(){e=m("div"),t=m("h5"),t.textContent="Select Races:",i=k(),l=m("div");for(let a=0;a<o.length;a+=1)o[a].c();h(t,"class","svelte-1xicnd3"),h(l,"class","race-checkboxes svelte-1xicnd3"),h(e,"class","selection-group svelte-1xicnd3")},m(a,d){H(a,e,d),r(e,t),r(e,i),r(e,l);for(let p=0;p<o.length;p+=1)o[p]&&o[p].m(l,null)},p(a,d){var p,f;if(d[0]&8320){s=de([...new Set((f=(p=a[7])==null?void 0:p.times)==null?void 0:f.map(Gn).filter(Boolean))]);let g;for(g=0;g<s.length;g+=1){const _=Hn(a,s,g);o[g]?o[g].p(_,d):(o[g]=Jn(_),o[g].c(),o[g].m(l,null))}for(;g<o.length;g+=1)o[g].d(1);o.length=s.length}},d(a){a&&q(e),Me(o,a)}}}function Jn(n){let e,t,i,l=!1,s,o,u=n[42]+"",c,a,d,p,f;return d=ht(n[26][0]),{c(){e=m("label"),t=m("input"),s=k(),o=m("span"),c=F(u),a=k(),h(t,"type","checkbox"),t.__value=i=n[42],ie(t,t.__value),h(t,"class","svelte-1xicnd3"),h(e,"class","checkbox-option svelte-1xicnd3"),d.p(t)},m(g,_){H(g,e,_),r(e,t),t.checked=~(n[13]||[]).indexOf(t.__value),r(e,s),r(e,o),r(o,c),r(e,a),p||(f=Q(t,"change",n[33]),p=!0)},p(g,_){_[0]&128&&i!==(i=g[42])&&(t.__value=i,ie(t,t.__value),l=!0),(l||_[0]&8320)&&(t.checked=~(g[13]||[]).indexOf(t.__value)),_[0]&128&&u!==(u=g[42]+"")&&Y(c,u)},d(g){g&&q(e),d.r(),p=!1,f()}}}function ss(n){let e,t,i,l,s,o,u,c;return{c(){e=m("div"),t=m("video"),i=k(),l=m("button"),l.textContent="â¹ï¸ Stop Scanning",s=k(),o=m("div"),o.textContent="Point your camera at a QR code to scan",h(t,"class","scanner-video svelte-1xicnd3"),t.autoplay=!0,t.playsInline=!0,h(l,"class","stop-btn svelte-1xicnd3"),h(o,"class","scanner-instructions svelte-1xicnd3"),h(e,"class","scanner-container svelte-1xicnd3")},m(a,d){H(a,e,d),r(e,t),n[22](t),r(e,i),r(e,l),r(e,s),r(e,o),u||(c=Q(l,"click",n[15]),u=!0)},p:fe,d(a){a&&q(e),n[22](null),u=!1,c()}}}function os(n){let e,t,i;return{c(){e=m("button"),e.textContent="ðŸ“· Start Camera",h(e,"class","method-btn primary svelte-1xicnd3")},m(l,s){H(l,e,s),t||(i=Q(e,"click",n[14]),t=!0)},p:fe,d(l){l&&q(e),t=!1,i()}}}function rs(n){let e;return{c(){e=m("div"),e.innerHTML="ðŸ“· No camera detected or camera access denied.<br/> <small>QR scanning requires camera access on your device.</small>",h(e,"class","camera-status error svelte-1xicnd3")},m(t,i){H(t,e,i)},p:fe,d(t){t&&q(e)}}}function as(n){let e;return{c(){e=m("div"),e.textContent="Checking camera availability...",h(e,"class","camera-status svelte-1xicnd3")},m(t,i){H(t,e,i)},p:fe,d(t){t&&q(e)}}}function Kn(n){let e,t;return{c(){e=m("div"),t=F(n[3]),h(e,"class","status-message svelte-1xicnd3"),me(e,"success",n[3].includes("success")),me(e,"error",n[3].includes("Failed")||n[3].includes("Invalid")||n[3].includes("denied"))},m(i,l){H(i,e,l),r(e,t)},p(i,l){l[0]&8&&Y(t,i[3]),l[0]&8&&me(e,"success",i[3].includes("success")),l[0]&8&&me(e,"error",i[3].includes("Failed")||i[3].includes("Invalid")||i[3].includes("denied"))},d(i){i&&q(e)}}}function Wn(n){let e;return{c(){e=m("div"),e.innerHTML='<h4 class="svelte-1xicnd3">Import Information</h4> <ul class="svelte-1xicnd3"><li class="svelte-1xicnd3"><strong>Merge:</strong> Combines imported data with existing data</li> <li class="svelte-1xicnd3"><strong>Selective:</strong> Choose specific teams, races, or data types to import</li> <li class="svelte-1xicnd3"><strong>Replace:</strong> Completely replaces all current data (use with caution)</li> <li class="svelte-1xicnd3">Runners with the same name will be combined automatically</li> <li class="svelte-1xicnd3">Teams with the same name will be combined automatically</li></ul>',h(e,"class","info-section svelte-1xicnd3")},m(t,i){H(t,e,i)},d(t){t&&q(e)}}}function cs(n){let e,t,i,l,s,o,u;function c(g,_){return g[8]?is:ls}let a=c(n),d=a(n),p=n[3]&&Kn(n),f=!n[8]&&Wn();return{c(){e=m("div"),t=m("div"),t.innerHTML='<h2 class="svelte-1xicnd3">Import Data</h2> <p class="svelte-1xicnd3">Import timing data from other devices or backup files</p>',i=k(),d.c(),l=k(),p&&p.c(),s=k(),f&&f.c(),h(t,"class","header svelte-1xicnd3"),h(e,"class","import-container svelte-1xicnd3")},m(g,_){H(g,e,_),r(e,t),r(e,i),d.m(e,null),r(e,l),p&&p.m(e,null),r(e,s),f&&f.m(e,null),o||(u=Q(window,"beforeunload",n[21]),o=!0)},p(g,_){a===(a=c(g))&&d?d.p(g,_):(d.d(1),d=a(g),d&&(d.c(),d.m(e,l))),g[3]?p?p.p(g,_):(p=Kn(g),p.c(),p.m(e,s)):p&&(p.d(1),p=null),g[8]?f&&(f.d(1),f=null):f||(f=Wn(),f.c(),f.m(e,null))},i:fe,o:fe,d(g){g&&q(e),d.d(),p&&p.d(),f&&f.d(),o=!1,u()}}}const Gn=n=>n.raceName;function us(n,e,t){let i;Ae(n,ve,L=>t(35,i=L));let l,s,o=null,u=!1,c="",a=!1,d=!1,p="merge",f=null,g=!1,_=!0,v=!0,S=!0,b=[],E=[];async function R(){try{const L=await ne.hasCamera();t(4,a=L),t(5,d=!0),console.log("Camera support:",L)}catch(L){console.error("Error checking camera support:",L),t(4,a=!1),t(5,d=!0)}}async function T(){if(!(!s||u||!a))try{t(3,c="Starting camera..."),o=new ne(s,L=>{console.log("QR code detected:",L.data),A(),M(L.data)},{highlightScanRegion:!0,highlightCodeOutline:!0}),await o.start(),t(2,u=!0),t(3,c="Scanning for QR code... Point camera at QR code")}catch(L){console.error("Error starting QR scanner:",L),t(3,c="Failed to start camera. Please check camera permissions."),setTimeout(()=>t(3,c=""),5e3)}}function A(){o&&(o.destroy(),o=null),t(2,u=!1),t(3,c="")}function M(L){try{const $=JSON.parse(L);N($)}catch($){console.error("Error parsing QR code:",$),t(3,c="Invalid QR code data - not a valid timing session"),setTimeout(()=>t(3,c=""),5e3)}}function C(L){var pe;const z=(pe=L.target.files)==null?void 0:pe[0];if(!z)return;const te=new FileReader;te.onload=ae=>{var X;try{const U=(X=ae.target)==null?void 0:X.result,B=JSON.parse(U);N(B)}catch(U){console.error("Error parsing file:",U),t(3,c="Invalid file format - not a valid JSON timing session"),setTimeout(()=>t(3,c=""),3e3)}},te.readAsText(z)}function I(L){const $=L.target,z=$.value.trim();if(z)try{const te=JSON.parse(z);N(te),$.value=""}catch{t(3,c="Invalid JSON format"),setTimeout(()=>t(3,c=""),3e3)}}function N(L){var $,z;t(7,f=L),t(8,g=!0),t(12,b=(($=L.teams)==null?void 0:$.map(te=>te.id))||[]),t(13,E=[...new Set((z=L.times)==null?void 0:z.map(te=>te.raceName).filter(Boolean))]),t(3,c="Data loaded! Review and confirm import below."),setTimeout(()=>t(3,c=""),5e3)}function O(){if(f){switch(p){case"replace":V(f);break;case"selective":w(f);break;case"merge":default:y(f);break}t(7,f=null),t(8,g=!1),t(3,c="Import completed successfully!"),setTimeout(()=>t(3,c=""),3e3)}}function V(L){ve.set({...L,id:i.id,updated:Date.now()})}function w(L){var we,lt,Ut;let $=[],z=[],te=[];if(_&&($=((we=L.teams)==null?void 0:we.filter(oe=>b.includes(oe.id)))||[]),v&&(z=((lt=L.runners)==null?void 0:lt.filter(oe=>b.includes(oe.teamId)))||[]),S){const oe=new Set(z.map(Ce=>Ce.id));te=((Ut=L.times)==null?void 0:Ut.filter(Ce=>oe.has(Ce.runnerId)&&(!Ce.raceName||E.includes(Ce.raceName))))||[]}const pe=new Set(i.teams.map(oe=>oe.name.toLowerCase())),ae=new Set(i.runners.map(oe=>oe.name.toLowerCase())),X=$.filter(oe=>!pe.has(oe.name.toLowerCase())),U=new Map;$.forEach(oe=>{const Ce=i.teams.find(Ee=>Ee.name.toLowerCase()===oe.name.toLowerCase());if(Ce)U.set(oe.id,Ce.id);else{const Ee=crypto.randomUUID();U.set(oe.id,Ee),X.push({...oe,id:Ee})}});const B=z.filter(oe=>!ae.has(oe.name.toLowerCase())),P=new Map;z.forEach(oe=>{const Ce=i.runners.find(Ee=>Ee.name.toLowerCase()===oe.name.toLowerCase());if(Ce)P.set(oe.id,Ce.id);else{const Ee=crypto.randomUUID(),_i=U.get(oe.teamId)||oe.teamId;P.set(oe.id,Ee),B.push({...oe,id:Ee,teamId:_i})}});const he=te.map(oe=>({...oe,runnerId:P.get(oe.runnerId)||oe.runnerId}));ve.update(oe=>({...oe,teams:[...oe.teams,...X],runners:[...oe.runners,...B],times:[...oe.times,...he],unit:L.unit||oe.unit,updated:Date.now()}))}function y(L){var B;const $=new Set(i.runners.map(P=>P.name.toLowerCase())),z=new Set(i.teams.map(P=>P.name.toLowerCase())),te=((B=L.teams)==null?void 0:B.filter(P=>!z.has(P.name.toLowerCase())))||[],pe=new Map;(L.teams||[]).forEach(P=>{const he=i.teams.find(we=>we.name.toLowerCase()===P.name.toLowerCase());if(he)pe.set(P.id,he.id);else{const we=crypto.randomUUID();pe.set(P.id,we),te.push({...P,id:we})}});const ae=(L.runners||[]).filter(P=>!$.has(P.name.toLowerCase())),X=new Map;(L.runners||[]).forEach(P=>{const he=i.runners.find(we=>we.name.toLowerCase()===P.name.toLowerCase());if(he)X.set(P.id,he.id);else{const we=crypto.randomUUID(),lt=pe.get(P.teamId)||P.teamId;X.set(P.id,we),ae.push({...P,id:we,teamId:lt})}});const U=(L.times||[]).map(P=>({...P,runnerId:X.get(P.runnerId)||P.runnerId}));ve.update(P=>({...P,teams:[...P.teams,...te],runners:[...P.runners,...ae],times:[...P.times,...U],unit:L.unit||P.unit,updated:Date.now()}))}function D(){t(7,f=null),t(8,g=!1),t(3,c="")}function W(){var pe,ae,X,U;if(!f)return"";const L=((pe=f.teams)==null?void 0:pe.length)||0,$=((ae=f.runners)==null?void 0:ae.length)||0,z=((X=f.times)==null?void 0:X.length)||0,te=new Set((U=f.times)==null?void 0:U.map(B=>B.raceName).filter(Boolean)).size;return`${L} teams, ${$} runners, ${z} times across ${te} races`}R();function j(){A()}const G=[[],[],[]];function ce(L){ct[L?"unshift":"push"](()=>{s=L,t(1,s)})}function x(L){ct[L?"unshift":"push"](()=>{l=L,t(0,l)})}const le=L=>{setTimeout(()=>I(L),100)};function J(){p=this.__value,t(6,p)}function ge(){p=this.__value,t(6,p)}function K(){p=this.__value,t(6,p)}function Z(){_=this.checked,t(9,_)}function se(){v=this.checked,t(10,v)}function ue(){S=this.checked,t(11,S)}function re(){b=$t(G[1],this.__value,this.checked),t(12,b)}function ee(){E=$t(G[0],this.__value,this.checked),t(13,E)}return[l,s,u,c,a,d,p,f,g,_,v,S,b,E,T,A,C,I,O,D,W,j,ce,x,le,J,G,ge,K,Z,se,ue,re,ee]}class ds extends Ge{constructor(e){super(),We(this,e,us,cs,Be,{},null,[-1,-1])}}function fs(n){let e,t;return e=new ds({}),{c(){tt(e.$$.fragment)},m(i,l){Je(e,i,l),t=!0},i(i){t||(Te(e.$$.fragment,i),t=!0)},o(i){De(e.$$.fragment,i),t=!1},d(i){Ke(e,i)}}}function hs(n){let e,t;return e=new xl({}),{c(){tt(e.$$.fragment)},m(i,l){Je(e,i,l),t=!0},i(i){t||(Te(e.$$.fragment,i),t=!0)},o(i){De(e.$$.fragment,i),t=!1},d(i){Ke(e,i)}}}function ms(n){let e,t;return e=new nl({}),{c(){tt(e.$$.fragment)},m(i,l){Je(e,i,l),t=!0},i(i){t||(Te(e.$$.fragment,i),t=!0)},o(i){De(e.$$.fragment,i),t=!1},d(i){Ke(e,i)}}}function gs(n){let e,t;return e=new Ji({}),{c(){tt(e.$$.fragment)},m(i,l){Je(e,i,l),t=!0},i(i){t||(Te(e.$$.fragment,i),t=!0)},o(i){De(e.$$.fragment,i),t=!1},d(i){Ke(e,i)}}}function ps(n){let e,t,i,l,s,o,u,c,a;l=new qi({});const d=[gs,ms,hs,fs],p=[];function f(g,_){return g[0]==="setup"?0:g[0]==="timing"?1:g[0]==="share"?2:g[0]==="import"?3:-1}return~(u=f(n))&&(c=p[u]=d[u](n)),{c(){e=m("main"),t=m("header"),t.innerHTML='<h1 class="svelte-yynuvd">â±ï¸ Cross Country Timer</h1>',i=k(),tt(l.$$.fragment),s=k(),o=m("div"),c&&c.c(),h(t,"class","app-header svelte-yynuvd"),h(o,"class","app-content svelte-yynuvd"),h(e,"class","app svelte-yynuvd")},m(g,_){H(g,e,_),r(e,t),r(e,i),Je(l,e,null),r(e,s),r(e,o),~u&&p[u].m(o,null),a=!0},p(g,[_]){let v=u;u=f(g),u!==v&&(c&&(Mi(),De(p[v],1,1,()=>{p[v]=null}),Ni()),~u?(c=p[u],c||(c=p[u]=d[u](g),c.c()),Te(c,1),c.m(o,null)):c=null)},i(g){a||(Te(l.$$.fragment,g),Te(c),a=!0)},o(g){De(l.$$.fragment,g),De(c),a=!1},d(g){g&&q(e),Ke(l),~u&&p[u].d()}}}function _s(n,e,t){let i;return Ae(n,Tt,l=>t(0,i=l)),[i]}class vs extends Ge{constructor(e){super(),We(this,e,_s,ps,Be,{})}}new vs({target:document.getElementById("app")});
