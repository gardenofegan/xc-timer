var bl=Object.defineProperty;var yl=(n,e,t)=>e in n?bl(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var bt=(n,e,t)=>yl(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function ge(){}function Xn(n){return n()}function Vt(){return Object.create(null)}function ve(n){n.forEach(Xn)}function At(n){return typeof n=="function"}function Oe(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}let rt;function Qt(n,e){return n===e?!0:(rt||(rt=document.createElement("a")),rt.href=e,n===rt.href)}function kl(n){return Object.keys(n).length===0}function xn(n,...e){if(n==null){for(const l of e)l(void 0);return ge}const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Be(n,e,t){n.$$.on_destroy.push(xn(e,t))}function Cl(n,e,t){return n.set(t),e}function r(n,e){n.appendChild(e)}function H(n,e,t){n.insertBefore(e,t||null)}function q(n){n.parentNode&&n.parentNode.removeChild(n)}function Ne(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function m(n){return document.createElement(n)}function O(n){return document.createTextNode(n)}function y(){return O(" ")}function et(){return O("")}function j(n,e,t,l){return n.addEventListener(e,t,l),()=>n.removeEventListener(e,t,l)}function el(n){return function(e){return e.preventDefault(),n.call(this,e)}}function tl(n){return function(e){return e.stopPropagation(),n.call(this,e)}}function h(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function zt(n,e,t){const l=new Set;for(let i=0;i<n.length;i+=1)n[i].checked&&l.add(n[i].__value);return t||l.delete(e),Array.from(l)}function gt(n){let e;return{p(...t){e=t,e.forEach(l=>n.push(l))},r(){e.forEach(t=>n.splice(n.indexOf(t),1))}}}function Sl(n){return Array.from(n.childNodes)}function Y(n,e){e=""+e,n.data!==e&&(n.data=e)}function ie(n,e){n.value=e??""}function be(n,e,t,l){t==null?n.style.removeProperty(e):n.style.setProperty(e,t,"")}function Ce(n,e,t){for(let l=0;l<n.options.length;l+=1){const i=n.options[l];if(i.__value===e){i.selected=!0;return}}(!t||e!==void 0)&&(n.selectedIndex=-1)}function He(n){const e=n.querySelector(":checked");return e&&e.__value}function pe(n,e,t){n.classList.toggle(e,!!t)}let tt;function Xe(n){tt=n}function El(){if(!tt)throw new Error("Function called outside component initialization");return tt}function Tl(n){El().$$.on_destroy.push(n)}function jt(n,e){const t=n.$$.callbacks[e.type];t&&t.slice().forEach(l=>l.call(this,e))}const qe=[],dt=[];let Ve=[];const Jt=[],Rl=Promise.resolve();let Rt=!1;function Il(){Rt||(Rt=!0,Rl.then(nl))}function Ie(n){Ve.push(n)}const yt=new Set;let Fe=0;function nl(){if(Fe!==0)return;const n=tt;do{try{for(;Fe<qe.length;){const e=qe[Fe];Fe++,Xe(e),Ml(e.$$)}}catch(e){throw qe.length=0,Fe=0,e}for(Xe(null),qe.length=0,Fe=0;dt.length;)dt.pop()();for(let e=0;e<Ve.length;e+=1){const t=Ve[e];yt.has(t)||(yt.add(t),t())}Ve.length=0}while(qe.length);for(;Jt.length;)Jt.pop()();Rt=!1,yt.clear(),Xe(n)}function Ml(n){if(n.fragment!==null){n.update(),ve(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(Ie)}}function Nl(n){const e=[],t=[];Ve.forEach(l=>n.indexOf(l)===-1?e.push(l):t.push(l)),t.forEach(l=>l()),Ve=e}const ut=new Set;let Ae;function Dl(){Ae={r:0,c:[],p:Ae}}function Ll(){Ae.r||ve(Ae.c),Ae=Ae.p}function Re(n,e){n&&n.i&&(ut.delete(n),n.i(e))}function Pe(n,e,t,l){if(n&&n.o){if(ut.has(n))return;ut.add(n),Ae.c.push(()=>{ut.delete(n),l&&(t&&n.d(1),l())}),n.o(e)}else l&&l()}function me(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function Qe(n,e){n.d(1),e.delete(n.key)}function ze(n,e,t,l,i,s,o,u,c,a,d,g){let f=n.length,p=s.length,_=f;const v={};for(;_--;)v[n[_].key]=_;const E=[],w=new Map,R=new Map,T=[];for(_=p;_--;){const k=g(i,s,_),I=t(k);let N=o.get(I);N?T.push(()=>N.p(k,e)):(N=a(I,k),N.c()),w.set(I,E[_]=N),I in v&&R.set(I,Math.abs(_-v[I]))}const S=new Set,A=new Set;function M(k){Re(k,1),k.m(u,d),o.set(k.key,k),d=k.first,p--}for(;f&&p;){const k=E[p-1],I=n[f-1],N=k.key,B=I.key;k===I?(d=k.first,f--,p--):w.has(B)?!o.has(N)||S.has(N)?M(k):A.has(B)?f--:R.get(N)>R.get(B)?(A.add(N),M(k)):(S.add(B),f--):(c(I,o),f--)}for(;f--;){const k=n[f];w.has(k.key)||c(k,o)}for(;p;)M(E[p-1]);return ve(T),E}function lt(n){n&&n.c()}function We(n,e,t){const{fragment:l,after_update:i}=n.$$;l&&l.m(e,t),Ie(()=>{const s=n.$$.on_mount.map(Xn).filter(At);n.$$.on_destroy?n.$$.on_destroy.push(...s):ve(s),n.$$.on_mount=[]}),i.forEach(Ie)}function Ge(n,e){const t=n.$$;t.fragment!==null&&(Nl(t.after_update),ve(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Al(n,e){n.$$.dirty[0]===-1&&(qe.push(n),Il(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function Ye(n,e,t,l,i,s,o=null,u=[-1]){const c=tt;Xe(n);const a=n.$$={fragment:null,ctx:[],props:s,update:ge,not_equal:i,bound:Vt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:Vt(),dirty:u,skip_bound:!1,root:e.target||c.$$.root};o&&o(a.root);let d=!1;if(a.ctx=t?t(n,e.props||{},(g,f,...p)=>{const _=p.length?p[0]:f;return a.ctx&&i(a.ctx[g],a.ctx[g]=_)&&(!a.skip_bound&&a.bound[g]&&a.bound[g](_),d&&Al(n,g)),f}):[],a.update(),d=!0,ve(a.before_update),a.fragment=l?l(a.ctx):!1,e.target){if(e.hydrate){const g=Sl(e.target);a.fragment&&a.fragment.l(g),g.forEach(q)}else a.fragment&&a.fragment.c();e.intro&&Re(n.$$.fragment),We(n,e.target,e.anchor),nl()}Xe(c)}class Ze{constructor(){bt(this,"$$");bt(this,"$$set")}$destroy(){Ge(this,1),this.$destroy=ge}$on(e,t){if(!At(t))return ge;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(t),()=>{const i=l.indexOf(t);i!==-1&&l.splice(i,1)}}$set(e){this.$$set&&!kl(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Pl="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Pl);const Ue=[];function Bl(n,e){return{subscribe:Pt(n,e).subscribe}}function Pt(n,e=ge){let t;const l=new Set;function i(u){if(Oe(n,u)&&(n=u,t)){const c=!Ue.length;for(const a of l)a[1](),Ue.push(a,n);if(c){for(let a=0;a<Ue.length;a+=2)Ue[a][0](Ue[a+1]);Ue.length=0}}}function s(u){i(u(n))}function o(u,c=ge){const a=[u,c];return l.add(a),l.size===1&&(t=e(i,s)||ge),u(n),()=>{l.delete(a),l.size===0&&t&&(t(),t=null)}}return{set:i,update:s,subscribe:o}}function Ol(n,e,t){const l=!Array.isArray(n),i=l?[n]:n;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const s=e.length<2;return Bl(t,(o,u)=>{let c=!1;const a=[];let d=0,g=ge;const f=()=>{if(d)return;g();const _=e(l?a[0]:a,o,u);s?o(_):g=At(_)?_:ge},p=i.map((_,v)=>xn(_,E=>{a[v]=E,d&=~(1<<v),c&&f()},()=>{d|=1<<v}));return c=!0,f(),function(){ve(p),g(),c=!1}})}const Kt=typeof window<"u",$t="xc-timer-session";function Fl(){const n={id:crypto.randomUUID(),name:"New Session",teams:[],runners:[],times:[],unit:"km",created:Date.now(),updated:Date.now(),currentRace:""},{subscribe:e,set:t,update:l}=Pt(n);if(Kt){const i=localStorage.getItem($t);if(i)try{const s=JSON.parse(i);s.teams||(s.teams=[]),s.currentRace||(s.currentRace=""),s.runners&&(s.runners=s.runners.map(o=>{if(o.age&&!o.grade){let u="Freshman";return o.age>=18?u="Senior":o.age>=17?u="Junior":o.age>=16&&(u="Sophomore"),{id:o.id,name:o.name,grade:u,teamId:o.teamId||""}}return{id:o.id,name:o.name,grade:o.grade||"Freshman",teamId:o.teamId||""}})),t(s)}catch(s){console.error("Failed to load session from storage:",s)}}return e(i=>{Kt&&localStorage.setItem($t,JSON.stringify(i))}),{subscribe:e,set:t,update:l,addTeam:i=>{l(s=>({...s,teams:[...s.teams,{...i,id:crypto.randomUUID()}],updated:Date.now()}))},removeTeam:i=>{l(s=>({...s,teams:s.teams.filter(o=>o.id!==i),runners:s.runners.map(o=>o.teamId===i?{...o,teamId:""}:o),updated:Date.now()}))},addRunner:i=>{l(s=>({...s,runners:[...s.runners,{...i,id:crypto.randomUUID()}],updated:Date.now()}))},removeRunner:i=>{l(s=>({...s,runners:s.runners.filter(o=>o.id!==i),times:s.times.filter(o=>o.runnerId!==i),updated:Date.now()}))},addTime:(i,s)=>{l(o=>({...o,times:[...o.times.filter(u=>!(u.runnerId===i.runnerId&&u.checkpoint===i.checkpoint)),{...i,timestamp:Date.now(),raceName:s||o.currentRace}],updated:Date.now()}))},removeTime:(i,s)=>{l(o=>({...o,times:o.times.filter(u=>!(u.runnerId===i&&u.checkpoint===s)),updated:Date.now()}))},setUnit:i=>{l(s=>({...s,unit:i,updated:Date.now()}))},setCurrentRace:i=>{l(s=>({...s,currentRace:i,updated:Date.now()}))},importData:i=>{l(s=>({...s,...i,updated:Date.now()}))},reset:()=>{const i={...n,id:crypto.randomUUID(),created:Date.now(),updated:Date.now()};t(i)}}}const we=Fl(),It=Pt("setup"),Ul=Ol(we,n=>n.unit==="km"?["1K","2K","3K","4K","5K"]:["1M","2M","3M","3.1M"]);function ql(n){let e,t,l,i,s,o,u,c,a,d;return{c(){e=m("nav"),t=m("button"),t.textContent="üèÉ Setup",l=y(),i=m("button"),i.textContent="‚è±Ô∏è Timing",s=y(),o=m("button"),o.textContent="üì§ Share",u=y(),c=m("button"),c.textContent="üì• Import",h(t,"class","nav-btn svelte-nms0ce"),pe(t,"active",n[0]==="setup"),h(i,"class","nav-btn svelte-nms0ce"),pe(i,"active",n[0]==="timing"),h(o,"class","nav-btn svelte-nms0ce"),pe(o,"active",n[0]==="share"),h(c,"class","nav-btn svelte-nms0ce"),pe(c,"active",n[0]==="import"),h(e,"class","nav svelte-nms0ce")},m(g,f){H(g,e,f),r(e,t),r(e,l),r(e,i),r(e,s),r(e,o),r(e,u),r(e,c),a||(d=[j(t,"click",n[2]),j(i,"click",n[3]),j(o,"click",n[4]),j(c,"click",n[5])],a=!0)},p(g,[f]){f&1&&pe(t,"active",g[0]==="setup"),f&1&&pe(i,"active",g[0]==="timing"),f&1&&pe(o,"active",g[0]==="share"),f&1&&pe(c,"active",g[0]==="import")},i:ge,o:ge,d(g){g&&q(e),a=!1,ve(d)}}}function Hl(n,e,t){let l;Be(n,It,a=>t(0,l=a));function i(a){Cl(It,l=a,l)}return[l,i,()=>i("setup"),()=>i("timing"),()=>i("share"),()=>i("import")]}class Vl extends Ze{constructor(e){super(),Ye(this,e,Hl,ql,Oe,{})}}function Wt(n,e,t){const l=n.slice();l[36]=e[t];const i=l[20](l[36].id);return l[37]=i,l}function Gt(n,e,t){const l=n.slice();return l[40]=e[t],l}function Yt(n,e,t){const l=n.slice();return l[36]=e[t],l}function Zt(n,e,t){const l=n.slice();return l[36]=e[t],l}function Xt(n,e,t){const l=n.slice();return l[47]=e[t],l}function xt(n){let e,t,l,i,s,o,u,c,a,d,g,f,p,_,v,E,w,R,T,S,A=me(n[11]),M=[];for(let k=0;k<A.length;k+=1)M[k]=en(Xt(n,A,k));return{c(){e=m("form"),t=m("div"),l=m("div"),i=m("label"),i.textContent="Team Name",s=y(),o=m("input"),u=y(),c=m("div"),a=m("label"),a.textContent="Team Color",d=y(),g=m("div"),f=m("input"),p=y(),_=m("div");for(let k=0;k<M.length;k+=1)M[k].c();v=y(),E=m("button"),w=O("Create Team"),h(i,"for","team-name"),h(i,"class","svelte-1r1d1yc"),h(o,"id","team-name"),h(o,"type","text"),h(o,"placeholder","e.g., Girls Team, Boys Team"),o.required=!0,h(o,"class","svelte-1r1d1yc"),h(l,"class","form-group svelte-1r1d1yc"),h(a,"for","team-color"),h(a,"class","svelte-1r1d1yc"),h(f,"id","team-color"),h(f,"type","color"),h(f,"class","color-input svelte-1r1d1yc"),h(_,"class","color-options svelte-1r1d1yc"),h(g,"class","color-picker svelte-1r1d1yc"),h(c,"class","form-group svelte-1r1d1yc"),h(t,"class","form-row svelte-1r1d1yc"),h(E,"type","submit"),h(E,"class","add-btn svelte-1r1d1yc"),E.disabled=R=!n[3].trim(),h(e,"class","team-form svelte-1r1d1yc")},m(k,I){H(k,e,I),r(e,t),r(t,l),r(l,i),r(l,s),r(l,o),ie(o,n[3]),r(t,u),r(t,c),r(c,a),r(c,d),r(c,g),r(g,f),ie(f,n[4]),r(g,p),r(g,_);for(let N=0;N<M.length;N+=1)M[N]&&M[N].m(_,null);r(e,v),r(e,E),r(E,w),T||(S=[j(o,"input",n[27]),j(o,"keydown",n[21]),j(f,"input",n[28]),j(e,"submit",el(n[12]))],T=!0)},p(k,I){if(I[0]&8&&o.value!==k[3]&&ie(o,k[3]),I[0]&16&&ie(f,k[4]),I[0]&2064){A=me(k[11]);let N;for(N=0;N<A.length;N+=1){const B=Xt(k,A,N);M[N]?M[N].p(B,I):(M[N]=en(B),M[N].c(),M[N].m(_,null))}for(;N<M.length;N+=1)M[N].d(1);M.length=A.length}I[0]&8&&R!==(R=!k[3].trim())&&(E.disabled=R)},d(k){k&&q(e),Ne(M,k),T=!1,ve(S)}}}function en(n){let e,t,l;function i(){return n[29](n[47])}return{c(){e=m("button"),h(e,"type","button"),h(e,"class","color-option svelte-1r1d1yc"),be(e,"background-color",n[47]),pe(e,"selected",n[4]===n[47])},m(s,o){H(s,e,o),t||(l=j(e,"click",i),t=!0)},p(s,o){n=s,o[0]&2064&&pe(e,"selected",n[4]===n[47])},d(s){s&&q(e),t=!1,l()}}}function tn(n,e){let t,l,i,s=e[36].name+"",o,u,c,a=e[20](e[36].id).length+"",d,g,f,p,_,v;function E(){return e[30](e[36])}return{key:n,first:null,c(){t=m("div"),l=m("div"),i=m("div"),o=O(s),u=y(),c=m("div"),d=O(a),g=O(" runners"),f=y(),p=m("button"),p.textContent="‚úï",h(i,"class","team-name svelte-1r1d1yc"),h(c,"class","team-stats svelte-1r1d1yc"),h(l,"class","team-info svelte-1r1d1yc"),h(p,"class","remove-btn svelte-1r1d1yc"),h(p,"title","Remove team"),h(t,"class","team-card svelte-1r1d1yc"),be(t,"border-left","4px solid "+e[36].color),this.first=t},m(w,R){H(w,t,R),r(t,l),r(l,i),r(i,o),r(l,u),r(l,c),r(c,d),r(c,g),r(t,f),r(t,p),_||(v=j(p,"click",E),_=!0)},p(w,R){e=w,R[0]&1024&&s!==(s=e[36].name+"")&&Y(o,s),R[0]&1024&&a!==(a=e[20](e[36].id).length+"")&&Y(d,a),R[0]&1024&&be(t,"border-left","4px solid "+e[36].color)},d(w){w&&q(t),_=!1,v()}}}function nn(n){let e;return{c(){e=m("div"),e.textContent="No teams created yet. Create a team to start adding runners!",h(e,"class","empty-state svelte-1r1d1yc")},m(t,l){H(t,e,l)},d(t){t&&q(e)}}}function Ql(n){let e,t,l,i,s,o,u,c,a,d,g,f,p,_,v,E,w,R,T,S,A,M,k,I,N,B,V,C=me(n[10].teams),b=[];for(let L=0;L<C.length;L+=1)b[L]=ln(Yt(n,C,L));return{c(){e=m("form"),t=m("div"),l=m("label"),l.textContent="Team",i=y(),s=m("select"),o=m("option"),o.textContent="Select a team";for(let L=0;L<b.length;L+=1)b[L].c();u=y(),c=m("div"),a=m("div"),d=m("label"),d.textContent="Runner Name",g=y(),f=m("input"),p=y(),_=m("div"),v=m("label"),v.textContent="Grade",E=y(),w=m("select"),R=m("option"),R.textContent="Freshman",T=m("option"),T.textContent="Sophomore",S=m("option"),S.textContent="Junior",A=m("option"),A.textContent="Senior",M=y(),k=m("button"),I=O("Add Runner"),h(l,"for","team-select"),h(l,"class","svelte-1r1d1yc"),o.__value="",ie(o,o.__value),h(s,"id","team-select"),s.required=!0,h(s,"class","svelte-1r1d1yc"),n[2]===void 0&&Ie(()=>n[31].call(s)),h(t,"class","form-group svelte-1r1d1yc"),h(d,"for","name"),h(d,"class","svelte-1r1d1yc"),h(f,"id","name"),h(f,"type","text"),h(f,"placeholder","Enter runner name"),f.required=!0,h(f,"class","svelte-1r1d1yc"),h(a,"class","form-group svelte-1r1d1yc"),h(v,"for","grade"),h(v,"class","svelte-1r1d1yc"),R.__value="Freshman",ie(R,R.__value),T.__value="Sophomore",ie(T,T.__value),S.__value="Junior",ie(S,S.__value),A.__value="Senior",ie(A,A.__value),h(w,"id","grade"),w.required=!0,h(w,"class","svelte-1r1d1yc"),n[1]===void 0&&Ie(()=>n[33].call(w)),h(_,"class","form-group svelte-1r1d1yc"),h(c,"class","form-row svelte-1r1d1yc"),h(k,"type","submit"),h(k,"class","add-btn svelte-1r1d1yc"),k.disabled=N=!n[0].trim()||!n[2],h(e,"class","add-runner-form svelte-1r1d1yc")},m(L,G){H(L,e,G),r(e,t),r(t,l),r(t,i),r(t,s),r(s,o);for(let z=0;z<b.length;z+=1)b[z]&&b[z].m(s,null);Ce(s,n[2],!0),r(e,u),r(e,c),r(c,a),r(a,d),r(a,g),r(a,f),ie(f,n[0]),r(c,p),r(c,_),r(_,v),r(_,E),r(_,w),r(w,R),r(w,T),r(w,S),r(w,A),Ce(w,n[1],!0),r(e,M),r(e,k),r(k,I),B||(V=[j(s,"change",n[31]),j(f,"input",n[32]),j(f,"keydown",n[21]),j(w,"change",n[33]),j(e,"submit",el(n[16]))],B=!0)},p(L,G){if(G[0]&1024){C=me(L[10].teams);let z;for(z=0;z<C.length;z+=1){const Z=Yt(L,C,z);b[z]?b[z].p(Z,G):(b[z]=ln(Z),b[z].c(),b[z].m(s,null))}for(;z<b.length;z+=1)b[z].d(1);b.length=C.length}G[0]&1028&&Ce(s,L[2]),G[0]&1&&f.value!==L[0]&&ie(f,L[0]),G[0]&2&&Ce(w,L[1]),G[0]&1029&&N!==(N=!L[0].trim()||!L[2])&&(k.disabled=N)},d(L){L&&q(e),Ne(b,L),B=!1,ve(V)}}}function zl(n){let e;return{c(){e=m("div"),e.textContent="Please create at least one team before adding runners.",h(e,"class","no-teams-message svelte-1r1d1yc")},m(t,l){H(t,e,l)},p:ge,d(t){t&&q(e)}}}function ln(n){let e,t=n[36].name+"",l,i;return{c(){e=m("option"),l=O(t),e.__value=i=n[36].id,ie(e,e.__value)},m(s,o){H(s,e,o),r(e,l)},p(s,o){o[0]&1024&&t!==(t=s[36].name+"")&&Y(l,t),o[0]&1024&&i!==(i=s[36].id)&&(e.__value=i,ie(e,e.__value))},d(s){s&&q(e)}}}function sn(n){let e,t,l=n[36].name+"",i,s,o=n[37].length+"",u,c,a,d,g=[],f=new Map,p=me(n[37]);const _=v=>v[40].id;for(let v=0;v<p.length;v+=1){let E=Gt(n,p,v),w=_(E);f.set(w,g[v]=on(w,E))}return{c(){e=m("div"),t=m("h4"),i=O(l),s=O(" ("),u=O(o),c=O(")"),a=y(),d=m("div");for(let v=0;v<g.length;v+=1)g[v].c();be(t,"color",n[36].color),h(t,"class","svelte-1r1d1yc"),h(d,"class","runners-grid svelte-1r1d1yc"),h(e,"class","team-runners-section svelte-1r1d1yc")},m(v,E){H(v,e,E),r(e,t),r(t,i),r(t,s),r(t,u),r(t,c),r(e,a),r(e,d);for(let w=0;w<g.length;w+=1)g[w]&&g[w].m(d,null)},p(v,E){E[0]&1024&&l!==(l=v[36].name+"")&&Y(i,l),E[0]&1024&&o!==(o=v[37].length+"")&&Y(u,o),E[0]&1024&&be(t,"color",v[36].color),E[0]&1180672&&(p=me(v[37]),g=ze(g,E,_,1,v,p,f,d,Qe,on,null,Gt))},d(v){v&&q(e);for(let E=0;E<g.length;E+=1)g[E].d()}}}function on(n,e){let t,l,i,s=e[40].name+"",o,u,c,a=e[40].grade+"",d,g,f,p,_;function v(){return e[34](e[40])}return{key:n,first:null,c(){t=m("div"),l=m("div"),i=m("div"),o=O(s),u=y(),c=m("div"),d=O(a),g=y(),f=m("button"),f.textContent="‚úï",h(i,"class","runner-name svelte-1r1d1yc"),h(c,"class","runner-details svelte-1r1d1yc"),h(l,"class","runner-info svelte-1r1d1yc"),h(f,"class","remove-btn svelte-1r1d1yc"),h(f,"title","Remove runner"),h(t,"class","runner-card svelte-1r1d1yc"),be(t,"border-left","4px solid "+e[36].color),this.first=t},m(E,w){H(E,t,w),r(t,l),r(l,i),r(i,o),r(l,u),r(l,c),r(c,d),r(t,g),r(t,f),p||(_=j(f,"click",v),p=!0)},p(E,w){e=E,w[0]&1024&&s!==(s=e[40].name+"")&&Y(o,s),w[0]&1024&&a!==(a=e[40].grade+"")&&Y(d,a),w[0]&1024&&be(t,"border-left","4px solid "+e[36].color)},d(E){E&&q(t),p=!1,_()}}}function rn(n,e){let t,l,i=e[37].length>0&&sn(e);return{key:n,first:null,c(){t=et(),i&&i.c(),l=et(),this.first=t},m(s,o){H(s,t,o),i&&i.m(s,o),H(s,l,o)},p(s,o){e=s,e[37].length>0?i?i.p(e,o):(i=sn(e),i.c(),i.m(l.parentNode,l)):i&&(i.d(1),i=null)},d(s){s&&(q(t),q(l)),i&&i.d(s)}}}function an(n){let e;return{c(){e=m("div"),e.textContent="No runners added yet. Add some runners to get started!",h(e,"class","empty-state svelte-1r1d1yc")},m(t,l){H(t,e,l)},d(t){t&&q(e)}}}function cn(n){let e,t,l,i,s,o,u,c,a=n[9].name+"",d,g,f,p,_,v,E,w,R,T;function S(k,I){return k[9].runnerCount>0?Jl:jl}let A=S(n),M=A(n);return{c(){e=m("div"),t=m("div"),l=m("div"),l.innerHTML='<h3 class="svelte-1r1d1yc">Remove Team</h3>',i=y(),s=m("div"),o=m("p"),u=O("Are you sure you'd like to remove the team "),c=m("strong"),d=O(a),g=O("?"),f=y(),M.c(),p=y(),_=m("div"),v=m("button"),v.textContent="Cancel",E=y(),w=m("button"),w.textContent="Remove Team",h(l,"class","dialog-header svelte-1r1d1yc"),h(o,"class","svelte-1r1d1yc"),h(s,"class","dialog-content svelte-1r1d1yc"),h(v,"class","dialog-btn cancel-btn svelte-1r1d1yc"),h(w,"class","dialog-btn confirm-btn svelte-1r1d1yc"),h(_,"class","dialog-actions svelte-1r1d1yc"),h(t,"class","confirmation-dialog svelte-1r1d1yc"),h(e,"class","modal-overlay svelte-1r1d1yc")},m(k,I){H(k,e,I),r(e,t),r(t,l),r(t,i),r(t,s),r(s,o),r(o,u),r(o,c),r(c,d),r(o,g),r(s,f),M.m(s,null),r(t,p),r(t,_),r(_,v),r(_,E),r(_,w),R||(T=[j(v,"click",n[15]),j(w,"click",n[14]),j(t,"click",tl(n[23])),j(e,"click",n[15])],R=!0)},p(k,I){I[0]&512&&a!==(a=k[9].name+"")&&Y(d,a),A===(A=S(k))&&M?M.p(k,I):(M.d(1),M=A(k),M&&(M.c(),M.m(s,null)))},d(k){k&&q(e),M.d(),R=!1,ve(T)}}}function jl(n){let e;return{c(){e=m("p"),e.textContent="This team has no runners, so no additional data will be removed.",h(e,"class","info-text svelte-1r1d1yc")},m(t,l){H(t,e,l)},p:ge,d(t){t&&q(e)}}}function Jl(n){let e,t,l=n[9].runnerCount+"",i,s,o=n[9].runnerCount===1?"":"s",u,c;return{c(){e=m("p"),t=O("This will remove "),i=O(l),s=O(" runner"),u=O(o),c=O(" and all their recorded times."),h(e,"class","warning-text svelte-1r1d1yc")},m(a,d){H(a,e,d),r(e,t),r(e,i),r(e,s),r(e,u),r(e,c)},p(a,d){d[0]&512&&l!==(l=a[9].runnerCount+"")&&Y(i,l),d[0]&512&&o!==(o=a[9].runnerCount===1?"":"s")&&Y(u,o)},d(a){a&&q(e)}}}function un(n){let e,t,l,i,s,o,u,c,a=n[7].name+"",d,g,f,p=n[7].teamName+"",_,v,E,w,R,T,S,A,M,k,I;return{c(){e=m("div"),t=m("div"),l=m("div"),l.innerHTML='<h3 class="svelte-1r1d1yc">Remove Runner</h3>',i=y(),s=m("div"),o=m("p"),u=O("Are you sure you'd like to remove "),c=m("strong"),d=O(a),g=O(" from "),f=m("strong"),_=O(p),v=O("?"),E=y(),w=m("p"),w.textContent="This will also remove all recorded times for this runner.",R=y(),T=m("div"),S=m("button"),S.textContent="Cancel",A=y(),M=m("button"),M.textContent="Remove Runner",h(l,"class","dialog-header svelte-1r1d1yc"),h(o,"class","svelte-1r1d1yc"),h(w,"class","warning-text svelte-1r1d1yc"),h(s,"class","dialog-content svelte-1r1d1yc"),h(S,"class","dialog-btn cancel-btn svelte-1r1d1yc"),h(M,"class","dialog-btn confirm-btn svelte-1r1d1yc"),h(T,"class","dialog-actions svelte-1r1d1yc"),h(t,"class","confirmation-dialog svelte-1r1d1yc"),h(e,"class","modal-overlay svelte-1r1d1yc")},m(N,B){H(N,e,B),r(e,t),r(t,l),r(t,i),r(t,s),r(s,o),r(o,u),r(o,c),r(c,d),r(o,g),r(o,f),r(f,_),r(o,v),r(s,E),r(s,w),r(t,R),r(t,T),r(T,S),r(T,A),r(T,M),k||(I=[j(S,"click",n[19]),j(M,"click",n[18]),j(t,"click",tl(n[22])),j(e,"click",n[19])],k=!0)},p(N,B){B[0]&128&&a!==(a=N[7].name+"")&&Y(d,a),B[0]&128&&p!==(p=N[7].teamName+"")&&Y(_,p)},d(N){N&&q(e),k=!1,ve(I)}}}function Kl(n){let e,t,l,i,s,o,u,c,a,d,g,f,p,_=n[10].teams.length+"",v,E,w,R,T=n[5]?"Cancel":"+ Add Team",S,A,M,k,I=[],N=new Map,B,V,C,b,L,G,z,Z=[],ue=new Map,x,se,K,_e,$,X,oe=n[5]&&xt(n),de=me(n[10].teams);const ce=D=>D[36].id;for(let D=0;D<de.length;D+=1){let U=Zt(n,de,D),he=ce(U);N.set(he,I[D]=tn(he,U))}let te=n[10].teams.length===0&&nn();function Q(D,U){return D[10].teams.length===0?zl:Ql}let W=Q(n),P=W(n),J=me(n[10].teams);const fe=D=>D[36].id;for(let D=0;D<J.length;D+=1){let U=Wt(n,J,D),he=fe(U);ue.set(he,Z[D]=rn(he,U))}let ne=n[10].runners.length===0&&n[10].teams.length>0&&an(),ee=n[8]&&n[9]&&cn(n),F=n[6]&&n[7]&&un(n);return{c(){e=m("div"),t=m("div"),l=m("h2"),l.textContent="Runner Setup",i=y(),s=m("div"),o=m("button"),o.textContent="Kilometers",u=y(),c=m("button"),c.textContent="Miles",a=y(),d=m("div"),g=m("div"),f=m("h3"),p=O("Teams ("),v=O(_),E=O(")"),w=y(),R=m("button"),S=O(T),A=y(),oe&&oe.c(),M=y(),k=m("div");for(let D=0;D<I.length;D+=1)I[D].c();B=y(),te&&te.c(),V=y(),C=m("div"),b=m("h3"),b.textContent="Add Runner",L=y(),P.c(),G=y(),z=m("div");for(let D=0;D<Z.length;D+=1)Z[D].c();x=y(),ne&&ne.c(),se=y(),ee&&ee.c(),K=y(),F&&F.c(),_e=et(),h(l,"class","svelte-1r1d1yc"),h(o,"class","unit-btn svelte-1r1d1yc"),pe(o,"active",n[10].unit==="km"),h(c,"class","unit-btn svelte-1r1d1yc"),pe(c,"active",n[10].unit==="miles"),h(s,"class","unit-toggle svelte-1r1d1yc"),h(t,"class","header svelte-1r1d1yc"),h(f,"class","svelte-1r1d1yc"),h(R,"class","add-team-btn svelte-1r1d1yc"),pe(R,"active",n[5]),h(g,"class","section-header svelte-1r1d1yc"),h(k,"class","teams-list svelte-1r1d1yc"),h(d,"class","teams-section svelte-1r1d1yc"),h(b,"class","svelte-1r1d1yc"),h(C,"class","runners-section svelte-1r1d1yc"),h(z,"class","runners-by-team svelte-1r1d1yc"),h(e,"class","setup-container svelte-1r1d1yc")},m(D,U){H(D,e,U),r(e,t),r(t,l),r(t,i),r(t,s),r(s,o),r(s,u),r(s,c),r(e,a),r(e,d),r(d,g),r(g,f),r(f,p),r(f,v),r(f,E),r(g,w),r(g,R),r(R,S),r(d,A),oe&&oe.m(d,null),r(d,M),r(d,k);for(let he=0;he<I.length;he+=1)I[he]&&I[he].m(k,null);r(k,B),te&&te.m(k,null),r(e,V),r(e,C),r(C,b),r(C,L),P.m(C,null),r(e,G),r(e,z);for(let he=0;he<Z.length;he+=1)Z[he]&&Z[he].m(z,null);r(z,x),ne&&ne.m(z,null),H(D,se,U),ee&&ee.m(D,U),H(D,K,U),F&&F.m(D,U),H(D,_e,U),$||(X=[j(window,"keydown",n[21]),j(o,"click",n[24]),j(c,"click",n[25]),j(R,"click",n[26])],$=!0)},p(D,U){U[0]&1024&&pe(o,"active",D[10].unit==="km"),U[0]&1024&&pe(c,"active",D[10].unit==="miles"),U[0]&1024&&_!==(_=D[10].teams.length+"")&&Y(v,_),U[0]&32&&T!==(T=D[5]?"Cancel":"+ Add Team")&&Y(S,T),U[0]&32&&pe(R,"active",D[5]),D[5]?oe?oe.p(D,U):(oe=xt(D),oe.c(),oe.m(d,M)):oe&&(oe.d(1),oe=null),U[0]&1057792&&(de=me(D[10].teams),I=ze(I,U,ce,1,D,de,N,k,Qe,tn,B,Zt)),D[10].teams.length===0?te||(te=nn(),te.c(),te.m(k,null)):te&&(te.d(1),te=null),W===(W=Q(D))&&P?P.p(D,U):(P.d(1),P=W(D),P&&(P.c(),P.m(C,null))),U[0]&1180672&&(J=me(D[10].teams),Z=ze(Z,U,fe,1,D,J,ue,z,Qe,rn,x,Wt)),D[10].runners.length===0&&D[10].teams.length>0?ne||(ne=an(),ne.c(),ne.m(z,null)):ne&&(ne.d(1),ne=null),D[8]&&D[9]?ee?ee.p(D,U):(ee=cn(D),ee.c(),ee.m(K.parentNode,K)):ee&&(ee.d(1),ee=null),D[6]&&D[7]?F?F.p(D,U):(F=un(D),F.c(),F.m(_e.parentNode,_e)):F&&(F.d(1),F=null)},i:ge,o:ge,d(D){D&&(q(e),q(se),q(K),q(_e)),oe&&oe.d();for(let U=0;U<I.length;U+=1)I[U].d();te&&te.d(),P.d();for(let U=0;U<Z.length;U+=1)Z[U].d();ne&&ne.d(),ee&&ee.d(D),F&&F.d(D),$=!1,ve(X)}}}function $l(n,e,t){let l;Be(n,we,$=>t(10,l=$));let i="",s="Freshman",o="",u="",c="#22c55e",a=!1,d=!1,g=null,f=!1,p=null;const _=["#22c55e","#3b82f6","#f97316","#ef4444","#8b5cf6","#06b6d4","#f59e0b","#10b981"];function v(){u.trim()&&(we.addTeam({name:u.trim(),color:c}),t(3,u=""),t(4,c="#22c55e"),t(5,a=!1))}function E($){const X=l.teams.find(de=>de.id===$),oe=I($).length;X&&(t(9,p={id:X.id,name:X.name,runnerCount:oe}),t(8,f=!0))}function w(){p&&(we.removeTeam(p.id),R())}function R(){t(9,p=null),t(8,f=!1)}function T(){!i.trim()||!o||(we.addRunner({name:i.trim(),grade:s,teamId:o}),t(0,i=""),t(1,s="Freshman"))}function S($){const X=l.runners.find(de=>de.id===$),oe=X?k(X.teamId):null;X&&oe&&(t(7,g={id:X.id,name:X.name,teamName:oe.name}),t(6,d=!0))}function A(){g&&(we.removeRunner(g.id),M())}function M(){t(7,g=null),t(6,d=!1)}function k($){return l.teams.find(X=>X.id===$)}function I($){return l.runners.filter(X=>X.teamId===$)}function N($){$.key==="Enter"&&(a&&u.trim()?v():!a&&i.trim()&&o&&T()),$.key==="Escape"&&(d?M():f&&R())}function B($){jt.call(this,n,$)}function V($){jt.call(this,n,$)}const C=()=>we.setUnit("km"),b=()=>we.setUnit("miles"),L=()=>t(5,a=!a);function G(){u=this.value,t(3,u)}function z(){c=this.value,t(4,c)}const Z=$=>t(4,c=$),ue=$=>E($.id);function x(){o=He(this),t(2,o)}function se(){i=this.value,t(0,i)}function K(){s=He(this),t(1,s)}return[i,s,o,u,c,a,d,g,f,p,l,_,v,E,w,R,T,S,A,M,I,N,B,V,C,b,L,G,z,Z,ue,x,se,K,$=>S($.id)]}class Wl extends Ze{constructor(e){super(),Ye(this,e,$l,Kl,Oe,{},null,[-1,-1])}}function dn(n,e,t){const l=n.slice();l[25]=e[t];const i=l[14](l[25].teamId);return l[26]=i,l}function fn(n,e,t){const l=n.slice();l[25]=e[t];const i=l[14](l[25].teamId);return l[26]=i,l}function hn(n,e,t){const l=n.slice();return l[31]=e[t],l}function mn(n,e,t){const l=n.slice();return l[26]=e[t],l}function gn(n){let e;return{c(){e=m("div"),e.textContent="Enter a race name to begin timing",h(e,"class","input-hint svelte-1bc13oq")},m(t,l){H(t,e,l)},d(t){t&&q(e)}}}function Gl(n){let e,t,l;return{c(){e=m("button"),e.textContent="‚è∏Ô∏è Stop Timer",h(e,"class","timer-btn stop-btn svelte-1bc13oq")},m(i,s){H(i,e,s),t||(l=j(e,"click",n[10]),t=!0)},p:ge,d(i){i&&q(e),t=!1,l()}}}function Yl(n){let e,t,l,i,s;return{c(){e=m("button"),t=O("‚ñ∂Ô∏è Start Timer"),h(e,"class","timer-btn start-btn svelte-1bc13oq"),e.disabled=l=n[0].length===0||!n[1]||!n[2].trim()},m(o,u){H(o,e,u),r(e,t),i||(s=j(e,"click",n[9]),i=!0)},p(o,u){u[0]&263&&l!==(l=o[0].length===0||!o[1]||!o[2].trim())&&(e.disabled=l)},d(o){o&&q(e),i=!1,s()}}}function pn(n,e){let t,l,i,s,o,u,c=e[26].name+"",a,d,g,f;function p(){return e[18](e[26])}return{key:n,first:null,c(){t=m("label"),l=m("input"),o=y(),u=m("span"),a=O(c),d=y(),h(l,"type","checkbox"),l.value=i=e[26].id,l.checked=s=e[0].includes(e[26].id),l.disabled=e[4],h(l,"class","svelte-1bc13oq"),h(u,"class","checkbox-label svelte-1bc13oq"),be(u,"color",e[26].color),h(t,"class","team-checkbox svelte-1bc13oq"),this.first=t},m(_,v){H(_,t,v),r(t,l),r(t,o),r(t,u),r(u,a),r(t,d),g||(f=j(l,"change",p),g=!0)},p(_,v){e=_,v[0]&8&&i!==(i=e[26].id)&&(l.value=i),v[0]&9&&s!==(s=e[0].includes(e[26].id))&&(l.checked=s),v[0]&16&&(l.disabled=e[4]),v[0]&8&&c!==(c=e[26].name+"")&&Y(a,c),v[0]&8&&be(u,"color",e[26].color)},d(_){_&&q(t),g=!1,f()}}}function _n(n){let e;return{c(){e=m("div"),e.textContent="Select at least one team",h(e,"class","selection-hint svelte-1bc13oq")},m(t,l){H(t,e,l)},d(t){t&&q(e)}}}function vn(n){let e,t=n[31]+"",l,i;return{c(){e=m("option"),l=O(t),e.__value=i=n[31],ie(e,e.__value)},m(s,o){H(s,e,o),r(e,l)},p(s,o){o[0]&256&&t!==(t=s[31]+"")&&Y(l,t),o[0]&256&&i!==(i=s[31])&&(e.__value=i,ie(e,e.__value))},d(s){s&&q(e)}}}function wn(n){let e;return{c(){e=m("div"),e.textContent="Select a checkpoint",h(e,"class","selection-hint svelte-1bc13oq")},m(t,l){H(t,e,l)},d(t){t&&q(e)}}}function Zl(n){let e,t,l,i,s;function o(a,d){if(a[3].teams.length===0)return ei;if(a[3].runners.length===0)return xl}let u=o(n),c=u&&u(n);return{c(){e=m("div"),t=m("h3"),t.textContent="Setup Required",l=y(),i=m("p"),i.textContent="Please enter a race name, select team(s), and choose a checkpoint to begin timing.",s=y(),c&&c.c(),h(t,"class","svelte-1bc13oq"),h(e,"class","setup-message svelte-1bc13oq")},m(a,d){H(a,e,d),r(e,t),r(e,l),r(e,i),r(e,s),c&&c.m(e,null)},p(a,d){u!==(u=o(a))&&(c&&c.d(1),c=u&&u(a),c&&(c.c(),c.m(e,null)))},d(a){a&&q(e),c&&c.d()}}}function Xl(n){let e,t,l,i,s,o,u,c,a=n[15]()+"",d,g,f,p,_,v,E=n[6].length+"",w,R,T=n[7].length+"",S,A,M,k,I,N,B=n[4]&&n[6].length>0&&bn(n),V=n[7].length>0&&kn(n),C=!n[4]&&n[6].length===0&&n[7].length===0&&Sn(n);return{c(){e=m("div"),t=m("div"),l=m("strong"),l.textContent="Race:",i=y(),s=O(n[2]),o=O(" ‚Ä¢ "),u=m("strong"),u.textContent="Timing:",c=y(),d=O(a),g=O(" at "),f=O(n[1]),p=y(),_=m("span"),v=O("("),w=O(E),R=O(" pending, "),S=O(T),A=O(" completed)"),M=y(),B&&B.c(),k=y(),V&&V.c(),I=y(),C&&C.c(),N=et(),h(_,"class","runner-count svelte-1bc13oq"),h(t,"class","timing-summary svelte-1bc13oq"),h(e,"class","timing-info svelte-1bc13oq")},m(b,L){H(b,e,L),r(e,t),r(t,l),r(t,i),r(t,s),r(t,o),r(t,u),r(t,c),r(t,d),r(t,g),r(t,f),r(t,p),r(t,_),r(_,v),r(_,w),r(_,R),r(_,S),r(_,A),H(b,M,L),B&&B.m(b,L),H(b,k,L),V&&V.m(b,L),H(b,I,L),C&&C.m(b,L),H(b,N,L)},p(b,L){L[0]&4&&Y(s,b[2]),L[0]&2&&Y(f,b[1]),L[0]&64&&E!==(E=b[6].length+"")&&Y(w,E),L[0]&128&&T!==(T=b[7].length+"")&&Y(S,T),b[4]&&b[6].length>0?B?B.p(b,L):(B=bn(b),B.c(),B.m(k.parentNode,k)):B&&(B.d(1),B=null),b[7].length>0?V?V.p(b,L):(V=kn(b),V.c(),V.m(I.parentNode,I)):V&&(V.d(1),V=null),!b[4]&&b[6].length===0&&b[7].length===0?C?C.p(b,L):(C=Sn(b),C.c(),C.m(N.parentNode,N)):C&&(C.d(1),C=null)},d(b){b&&(q(e),q(M),q(k),q(I),q(N)),B&&B.d(b),V&&V.d(b),C&&C.d(b)}}}function xl(n){let e;return{c(){e=m("p"),e.textContent="‚ö†Ô∏è No runners added yet. Go to Setup to add runners to your teams.",h(e,"class","warning svelte-1bc13oq")},m(t,l){H(t,e,l)},d(t){t&&q(e)}}}function ei(n){let e;return{c(){e=m("p"),e.textContent="‚ö†Ô∏è No teams created yet. Go to Setup to create teams and add runners.",h(e,"class","warning svelte-1bc13oq")},m(t,l){H(t,e,l)},d(t){t&&q(e)}}}function bn(n){let e,t,l,i,s=[],o=new Map,u=me(n[6]);const c=a=>a[25].id;for(let a=0;a<u.length;a+=1){let d=fn(n,u,a),g=c(d);o.set(g,s[a]=yn(g,d))}return{c(){e=m("div"),t=m("h3"),t.textContent="Tap to Record Time",l=y(),i=m("div");for(let a=0;a<s.length;a+=1)s[a].c();h(t,"class","svelte-1bc13oq"),h(i,"class","available-runners svelte-1bc13oq"),h(e,"class","runners-timing-list svelte-1bc13oq")},m(a,d){H(a,e,d),r(e,t),r(e,l),r(e,i);for(let g=0;g<s.length;g+=1)s[g]&&s[g].m(i,null)},p(a,d){d[0]&24672&&(u=me(a[6]),s=ze(s,d,c,1,a,u,o,i,Qe,yn,null,fn))},d(a){a&&q(e);for(let d=0;d<s.length;d+=1)s[d].d()}}}function yn(n,e){var M;let t,l,i,s=e[25].name+"",o,u,c,a=e[25].grade+"",d,g,f=((M=e[26])==null?void 0:M.name)+"",p,_,v,E=ft(e[5])+"",w,R,T,S;function A(){return e[20](e[25])}return{key:n,first:null,c(){var k;t=m("div"),l=m("div"),i=m("div"),o=O(s),u=y(),c=m("div"),d=O(a),g=O(" ‚Ä¢ "),p=O(f),_=y(),v=m("button"),w=O(E),R=y(),h(i,"class","runner-name svelte-1bc13oq"),h(c,"class","runner-details svelte-1bc13oq"),h(l,"class","runner-info svelte-1bc13oq"),h(v,"class","time-btn svelte-1bc13oq"),h(t,"class","runner-timing-row svelte-1bc13oq"),be(t,"border-left","4px solid "+(((k=e[26])==null?void 0:k.color)||"#6b7280")),this.first=t},m(k,I){H(k,t,I),r(t,l),r(l,i),r(i,o),r(l,u),r(l,c),r(c,d),r(c,g),r(c,p),r(t,_),r(t,v),r(v,w),r(t,R),T||(S=j(v,"click",A),T=!0)},p(k,I){var N,B;e=k,I[0]&64&&s!==(s=e[25].name+"")&&Y(o,s),I[0]&64&&a!==(a=e[25].grade+"")&&Y(d,a),I[0]&64&&f!==(f=((N=e[26])==null?void 0:N.name)+"")&&Y(p,f),I[0]&32&&E!==(E=ft(e[5])+"")&&Y(w,E),I[0]&64&&be(t,"border-left","4px solid "+(((B=e[26])==null?void 0:B.color)||"#6b7280"))},d(k){k&&q(t),T=!1,S()}}}function kn(n){let e,t,l,i,s,o,u,c,a,d=[],g=new Map,f,p,_=me(n[7]);const v=E=>E[25].id;for(let E=0;E<_.length;E+=1){let w=dn(n,_,E),R=v(w);g.set(R,d[E]=Cn(R,w))}return{c(){e=m("div"),t=m("div"),l=m("h3"),l.textContent="Recorded Times",i=y(),s=m("button"),o=O("üóëÔ∏è Reset Times"),c=y(),a=m("div");for(let E=0;E<d.length;E+=1)d[E].c();h(l,"class","svelte-1bc13oq"),h(s,"class","reset-checkpoint-btn svelte-1bc13oq"),h(s,"title",u="Clear all times for "+n[15]()+" at "+n[1]),h(t,"class","completed-header svelte-1bc13oq"),h(a,"class","completed-list svelte-1bc13oq"),h(e,"class","completed-runners svelte-1bc13oq")},m(E,w){H(E,e,w),r(e,t),r(t,l),r(t,i),r(t,s),r(s,o),r(e,c),r(e,a);for(let R=0;R<d.length;R+=1)d[R]&&d[R].m(a,null);f||(p=j(s,"click",n[11]),f=!0)},p(E,w){w[0]&258&&u!==(u="Clear all times for "+E[15]()+" at "+E[1])&&h(s,"title",u),w[0]&20608&&(_=me(E[7]),d=ze(d,w,v,1,E,_,g,a,Qe,Cn,null,dn))},d(E){E&&q(e);for(let w=0;w<d.length;w+=1)d[w].d();f=!1,p()}}}function Cn(n,e){var V;let t,l,i,s=e[25].name+"",o,u,c,a=e[25].grade+"",d,g,f=((V=e[26])==null?void 0:V.name)+"",p,_,v,E,w=e[25].recordedTime+"",R,T,S,A,M,k,I,N;function B(){return e[21](e[25])}return{key:n,first:null,c(){var C;t=m("div"),l=m("div"),i=m("div"),o=O(s),u=y(),c=m("div"),d=O(a),g=O(" ‚Ä¢ "),p=O(f),_=y(),v=m("div"),E=m("div"),R=O(w),T=y(),S=m("button"),A=O("‚Ü©Ô∏è"),k=y(),h(i,"class","runner-name svelte-1bc13oq"),h(c,"class","runner-details svelte-1bc13oq"),h(l,"class","runner-info svelte-1bc13oq"),h(E,"class","recorded-time svelte-1bc13oq"),h(S,"class","unset-btn svelte-1bc13oq"),h(S,"title",M="Remove time and return "+e[25].name+" to active timing"),h(v,"class","time-actions svelte-1bc13oq"),h(t,"class","completed-runner-row svelte-1bc13oq"),be(t,"border-left","4px solid "+(((C=e[26])==null?void 0:C.color)||"#6b7280")),this.first=t},m(C,b){H(C,t,b),r(t,l),r(l,i),r(i,o),r(l,u),r(l,c),r(c,d),r(c,g),r(c,p),r(t,_),r(t,v),r(v,E),r(E,R),r(v,T),r(v,S),r(S,A),r(t,k),I||(N=j(S,"click",B),I=!0)},p(C,b){var L,G;e=C,b[0]&128&&s!==(s=e[25].name+"")&&Y(o,s),b[0]&128&&a!==(a=e[25].grade+"")&&Y(d,a),b[0]&128&&f!==(f=((L=e[26])==null?void 0:L.name)+"")&&Y(p,f),b[0]&128&&w!==(w=e[25].recordedTime+"")&&Y(R,w),b[0]&128&&M!==(M="Remove time and return "+e[25].name+" to active timing")&&h(S,"title",M),b[0]&128&&be(t,"border-left","4px solid "+(((G=e[26])==null?void 0:G.color)||"#6b7280"))},d(C){C&&q(t),I=!1,N()}}}function Sn(n){let e,t,l,i;return{c(){e=m("div"),t=O("All runners from selected team(s) already have times recorded for "),l=O(n[1]),i=O("."),h(e,"class","no-runners-message svelte-1bc13oq")},m(s,o){H(s,e,o),r(e,t),r(e,l),r(e,i)},p(s,o){o[0]&2&&Y(l,s[1])},d(s){s&&q(e)}}}function ti(n){let e,t,l,i,s,o=ft(n[5])+"",u,c,a,d,g,f,p,_,v,E=!n[2].trim(),w,R,T,S,A,M,k,I,N=[],B=new Map,V,C,b,L,G,z,Z,ue,x,se,K,_e,$=E&&gn();function X(F,D){return F[4]?Gl:Yl}let oe=X(n),de=oe(n),ce=me(n[3].teams);const te=F=>F[26].id;for(let F=0;F<ce.length;F+=1){let D=mn(n,ce,F),U=te(D);B.set(U,N[F]=pn(U,D))}let Q=n[0].length===0&&_n(),W=me(n[8]),P=[];for(let F=0;F<W.length;F+=1)P[F]=vn(hn(n,W,F));let J=!n[1]&&wn();function fe(F,D){return D[0]&7&&(se=null),se==null&&(se=!!(F[0].length>0&&F[1]&&F[2].trim())),se?Xl:Zl}let ne=fe(n,[-1,-1]),ee=ne(n);return{c(){e=m("div"),t=m("div"),l=m("h2"),l.textContent="Race Timer",i=y(),s=m("div"),u=O(o),c=y(),a=m("div"),d=m("div"),g=m("div"),f=m("label"),f.textContent="Race Name",p=y(),_=m("input"),v=y(),$&&$.c(),w=y(),R=m("div"),de.c(),T=y(),S=m("div"),A=m("div"),M=m("label"),M.textContent="Select Team(s):",k=y(),I=m("div");for(let F=0;F<N.length;F+=1)N[F].c();V=y(),Q&&Q.c(),C=y(),b=m("div"),L=m("label"),L.textContent="Checkpoint:",G=y(),z=m("select"),Z=m("option"),Z.textContent="Select Checkpoint";for(let F=0;F<P.length;F+=1)P[F].c();ue=y(),J&&J.c(),x=y(),ee.c(),h(l,"class","svelte-1bc13oq"),h(s,"class","timer-display svelte-1bc13oq"),pe(s,"running",n[4]),h(t,"class","header svelte-1bc13oq"),h(f,"for","race-name"),h(f,"class","svelte-1bc13oq"),h(_,"id","race-name"),h(_,"type","text"),h(_,"placeholder","e.g., State Championship, League Meet"),_.disabled=n[4],h(_,"class","race-input svelte-1bc13oq"),h(g,"class","form-group svelte-1bc13oq"),h(d,"class","race-input-section svelte-1bc13oq"),h(R,"class","timer-controls svelte-1bc13oq"),h(M,"class","svelte-1bc13oq"),h(I,"class","team-checkboxes svelte-1bc13oq"),h(A,"class","team-selection svelte-1bc13oq"),h(L,"for","checkpoint-select"),h(L,"class","svelte-1bc13oq"),Z.__value="",ie(Z,Z.__value),h(z,"id","checkpoint-select"),z.disabled=n[4],h(z,"class","svelte-1bc13oq"),n[1]===void 0&&Ie(()=>n[19].call(z)),h(b,"class","checkpoint-selection svelte-1bc13oq"),h(S,"class","selection-controls svelte-1bc13oq"),h(a,"class","controls-section svelte-1bc13oq"),h(e,"class","timing-container svelte-1bc13oq")},m(F,D){H(F,e,D),r(e,t),r(t,l),r(t,i),r(t,s),r(s,u),r(e,c),r(e,a),r(a,d),r(d,g),r(g,f),r(g,p),r(g,_),ie(_,n[2]),r(g,v),$&&$.m(g,null),r(a,w),r(a,R),de.m(R,null),r(a,T),r(a,S),r(S,A),r(A,M),r(A,k),r(A,I);for(let U=0;U<N.length;U+=1)N[U]&&N[U].m(I,null);r(A,V),Q&&Q.m(A,null),r(S,C),r(S,b),r(b,L),r(b,G),r(b,z),r(z,Z);for(let U=0;U<P.length;U+=1)P[U]&&P[U].m(z,null);Ce(z,n[1],!0),r(b,ue),J&&J.m(b,null),r(e,x),ee.m(e,null),K||(_e=[j(_,"input",n[17]),j(z,"change",n[19])],K=!0)},p(F,D){if(D[0]&32&&o!==(o=ft(F[5])+"")&&Y(u,o),D[0]&16&&pe(s,"running",F[4]),D[0]&16&&(_.disabled=F[4]),D[0]&4&&_.value!==F[2]&&ie(_,F[2]),D[0]&4&&(E=!F[2].trim()),E?$||($=gn(),$.c(),$.m(g,null)):$&&($.d(1),$=null),oe===(oe=X(F))&&de?de.p(F,D):(de.d(1),de=oe(F),de&&(de.c(),de.m(R,null))),D[0]&65561&&(ce=me(F[3].teams),N=ze(N,D,te,1,F,ce,B,I,Qe,pn,null,mn)),F[0].length===0?Q||(Q=_n(),Q.c(),Q.m(A,null)):Q&&(Q.d(1),Q=null),D[0]&256){W=me(F[8]);let U;for(U=0;U<W.length;U+=1){const he=hn(F,W,U);P[U]?P[U].p(he,D):(P[U]=vn(he),P[U].c(),P[U].m(z,null))}for(;U<P.length;U+=1)P[U].d(1);P.length=W.length}D[0]&16&&(z.disabled=F[4]),D[0]&258&&Ce(z,F[1]),F[1]?J&&(J.d(1),J=null):J||(J=wn(),J.c(),J.m(b,null)),ne===(ne=fe(F,D))&&ee?ee.p(F,D):(ee.d(1),ee=ne(F),ee&&(ee.c(),ee.m(e,null)))},i:ge,o:ge,d(F){F&&q(e),$&&$.d(),de.d();for(let D=0;D<N.length;D+=1)N[D].d();Q&&Q.d(),Ne(P,F),J&&J.d(),ee.d(),K=!1,ve(_e)}}}function ft(n){const e=Math.floor(n/1e3),t=Math.floor(e/60),l=e%60,i=Math.floor(n%1e3/10);return`${t.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}.${i.toString().padStart(2,"0")}`}function ni(n){const e=Math.floor(n/1e3),t=Math.floor(e/60),l=e%60;return`${t}:${l.toString().padStart(2,"0")}`}function li(n,e,t){let l,i;Be(n,we,C=>t(3,l=C)),Be(n,Ul,C=>t(8,i=C));let s=!1,o=0,u=0,c=null,a=[],d="",g="",f=[],p=[];function _(){const C=l.runners.filter(G=>a.includes(G.teamId)),b=[],L=[];C.forEach(G=>{const z=l.times.find(Z=>Z.runnerId===G.id&&Z.checkpoint===d);z?L.push({...G,recordedTime:z.time}):b.push(G)}),t(6,f=b),t(7,p=L)}function v(){a.length===0||!d||!g.trim()||(we.setCurrentRace(g.trim()),o=Date.now(),t(5,u=0),t(4,s=!0),c=setInterval(()=>{t(5,u=Date.now()-o)},10))}function E(){t(4,s=!1),c&&(clearInterval(c),c=null)}function w(){we.update(C=>({...C,times:C.times.filter(b=>{if(b.checkpoint!==d)return!0;const L=C.runners.find(G=>G.id===b.runnerId);return!L||!a.includes(L.teamId)}),updated:Date.now()}))}function R(C){we.removeTime(C.id,d)}function T(C){if(!s)return;const b=ni(u);we.addTime({runnerId:C.id,checkpoint:d,time:b},g.trim())}function S(C){return l.teams.find(b=>b.id===C)}function A(){return a.map(C=>{var b;return(b=S(C))==null?void 0:b.name}).filter(Boolean).join(", ")}function M(C){a.includes(C)?t(0,a=a.filter(b=>b!==C)):t(0,a=[...a,C])}Tl(()=>{c&&clearInterval(c)});function k(){g=this.value,t(2,g),t(3,l)}const I=C=>M(C.id);function N(){d=He(this),t(1,d)}const B=C=>T(C),V=C=>R(C);return n.$$.update=()=>{n.$$.dirty[0]&12&&l.currentRace&&!g&&t(2,g=l.currentRace),n.$$.dirty[0]&11&&(a.length>0&&d&&l?_():(t(6,f=[]),t(7,p=[])))},[a,d,g,l,s,u,f,p,i,v,E,w,R,T,S,A,M,k,I,N,B,V]}class ii extends Ze{constructor(e){super(),Ye(this,e,li,ti,Oe,{},null,[-1,-1])}}var it={},si=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},ll={},ye={};let Bt;const oi=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];ye.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};ye.getSymbolTotalCodewords=function(e){return oi[e]};ye.getBCHDigit=function(n){let e=0;for(;n!==0;)e++,n>>>=1;return e};ye.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');Bt=e};ye.isKanjiModeEnabled=function(){return typeof Bt<"u"};ye.toSJIS=function(e){return Bt(e)};var pt={};(function(n){n.L={bit:1},n.M={bit:0},n.Q={bit:3},n.H={bit:2};function e(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return n.L;case"m":case"medium":return n.M;case"q":case"quartile":return n.Q;case"h":case"high":return n.H;default:throw new Error("Unknown EC Level: "+t)}}n.isValid=function(l){return l&&typeof l.bit<"u"&&l.bit>=0&&l.bit<4},n.from=function(l,i){if(n.isValid(l))return l;try{return e(l)}catch{return i}}})(pt);function il(){this.buffer=[],this.length=0}il.prototype={get:function(n){const e=Math.floor(n/8);return(this.buffer[e]>>>7-n%8&1)===1},put:function(n,e){for(let t=0;t<e;t++)this.putBit((n>>>e-t-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(n){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),n&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var ri=il;function st(n){if(!n||n<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=n,this.data=new Uint8Array(n*n),this.reservedBit=new Uint8Array(n*n)}st.prototype.set=function(n,e,t,l){const i=n*this.size+e;this.data[i]=t,l&&(this.reservedBit[i]=!0)};st.prototype.get=function(n,e){return this.data[n*this.size+e]};st.prototype.xor=function(n,e,t){this.data[n*this.size+e]^=t};st.prototype.isReserved=function(n,e){return this.reservedBit[n*this.size+e]};var ai=st,sl={};(function(n){const e=ye.getSymbolSize;n.getRowColCoords=function(l){if(l===1)return[];const i=Math.floor(l/7)+2,s=e(l),o=s===145?26:Math.ceil((s-13)/(2*i-2))*2,u=[s-7];for(let c=1;c<i-1;c++)u[c]=u[c-1]-o;return u.push(6),u.reverse()},n.getPositions=function(l){const i=[],s=n.getRowColCoords(l),o=s.length;for(let u=0;u<o;u++)for(let c=0;c<o;c++)u===0&&c===0||u===0&&c===o-1||u===o-1&&c===0||i.push([s[u],s[c]]);return i}})(sl);var ol={};const ci=ye.getSymbolSize,En=7;ol.getPositions=function(e){const t=ci(e);return[[0,0],[t-En,0],[0,t-En]]};var rl={};(function(n){n.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};n.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},n.from=function(i){return n.isValid(i)?parseInt(i,10):void 0},n.getPenaltyN1=function(i){const s=i.size;let o=0,u=0,c=0,a=null,d=null;for(let g=0;g<s;g++){u=c=0,a=d=null;for(let f=0;f<s;f++){let p=i.get(g,f);p===a?u++:(u>=5&&(o+=e.N1+(u-5)),a=p,u=1),p=i.get(f,g),p===d?c++:(c>=5&&(o+=e.N1+(c-5)),d=p,c=1)}u>=5&&(o+=e.N1+(u-5)),c>=5&&(o+=e.N1+(c-5))}return o},n.getPenaltyN2=function(i){const s=i.size;let o=0;for(let u=0;u<s-1;u++)for(let c=0;c<s-1;c++){const a=i.get(u,c)+i.get(u,c+1)+i.get(u+1,c)+i.get(u+1,c+1);(a===4||a===0)&&o++}return o*e.N2},n.getPenaltyN3=function(i){const s=i.size;let o=0,u=0,c=0;for(let a=0;a<s;a++){u=c=0;for(let d=0;d<s;d++)u=u<<1&2047|i.get(a,d),d>=10&&(u===1488||u===93)&&o++,c=c<<1&2047|i.get(d,a),d>=10&&(c===1488||c===93)&&o++}return o*e.N3},n.getPenaltyN4=function(i){let s=0;const o=i.data.length;for(let c=0;c<o;c++)s+=i.data[c];return Math.abs(Math.ceil(s*100/o/5)-10)*e.N4};function t(l,i,s){switch(l){case n.Patterns.PATTERN000:return(i+s)%2===0;case n.Patterns.PATTERN001:return i%2===0;case n.Patterns.PATTERN010:return s%3===0;case n.Patterns.PATTERN011:return(i+s)%3===0;case n.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(s/3))%2===0;case n.Patterns.PATTERN101:return i*s%2+i*s%3===0;case n.Patterns.PATTERN110:return(i*s%2+i*s%3)%2===0;case n.Patterns.PATTERN111:return(i*s%3+(i+s)%2)%2===0;default:throw new Error("bad maskPattern:"+l)}}n.applyMask=function(i,s){const o=s.size;for(let u=0;u<o;u++)for(let c=0;c<o;c++)s.isReserved(c,u)||s.xor(c,u,t(i,c,u))},n.getBestMask=function(i,s){const o=Object.keys(n.Patterns).length;let u=0,c=1/0;for(let a=0;a<o;a++){s(a),n.applyMask(a,i);const d=n.getPenaltyN1(i)+n.getPenaltyN2(i)+n.getPenaltyN3(i)+n.getPenaltyN4(i);n.applyMask(a,i),d<c&&(c=d,u=a)}return u}})(rl);var _t={};const Me=pt,at=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],ct=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];_t.getBlocksCount=function(e,t){switch(t){case Me.L:return at[(e-1)*4+0];case Me.M:return at[(e-1)*4+1];case Me.Q:return at[(e-1)*4+2];case Me.H:return at[(e-1)*4+3];default:return}};_t.getTotalCodewordsCount=function(e,t){switch(t){case Me.L:return ct[(e-1)*4+0];case Me.M:return ct[(e-1)*4+1];case Me.Q:return ct[(e-1)*4+2];case Me.H:return ct[(e-1)*4+3];default:return}};var al={},vt={};const xe=new Uint8Array(512),ht=new Uint8Array(256);(function(){let e=1;for(let t=0;t<255;t++)xe[t]=e,ht[e]=t,e<<=1,e&256&&(e^=285);for(let t=255;t<512;t++)xe[t]=xe[t-255]})();vt.log=function(e){if(e<1)throw new Error("log("+e+")");return ht[e]};vt.exp=function(e){return xe[e]};vt.mul=function(e,t){return e===0||t===0?0:xe[ht[e]+ht[t]]};(function(n){const e=vt;n.mul=function(l,i){const s=new Uint8Array(l.length+i.length-1);for(let o=0;o<l.length;o++)for(let u=0;u<i.length;u++)s[o+u]^=e.mul(l[o],i[u]);return s},n.mod=function(l,i){let s=new Uint8Array(l);for(;s.length-i.length>=0;){const o=s[0];for(let c=0;c<i.length;c++)s[c]^=e.mul(i[c],o);let u=0;for(;u<s.length&&s[u]===0;)u++;s=s.slice(u)}return s},n.generateECPolynomial=function(l){let i=new Uint8Array([1]);for(let s=0;s<l;s++)i=n.mul(i,new Uint8Array([1,e.exp(s)]));return i}})(al);const cl=al;function Ot(n){this.genPoly=void 0,this.degree=n,this.degree&&this.initialize(this.degree)}Ot.prototype.initialize=function(e){this.degree=e,this.genPoly=cl.generateECPolynomial(this.degree)};Ot.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(e.length+this.degree);t.set(e);const l=cl.mod(t,this.genPoly),i=this.degree-l.length;if(i>0){const s=new Uint8Array(this.degree);return s.set(l,i),s}return l};var ui=Ot,ul={},De={},Ft={};Ft.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var Ee={};const dl="[0-9]+",di="[A-Z $%*+\\-./:]+";let nt="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";nt=nt.replace(/u/g,"\\u");const fi="(?:(?![A-Z0-9 $%*+\\-./:]|"+nt+`)(?:.|[\r
]))+`;Ee.KANJI=new RegExp(nt,"g");Ee.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Ee.BYTE=new RegExp(fi,"g");Ee.NUMERIC=new RegExp(dl,"g");Ee.ALPHANUMERIC=new RegExp(di,"g");const hi=new RegExp("^"+nt+"$"),mi=new RegExp("^"+dl+"$"),gi=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Ee.testKanji=function(e){return hi.test(e)};Ee.testNumeric=function(e){return mi.test(e)};Ee.testAlphanumeric=function(e){return gi.test(e)};(function(n){const e=Ft,t=Ee;n.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},n.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},n.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},n.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},n.MIXED={bit:-1},n.getCharCountIndicator=function(s,o){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?s.ccBits[0]:o<27?s.ccBits[1]:s.ccBits[2]},n.getBestModeForData=function(s){return t.testNumeric(s)?n.NUMERIC:t.testAlphanumeric(s)?n.ALPHANUMERIC:t.testKanji(s)?n.KANJI:n.BYTE},n.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},n.isValid=function(s){return s&&s.bit&&s.ccBits};function l(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return n.NUMERIC;case"alphanumeric":return n.ALPHANUMERIC;case"kanji":return n.KANJI;case"byte":return n.BYTE;default:throw new Error("Unknown mode: "+i)}}n.from=function(s,o){if(n.isValid(s))return s;try{return l(s)}catch{return o}}})(De);(function(n){const e=ye,t=_t,l=pt,i=De,s=Ft,o=7973,u=e.getBCHDigit(o);function c(f,p,_){for(let v=1;v<=40;v++)if(p<=n.getCapacity(v,_,f))return v}function a(f,p){return i.getCharCountIndicator(f,p)+4}function d(f,p){let _=0;return f.forEach(function(v){const E=a(v.mode,p);_+=E+v.getBitsLength()}),_}function g(f,p){for(let _=1;_<=40;_++)if(d(f,_)<=n.getCapacity(_,p,i.MIXED))return _}n.from=function(p,_){return s.isValid(p)?parseInt(p,10):_},n.getCapacity=function(p,_,v){if(!s.isValid(p))throw new Error("Invalid QR Code version");typeof v>"u"&&(v=i.BYTE);const E=e.getSymbolTotalCodewords(p),w=t.getTotalCodewordsCount(p,_),R=(E-w)*8;if(v===i.MIXED)return R;const T=R-a(v,p);switch(v){case i.NUMERIC:return Math.floor(T/10*3);case i.ALPHANUMERIC:return Math.floor(T/11*2);case i.KANJI:return Math.floor(T/13);case i.BYTE:default:return Math.floor(T/8)}},n.getBestVersionForData=function(p,_){let v;const E=l.from(_,l.M);if(Array.isArray(p)){if(p.length>1)return g(p,E);if(p.length===0)return 1;v=p[0]}else v=p;return c(v.mode,v.getLength(),E)},n.getEncodedBits=function(p){if(!s.isValid(p)||p<7)throw new Error("Invalid QR Code version");let _=p<<12;for(;e.getBCHDigit(_)-u>=0;)_^=o<<e.getBCHDigit(_)-u;return p<<12|_}})(ul);var fl={};const Mt=ye,hl=1335,pi=21522,Tn=Mt.getBCHDigit(hl);fl.getEncodedBits=function(e,t){const l=e.bit<<3|t;let i=l<<10;for(;Mt.getBCHDigit(i)-Tn>=0;)i^=hl<<Mt.getBCHDigit(i)-Tn;return(l<<10|i)^pi};var ml={};const _i=De;function je(n){this.mode=_i.NUMERIC,this.data=n.toString()}je.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};je.prototype.getLength=function(){return this.data.length};je.prototype.getBitsLength=function(){return je.getBitsLength(this.data.length)};je.prototype.write=function(e){let t,l,i;for(t=0;t+3<=this.data.length;t+=3)l=this.data.substr(t,3),i=parseInt(l,10),e.put(i,10);const s=this.data.length-t;s>0&&(l=this.data.substr(t),i=parseInt(l,10),e.put(i,s*3+1))};var vi=je;const wi=De,kt=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Je(n){this.mode=wi.ALPHANUMERIC,this.data=n}Je.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};Je.prototype.getLength=function(){return this.data.length};Je.prototype.getBitsLength=function(){return Je.getBitsLength(this.data.length)};Je.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let l=kt.indexOf(this.data[t])*45;l+=kt.indexOf(this.data[t+1]),e.put(l,11)}this.data.length%2&&e.put(kt.indexOf(this.data[t]),6)};var bi=Je;const yi=De;function Ke(n){this.mode=yi.BYTE,typeof n=="string"?this.data=new TextEncoder().encode(n):this.data=new Uint8Array(n)}Ke.getBitsLength=function(e){return e*8};Ke.prototype.getLength=function(){return this.data.length};Ke.prototype.getBitsLength=function(){return Ke.getBitsLength(this.data.length)};Ke.prototype.write=function(n){for(let e=0,t=this.data.length;e<t;e++)n.put(this.data[e],8)};var ki=Ke;const Ci=De,Si=ye;function $e(n){this.mode=Ci.KANJI,this.data=n}$e.getBitsLength=function(e){return e*13};$e.prototype.getLength=function(){return this.data.length};$e.prototype.getBitsLength=function(){return $e.getBitsLength(this.data.length)};$e.prototype.write=function(n){let e;for(e=0;e<this.data.length;e++){let t=Si.toSJIS(this.data[e]);if(t>=33088&&t<=40956)t-=33088;else if(t>=57408&&t<=60351)t-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);t=(t>>>8&255)*192+(t&255),n.put(t,13)}};var Ei=$e,gl={exports:{}};(function(n){var e={single_source_shortest_paths:function(t,l,i){var s={},o={};o[l]=0;var u=e.PriorityQueue.make();u.push(l,0);for(var c,a,d,g,f,p,_,v,E;!u.empty();){c=u.pop(),a=c.value,g=c.cost,f=t[a]||{};for(d in f)f.hasOwnProperty(d)&&(p=f[d],_=g+p,v=o[d],E=typeof o[d]>"u",(E||v>_)&&(o[d]=_,u.push(d,_),s[d]=a))}if(typeof i<"u"&&typeof o[i]>"u"){var w=["Could not find a path from ",l," to ",i,"."].join("");throw new Error(w)}return s},extract_shortest_path_from_predecessor_list:function(t,l){for(var i=[],s=l;s;)i.push(s),t[s],s=t[s];return i.reverse(),i},find_path:function(t,l,i){var s=e.single_source_shortest_paths(t,l,i);return e.extract_shortest_path_from_predecessor_list(s,i)},PriorityQueue:{make:function(t){var l=e.PriorityQueue,i={},s;t=t||{};for(s in l)l.hasOwnProperty(s)&&(i[s]=l[s]);return i.queue=[],i.sorter=t.sorter||l.default_sorter,i},default_sorter:function(t,l){return t.cost-l.cost},push:function(t,l){var i={value:t,cost:l};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};n.exports=e})(gl);var Ti=gl.exports;(function(n){const e=De,t=vi,l=bi,i=ki,s=Ei,o=Ee,u=ye,c=Ti;function a(w){return unescape(encodeURIComponent(w)).length}function d(w,R,T){const S=[];let A;for(;(A=w.exec(T))!==null;)S.push({data:A[0],index:A.index,mode:R,length:A[0].length});return S}function g(w){const R=d(o.NUMERIC,e.NUMERIC,w),T=d(o.ALPHANUMERIC,e.ALPHANUMERIC,w);let S,A;return u.isKanjiModeEnabled()?(S=d(o.BYTE,e.BYTE,w),A=d(o.KANJI,e.KANJI,w)):(S=d(o.BYTE_KANJI,e.BYTE,w),A=[]),R.concat(T,S,A).sort(function(k,I){return k.index-I.index}).map(function(k){return{data:k.data,mode:k.mode,length:k.length}})}function f(w,R){switch(R){case e.NUMERIC:return t.getBitsLength(w);case e.ALPHANUMERIC:return l.getBitsLength(w);case e.KANJI:return s.getBitsLength(w);case e.BYTE:return i.getBitsLength(w)}}function p(w){return w.reduce(function(R,T){const S=R.length-1>=0?R[R.length-1]:null;return S&&S.mode===T.mode?(R[R.length-1].data+=T.data,R):(R.push(T),R)},[])}function _(w){const R=[];for(let T=0;T<w.length;T++){const S=w[T];switch(S.mode){case e.NUMERIC:R.push([S,{data:S.data,mode:e.ALPHANUMERIC,length:S.length},{data:S.data,mode:e.BYTE,length:S.length}]);break;case e.ALPHANUMERIC:R.push([S,{data:S.data,mode:e.BYTE,length:S.length}]);break;case e.KANJI:R.push([S,{data:S.data,mode:e.BYTE,length:a(S.data)}]);break;case e.BYTE:R.push([{data:S.data,mode:e.BYTE,length:a(S.data)}])}}return R}function v(w,R){const T={},S={start:{}};let A=["start"];for(let M=0;M<w.length;M++){const k=w[M],I=[];for(let N=0;N<k.length;N++){const B=k[N],V=""+M+N;I.push(V),T[V]={node:B,lastCount:0},S[V]={};for(let C=0;C<A.length;C++){const b=A[C];T[b]&&T[b].node.mode===B.mode?(S[b][V]=f(T[b].lastCount+B.length,B.mode)-f(T[b].lastCount,B.mode),T[b].lastCount+=B.length):(T[b]&&(T[b].lastCount=B.length),S[b][V]=f(B.length,B.mode)+4+e.getCharCountIndicator(B.mode,R))}}A=I}for(let M=0;M<A.length;M++)S[A[M]].end=0;return{map:S,table:T}}function E(w,R){let T;const S=e.getBestModeForData(w);if(T=e.from(R,S),T!==e.BYTE&&T.bit<S.bit)throw new Error('"'+w+'" cannot be encoded with mode '+e.toString(T)+`.
 Suggested mode is: `+e.toString(S));switch(T===e.KANJI&&!u.isKanjiModeEnabled()&&(T=e.BYTE),T){case e.NUMERIC:return new t(w);case e.ALPHANUMERIC:return new l(w);case e.KANJI:return new s(w);case e.BYTE:return new i(w)}}n.fromArray=function(R){return R.reduce(function(T,S){return typeof S=="string"?T.push(E(S,null)):S.data&&T.push(E(S.data,S.mode)),T},[])},n.fromString=function(R,T){const S=g(R,u.isKanjiModeEnabled()),A=_(S),M=v(A,T),k=c.find_path(M.map,"start","end"),I=[];for(let N=1;N<k.length-1;N++)I.push(M.table[k[N]].node);return n.fromArray(p(I))},n.rawSplit=function(R){return n.fromArray(g(R,u.isKanjiModeEnabled()))}})(ml);const wt=ye,Ct=pt,Ri=ri,Ii=ai,Mi=sl,Ni=ol,Nt=rl,Dt=_t,Di=ui,mt=ul,Li=fl,Ai=De,St=ml;function Pi(n,e){const t=n.size,l=Ni.getPositions(e);for(let i=0;i<l.length;i++){const s=l[i][0],o=l[i][1];for(let u=-1;u<=7;u++)if(!(s+u<=-1||t<=s+u))for(let c=-1;c<=7;c++)o+c<=-1||t<=o+c||(u>=0&&u<=6&&(c===0||c===6)||c>=0&&c<=6&&(u===0||u===6)||u>=2&&u<=4&&c>=2&&c<=4?n.set(s+u,o+c,!0,!0):n.set(s+u,o+c,!1,!0))}}function Bi(n){const e=n.size;for(let t=8;t<e-8;t++){const l=t%2===0;n.set(t,6,l,!0),n.set(6,t,l,!0)}}function Oi(n,e){const t=Mi.getPositions(e);for(let l=0;l<t.length;l++){const i=t[l][0],s=t[l][1];for(let o=-2;o<=2;o++)for(let u=-2;u<=2;u++)o===-2||o===2||u===-2||u===2||o===0&&u===0?n.set(i+o,s+u,!0,!0):n.set(i+o,s+u,!1,!0)}}function Fi(n,e){const t=n.size,l=mt.getEncodedBits(e);let i,s,o;for(let u=0;u<18;u++)i=Math.floor(u/3),s=u%3+t-8-3,o=(l>>u&1)===1,n.set(i,s,o,!0),n.set(s,i,o,!0)}function Et(n,e,t){const l=n.size,i=Li.getEncodedBits(e,t);let s,o;for(s=0;s<15;s++)o=(i>>s&1)===1,s<6?n.set(s,8,o,!0):s<8?n.set(s+1,8,o,!0):n.set(l-15+s,8,o,!0),s<8?n.set(8,l-s-1,o,!0):s<9?n.set(8,15-s-1+1,o,!0):n.set(8,15-s-1,o,!0);n.set(l-8,8,1,!0)}function Ui(n,e){const t=n.size;let l=-1,i=t-1,s=7,o=0;for(let u=t-1;u>0;u-=2)for(u===6&&u--;;){for(let c=0;c<2;c++)if(!n.isReserved(i,u-c)){let a=!1;o<e.length&&(a=(e[o]>>>s&1)===1),n.set(i,u-c,a),s--,s===-1&&(o++,s=7)}if(i+=l,i<0||t<=i){i-=l,l=-l;break}}}function qi(n,e,t){const l=new Ri;t.forEach(function(c){l.put(c.mode.bit,4),l.put(c.getLength(),Ai.getCharCountIndicator(c.mode,n)),c.write(l)});const i=wt.getSymbolTotalCodewords(n),s=Dt.getTotalCodewordsCount(n,e),o=(i-s)*8;for(l.getLengthInBits()+4<=o&&l.put(0,4);l.getLengthInBits()%8!==0;)l.putBit(0);const u=(o-l.getLengthInBits())/8;for(let c=0;c<u;c++)l.put(c%2?17:236,8);return Hi(l,n,e)}function Hi(n,e,t){const l=wt.getSymbolTotalCodewords(e),i=Dt.getTotalCodewordsCount(e,t),s=l-i,o=Dt.getBlocksCount(e,t),u=l%o,c=o-u,a=Math.floor(l/o),d=Math.floor(s/o),g=d+1,f=a-d,p=new Di(f);let _=0;const v=new Array(o),E=new Array(o);let w=0;const R=new Uint8Array(n.buffer);for(let k=0;k<o;k++){const I=k<c?d:g;v[k]=R.slice(_,_+I),E[k]=p.encode(v[k]),_+=I,w=Math.max(w,I)}const T=new Uint8Array(l);let S=0,A,M;for(A=0;A<w;A++)for(M=0;M<o;M++)A<v[M].length&&(T[S++]=v[M][A]);for(A=0;A<f;A++)for(M=0;M<o;M++)T[S++]=E[M][A];return T}function Vi(n,e,t,l){let i;if(Array.isArray(n))i=St.fromArray(n);else if(typeof n=="string"){let a=e;if(!a){const d=St.rawSplit(n);a=mt.getBestVersionForData(d,t)}i=St.fromString(n,a||40)}else throw new Error("Invalid data");const s=mt.getBestVersionForData(i,t);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=s;else if(e<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);const o=qi(e,t,i),u=wt.getSymbolSize(e),c=new Ii(u);return Pi(c,e),Bi(c),Oi(c,e),Et(c,t,0),e>=7&&Fi(c,e),Ui(c,o),isNaN(l)&&(l=Nt.getBestMask(c,Et.bind(null,c,t))),Nt.applyMask(l,c),Et(c,t,l),{modules:c,version:e,errorCorrectionLevel:t,maskPattern:l,segments:i}}ll.create=function(e,t){if(typeof e>"u"||e==="")throw new Error("No input text");let l=Ct.M,i,s;return typeof t<"u"&&(l=Ct.from(t.errorCorrectionLevel,Ct.M),i=mt.from(t.version),s=Nt.from(t.maskPattern),t.toSJISFunc&&wt.setToSJISFunction(t.toSJISFunc)),Vi(e,i,l,s)};var pl={},Ut={};(function(n){function e(t){if(typeof t=="number"&&(t=t.toString()),typeof t!="string")throw new Error("Color should be defined as hex string");let l=t.slice().replace("#","").split("");if(l.length<3||l.length===5||l.length>8)throw new Error("Invalid hex color: "+t);(l.length===3||l.length===4)&&(l=Array.prototype.concat.apply([],l.map(function(s){return[s,s]}))),l.length===6&&l.push("F","F");const i=parseInt(l.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+l.slice(0,6).join("")}}n.getOptions=function(l){l||(l={}),l.color||(l.color={});const i=typeof l.margin>"u"||l.margin===null||l.margin<0?4:l.margin,s=l.width&&l.width>=21?l.width:void 0,o=l.scale||4;return{width:s,scale:s?4:o,margin:i,color:{dark:e(l.color.dark||"#000000ff"),light:e(l.color.light||"#ffffffff")},type:l.type,rendererOpts:l.rendererOpts||{}}},n.getScale=function(l,i){return i.width&&i.width>=l+i.margin*2?i.width/(l+i.margin*2):i.scale},n.getImageWidth=function(l,i){const s=n.getScale(l,i);return Math.floor((l+i.margin*2)*s)},n.qrToImageData=function(l,i,s){const o=i.modules.size,u=i.modules.data,c=n.getScale(o,s),a=Math.floor((o+s.margin*2)*c),d=s.margin*c,g=[s.color.light,s.color.dark];for(let f=0;f<a;f++)for(let p=0;p<a;p++){let _=(f*a+p)*4,v=s.color.light;if(f>=d&&p>=d&&f<a-d&&p<a-d){const E=Math.floor((f-d)/c),w=Math.floor((p-d)/c);v=g[u[E*o+w]?1:0]}l[_++]=v.r,l[_++]=v.g,l[_++]=v.b,l[_]=v.a}}})(Ut);(function(n){const e=Ut;function t(i,s,o){i.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=o,s.width=o,s.style.height=o+"px",s.style.width=o+"px"}function l(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}n.render=function(s,o,u){let c=u,a=o;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),o||(a=l()),c=e.getOptions(c);const d=e.getImageWidth(s.modules.size,c),g=a.getContext("2d"),f=g.createImageData(d,d);return e.qrToImageData(f.data,s,c),t(g,a,d),g.putImageData(f,0,0),a},n.renderToDataURL=function(s,o,u){let c=u;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),c||(c={});const a=n.render(s,o,c),d=c.type||"image/png",g=c.rendererOpts||{};return a.toDataURL(d,g.quality)}})(pl);var _l={};const Qi=Ut;function Rn(n,e){const t=n.a/255,l=e+'="'+n.hex+'"';return t<1?l+" "+e+'-opacity="'+t.toFixed(2).slice(1)+'"':l}function Tt(n,e,t){let l=n+e;return typeof t<"u"&&(l+=" "+t),l}function zi(n,e,t){let l="",i=0,s=!1,o=0;for(let u=0;u<n.length;u++){const c=Math.floor(u%e),a=Math.floor(u/e);!c&&!s&&(s=!0),n[u]?(o++,u>0&&c>0&&n[u-1]||(l+=s?Tt("M",c+t,.5+a+t):Tt("m",i,0),i=0,s=!1),c+1<e&&n[u+1]||(l+=Tt("h",o),o=0)):i++}return l}_l.render=function(e,t,l){const i=Qi.getOptions(t),s=e.modules.size,o=e.modules.data,u=s+i.margin*2,c=i.color.light.a?"<path "+Rn(i.color.light,"fill")+' d="M0 0h'+u+"v"+u+'H0z"/>':"",a="<path "+Rn(i.color.dark,"stroke")+' d="'+zi(o,s,i.margin)+'"/>',d='viewBox="0 0 '+u+" "+u+'"',f='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+d+' shape-rendering="crispEdges">'+c+a+`</svg>
`;return typeof l=="function"&&l(null,f),f};const ji=si,Lt=ll,vl=pl,Ji=_l;function qt(n,e,t,l,i){const s=[].slice.call(arguments,1),o=s.length,u=typeof s[o-1]=="function";if(!u&&!ji())throw new Error("Callback required as last argument");if(u){if(o<2)throw new Error("Too few arguments provided");o===2?(i=t,t=e,e=l=void 0):o===3&&(e.getContext&&typeof i>"u"?(i=l,l=void 0):(i=l,l=t,t=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(t=e,e=l=void 0):o===2&&!e.getContext&&(l=t,t=e,e=void 0),new Promise(function(c,a){try{const d=Lt.create(t,l);c(n(d,e,l))}catch(d){a(d)}})}try{const c=Lt.create(t,l);i(null,n(c,e,l))}catch(c){i(c)}}it.create=Lt.create;it.toCanvas=qt.bind(null,vl.render);it.toDataURL=qt.bind(null,vl.renderToDataURL);it.toString=qt.bind(null,function(n,e,t){return Ji.render(n,t)});async function Ki(n){const e={title:`${n.name} - Cross Country Times`,text:`Times for ${n.runners.length} runners`,url:$i(n)};if(navigator.share&&navigator.canShare&&navigator.canShare(e))try{return await navigator.share(e),!0}catch(t){return console.log("Error sharing:",t),!1}try{return await navigator.clipboard.writeText(JSON.stringify(n,null,2)),!0}catch(t){return console.log("Error copying to clipboard:",t),!1}}function $i(n){return`data:application/json;base64,${btoa(JSON.stringify(n))}`}async function Wi(n){const e=JSON.stringify(n);try{return await it.toDataURL(e,{width:256,margin:2,color:{dark:"#000000",light:"#ffffff"}})}catch(t){throw console.error("Error generating QR code:",t),t}}function Gi(n){const e=JSON.stringify(n,null,2),t=new Blob([e],{type:"application/json"}),l=URL.createObjectURL(t),i=document.createElement("a");i.href=l,i.download=`xc-times-${n.name.replace(/\s+/g,"-").toLowerCase()}.json`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(l)}function In(n,e,t){const l=n.slice();return l[25]=e[t],l}function Mn(n,e,t){const l=n.slice();return l[28]=e[t],l}function Nn(n,e,t){const l=n.slice();return l[31]=e[t],l}function Dn(n){let e,t,l,i,s,o,u,c=n[12](),a=(n[0]==="team"||n[0]==="checkpoint"||n[0]==="race")&&Ln(n),d=(n[0]==="checkpoint"||n[0]==="race")&&Pn(n),g=n[0]==="checkpoint"&&On(n),f=c&&Yi(n);return{c(){e=m("div"),t=m("h4"),t.textContent="Selection Details",l=y(),i=m("div"),a&&a.c(),s=y(),d&&d.c(),o=y(),g&&g.c(),u=y(),f&&f.c(),h(t,"class","svelte-1e4sey9"),h(i,"class","selection-grid svelte-1e4sey9"),h(e,"class","selection-section svelte-1e4sey9")},m(p,_){H(p,e,_),r(e,t),r(e,l),r(e,i),a&&a.m(i,null),r(i,s),d&&d.m(i,null),r(i,o),g&&g.m(i,null),r(e,u),f&&f.m(e,null)},p(p,_){p[0]==="team"||p[0]==="checkpoint"||p[0]==="race"?a?a.p(p,_):(a=Ln(p),a.c(),a.m(i,s)):a&&(a.d(1),a=null),p[0]==="checkpoint"||p[0]==="race"?d?d.p(p,_):(d=Pn(p),d.c(),d.m(i,o)):d&&(d.d(1),d=null),p[0]==="checkpoint"?g?g.p(p,_):(g=On(p),g.c(),g.m(i,null)):g&&(g.d(1),g=null),c&&f.p(p,_)},d(p){p&&q(e),a&&a.d(),d&&d.d(),g&&g.d(),f&&f.d()}}}function Ln(n){let e,t,l,i,s,o,u,c=me(n[1].teams),a=[];for(let d=0;d<c.length;d+=1)a[d]=An(Nn(n,c,d));return{c(){e=m("div"),t=m("label"),t.textContent="Team",l=y(),i=m("select"),s=m("option"),s.textContent="Select a team";for(let d=0;d<a.length;d+=1)a[d].c();h(t,"for","team-select"),h(t,"class","svelte-1e4sey9"),s.__value="",ie(s,s.__value),h(i,"id","team-select"),h(i,"class","svelte-1e4sey9"),n[5]===void 0&&Ie(()=>n[21].call(i)),h(e,"class","form-group svelte-1e4sey9")},m(d,g){H(d,e,g),r(e,t),r(e,l),r(e,i),r(i,s);for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(i,null);Ce(i,n[5],!0),o||(u=j(i,"change",n[21]),o=!0)},p(d,g){if(g[0]&2){c=me(d[1].teams);let f;for(f=0;f<c.length;f+=1){const p=Nn(d,c,f);a[f]?a[f].p(p,g):(a[f]=An(p),a[f].c(),a[f].m(i,null))}for(;f<a.length;f+=1)a[f].d(1);a.length=c.length}g[0]&34&&Ce(i,d[5])},d(d){d&&q(e),Ne(a,d),o=!1,u()}}}function An(n){let e,t=n[31].name+"",l,i;return{c(){e=m("option"),l=O(t),e.__value=i=n[31].id,ie(e,e.__value)},m(s,o){H(s,e,o),r(e,l)},p(s,o){o[0]&2&&t!==(t=s[31].name+"")&&Y(l,t),o[0]&2&&i!==(i=s[31].id)&&(e.__value=i,ie(e,e.__value))},d(s){s&&q(e)}}}function Pn(n){let e,t,l,i,s,o,u,c=me(n[9]),a=[];for(let d=0;d<c.length;d+=1)a[d]=Bn(Mn(n,c,d));return{c(){e=m("div"),t=m("label"),t.textContent="Race",l=y(),i=m("select"),s=m("option"),s.textContent="Select a race";for(let d=0;d<a.length;d+=1)a[d].c();h(t,"for","race-select"),h(t,"class","svelte-1e4sey9"),s.__value="",ie(s,s.__value),h(i,"id","race-select"),h(i,"class","svelte-1e4sey9"),n[7]===void 0&&Ie(()=>n[22].call(i)),h(e,"class","form-group svelte-1e4sey9")},m(d,g){H(d,e,g),r(e,t),r(e,l),r(e,i),r(i,s);for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(i,null);Ce(i,n[7],!0),o||(u=j(i,"change",n[22]),o=!0)},p(d,g){if(g[0]&512){c=me(d[9]);let f;for(f=0;f<c.length;f+=1){const p=Mn(d,c,f);a[f]?a[f].p(p,g):(a[f]=Bn(p),a[f].c(),a[f].m(i,null))}for(;f<a.length;f+=1)a[f].d(1);a.length=c.length}g[0]&640&&Ce(i,d[7])},d(d){d&&q(e),Ne(a,d),o=!1,u()}}}function Bn(n){let e,t=n[28]+"",l,i;return{c(){e=m("option"),l=O(t),e.__value=i=n[28],ie(e,e.__value)},m(s,o){H(s,e,o),r(e,l)},p(s,o){o[0]&512&&t!==(t=s[28]+"")&&Y(l,t),o[0]&512&&i!==(i=s[28])&&(e.__value=i,ie(e,e.__value))},d(s){s&&q(e)}}}function On(n){let e,t,l,i,s,o,u,c=me(n[8]),a=[];for(let d=0;d<c.length;d+=1)a[d]=Fn(In(n,c,d));return{c(){e=m("div"),t=m("label"),t.textContent="Checkpoint",l=y(),i=m("select"),s=m("option"),s.textContent="Select checkpoint";for(let d=0;d<a.length;d+=1)a[d].c();h(t,"for","checkpoint-select"),h(t,"class","svelte-1e4sey9"),s.__value="",ie(s,s.__value),h(i,"id","checkpoint-select"),h(i,"class","svelte-1e4sey9"),n[6]===void 0&&Ie(()=>n[23].call(i)),h(e,"class","form-group svelte-1e4sey9")},m(d,g){H(d,e,g),r(e,t),r(e,l),r(e,i),r(i,s);for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(i,null);Ce(i,n[6],!0),o||(u=j(i,"change",n[23]),o=!0)},p(d,g){if(g[0]&256){c=me(d[8]);let f;for(f=0;f<c.length;f+=1){const p=In(d,c,f);a[f]?a[f].p(p,g):(a[f]=Fn(p),a[f].c(),a[f].m(i,null))}for(;f<a.length;f+=1)a[f].d(1);a.length=c.length}g[0]&320&&Ce(i,d[6])},d(d){d&&q(e),Ne(a,d),o=!1,u()}}}function Fn(n){let e,t=n[25]+"",l,i;return{c(){e=m("option"),l=O(t),e.__value=i=n[25],ie(e,e.__value)},m(s,o){H(s,e,o),r(e,l)},p(s,o){o[0]&256&&t!==(t=s[25]+"")&&Y(l,t),o[0]&256&&i!==(i=s[25])&&(e.__value=i,ie(e,e.__value))},d(s){s&&q(e)}}}function Yi(n){let e,t,l,i=n[11]()+"",s;return{c(){e=m("div"),t=m("strong"),t.textContent="Preview:",l=y(),s=O(i),h(e,"class","selection-preview svelte-1e4sey9")},m(o,u){H(o,e,u),r(e,t),r(e,l),r(e,s)},p:ge,d(o){o&&q(e)}}}function Zi(n){let e;return{c(){e=m("div"),e.innerHTML="<p>Please complete your selection above to enable sharing options.</p>",h(e,"class","selection-required svelte-1e4sey9")},m(t,l){H(t,e,l)},p:ge,d(t){t&&q(e)}}}function Xi(n){let e,t,l,i,s,o,u,c,a,d,g,f,p,_,v=n[3]?"Generating...":"Generate QR Code",E,w,R,T,S,A,M,k,I,N,B,V,C=n[2]&&Un(n);return{c(){e=m("div"),t=m("div"),l=m("h4"),l.textContent="üîó Web Share",i=y(),s=m("p"),s.textContent="Share selected data via your device's native share menu",o=y(),u=m("button"),u.textContent="Share Data",c=y(),a=m("div"),d=m("h4"),d.textContent="üì± QR Code",g=y(),f=m("p"),f.textContent="Generate a QR code for other devices to scan and import",p=y(),_=m("button"),E=O(v),w=y(),R=m("div"),T=m("h4"),T.textContent="üíæ Download JSON",S=y(),A=m("p"),A.textContent="Download selected data as a JSON file for backup",M=y(),k=m("button"),k.textContent="Download File",I=y(),C&&C.c(),N=et(),h(l,"class","svelte-1e4sey9"),h(s,"class","svelte-1e4sey9"),h(u,"class","action-btn primary svelte-1e4sey9"),h(t,"class","action-card svelte-1e4sey9"),h(d,"class","svelte-1e4sey9"),h(f,"class","svelte-1e4sey9"),h(_,"class","action-btn secondary svelte-1e4sey9"),_.disabled=n[3],h(a,"class","action-card svelte-1e4sey9"),h(T,"class","svelte-1e4sey9"),h(A,"class","svelte-1e4sey9"),h(k,"class","action-btn secondary svelte-1e4sey9"),h(R,"class","action-card svelte-1e4sey9"),h(e,"class","actions-grid svelte-1e4sey9")},m(b,L){H(b,e,L),r(e,t),r(t,l),r(t,i),r(t,s),r(t,o),r(t,u),r(e,c),r(e,a),r(a,d),r(a,g),r(a,f),r(a,p),r(a,_),r(_,E),r(e,w),r(e,R),r(R,T),r(R,S),r(R,A),r(R,M),r(R,k),H(b,I,L),C&&C.m(b,L),H(b,N,L),B||(V=[j(u,"click",n[13]),j(_,"click",n[14]),j(k,"click",n[15])],B=!0)},p(b,L){L[0]&8&&v!==(v=b[3]?"Generating...":"Generate QR Code")&&Y(E,v),L[0]&8&&(_.disabled=b[3]),b[2]?C?C.p(b,L):(C=Un(b),C.c(),C.m(N.parentNode,N)):C&&(C.d(1),C=null)},d(b){b&&(q(e),q(I),q(N)),C&&C.d(b),B=!1,ve(V)}}}function Un(n){let e,t,l,i,s,o,u,c;return{c(){e=m("div"),t=m("h4"),t.textContent="QR Code for Import",l=y(),i=m("div"),s=m("img"),u=y(),c=m("p"),c.textContent=`Other devices can scan this QR code to import: ${n[10]()}`,h(t,"class","svelte-1e4sey9"),Qt(s.src,o=n[2])||h(s,"src",o),h(s,"alt","QR Code for session data"),h(s,"class","qr-code svelte-1e4sey9"),h(i,"class","qr-code-container svelte-1e4sey9"),h(c,"class","qr-instructions svelte-1e4sey9"),h(e,"class","qr-code-section svelte-1e4sey9")},m(a,d){H(a,e,d),r(e,t),r(e,l),r(e,i),r(i,s),r(e,u),r(e,c)},p(a,d){d[0]&4&&!Qt(s.src,o=a[2])&&h(s,"src",o)},d(a){a&&q(e)}}}function qn(n){let e,t;return{c(){e=m("div"),t=O(n[4]),h(e,"class","status-message svelte-1e4sey9"),pe(e,"success",n[4].includes("success")),pe(e,"error",n[4].includes("failed"))},m(l,i){H(l,e,i),r(e,t)},p(l,i){i[0]&16&&Y(t,l[4]),i[0]&16&&pe(e,"success",l[4].includes("success")),i[0]&16&&pe(e,"error",l[4].includes("failed"))},d(l){l&&q(e)}}}function Hn(n){let e;return{c(){e=m("div"),e.innerHTML="<p>No data to share yet!</p> <p>Add some runners and times first.</p>",h(e,"class","empty-state svelte-1e4sey9")},m(t,l){H(t,e,l)},d(t){t&&q(e)}}}function xi(n){let e,t,l,i,s,o,u=n[1].name+"",c,a,d,g,f,p,_,v,E,w,R,T,S,A,M,k,I,N,B,V,C,b,L,G,z,Z,ue,x,se,K,_e,$,X=n[0]!=="all"&&Dn(n);function oe(W,P){return W[12]()?Xi:Zi}let ce=oe(n)(n),te=n[4]&&qn(n),Q=n[1].runners.length===0&&Hn();return K=gt(n[17][0]),{c(){e=m("div"),t=m("div"),l=m("h2"),l.textContent="Share & Export",i=y(),s=m("div"),o=O("Session: "),c=O(u),a=y(),d=m("div"),g=m("h3"),g.textContent="What would you like to share?",f=y(),p=m("div"),_=m("label"),v=m("input"),E=y(),w=m("div"),w.innerHTML='<div class="option-title svelte-1e4sey9">üì¶ Complete Session</div> <div class="option-description svelte-1e4sey9">All teams, runners, and timing data</div>',R=y(),T=m("label"),S=m("input"),A=y(),M=m("div"),M.innerHTML='<div class="option-title svelte-1e4sey9">üë• Team Data</div> <div class="option-description svelte-1e4sey9">All runners and times for a specific team</div>',k=y(),I=m("label"),N=m("input"),B=y(),V=m("div"),V.innerHTML='<div class="option-title svelte-1e4sey9">üìç Single Checkpoint</div> <div class="option-description svelte-1e4sey9">Times for one team at one checkpoint in a race</div>',C=y(),b=m("label"),L=m("input"),G=y(),z=m("div"),z.innerHTML='<div class="option-title svelte-1e4sey9">üèÅ Full Race</div> <div class="option-description svelte-1e4sey9">All checkpoints for one team in a specific race</div>',Z=y(),X&&X.c(),ue=y(),ce.c(),x=y(),te&&te.c(),se=y(),Q&&Q.c(),h(l,"class","svelte-1e4sey9"),h(s,"class","session-info svelte-1e4sey9"),h(t,"class","header svelte-1e4sey9"),h(g,"class","svelte-1e4sey9"),h(v,"type","radio"),v.__value="all",ie(v,v.__value),h(v,"class","svelte-1e4sey9"),h(w,"class","option-content svelte-1e4sey9"),h(_,"class","mode-option svelte-1e4sey9"),h(S,"type","radio"),S.__value="team",ie(S,S.__value),h(S,"class","svelte-1e4sey9"),h(M,"class","option-content svelte-1e4sey9"),h(T,"class","mode-option svelte-1e4sey9"),h(N,"type","radio"),N.__value="checkpoint",ie(N,N.__value),h(N,"class","svelte-1e4sey9"),h(V,"class","option-content svelte-1e4sey9"),h(I,"class","mode-option svelte-1e4sey9"),h(L,"type","radio"),L.__value="race",ie(L,L.__value),h(L,"class","svelte-1e4sey9"),h(z,"class","option-content svelte-1e4sey9"),h(b,"class","mode-option svelte-1e4sey9"),h(p,"class","mode-options svelte-1e4sey9"),h(d,"class","share-mode-section svelte-1e4sey9"),h(e,"class","share-container svelte-1e4sey9"),K.p(v,S,N,L)},m(W,P){H(W,e,P),r(e,t),r(t,l),r(t,i),r(t,s),r(s,o),r(s,c),r(e,a),r(e,d),r(d,g),r(d,f),r(d,p),r(p,_),r(_,v),v.checked=v.__value===n[0],r(_,E),r(_,w),r(p,R),r(p,T),r(T,S),S.checked=S.__value===n[0],r(T,A),r(T,M),r(p,k),r(p,I),r(I,N),N.checked=N.__value===n[0],r(I,B),r(I,V),r(p,C),r(p,b),r(b,L),L.checked=L.__value===n[0],r(b,G),r(b,z),r(e,Z),X&&X.m(e,null),r(e,ue),ce.m(e,null),r(e,x),te&&te.m(e,null),r(e,se),Q&&Q.m(e,null),_e||($=[j(v,"change",n[16]),j(S,"change",n[18]),j(N,"change",n[19]),j(L,"change",n[20])],_e=!0)},p(W,P){P[0]&2&&u!==(u=W[1].name+"")&&Y(c,u),P[0]&1&&(v.checked=v.__value===W[0]),P[0]&1&&(S.checked=S.__value===W[0]),P[0]&1&&(N.checked=N.__value===W[0]),P[0]&1&&(L.checked=L.__value===W[0]),W[0]!=="all"?X?X.p(W,P):(X=Dn(W),X.c(),X.m(e,ue)):X&&(X.d(1),X=null),ce.p(W,P),W[4]?te?te.p(W,P):(te=qn(W),te.c(),te.m(e,se)):te&&(te.d(1),te=null),W[1].runners.length===0?Q||(Q=Hn(),Q.c(),Q.m(e,null)):Q&&(Q.d(1),Q=null)},i:ge,o:ge,d(W){W&&q(e),X&&X.d(),ce.d(),te&&te.d(),Q&&Q.d(),K.r(),_e=!1,ve($)}}}function es(n,e,t){let l,i,s;Be(n,we,C=>t(1,s=C));let o="",u=!1,c="",a="all",d="",g="",f="";function p(){let C=[],b=[],L=[];switch(a){case"all":return s;case"team":if(!d)return{...s,runners:[],times:[],teams:[]};const G=s.teams.find(K=>K.id===d);G&&(L=[G]),C=s.runners.filter(K=>K.teamId===d);const z=new Set(C.map(K=>K.id));b=s.times.filter(K=>z.has(K.runnerId));break;case"checkpoint":if(!d||!g||!f)return{...s,runners:[],times:[],teams:[]};const Z=s.teams.find(K=>K.id===d);Z&&(L=[Z]),C=s.runners.filter(K=>K.teamId===d);const ue=new Set(C.map(K=>K.id));b=s.times.filter(K=>ue.has(K.runnerId)&&K.checkpoint===g&&K.raceName===f);break;case"race":if(!d||!f)return{...s,runners:[],times:[],teams:[]};const x=s.teams.find(K=>K.id===d);x&&(L=[x]),C=s.runners.filter(K=>K.teamId===d);const se=new Set(C.map(K=>K.id));b=s.times.filter(K=>se.has(K.runnerId)&&K.raceName===f);break}return{...s,teams:L,runners:C,times:b,name:_()}}function _(){const C=s.teams.find(L=>L.id===d),b=(C==null?void 0:C.name)||"Unknown Team";switch(a){case"all":return s.name;case"team":return`${b} - Team Data`;case"checkpoint":return`${b} - ${f} - ${g}`;case"race":return`${b} - ${f} - Full Race`;default:return s.name}}function v(){const C=s.teams.find(L=>L.id===d),b=(C==null?void 0:C.name)||"Unknown Team";switch(a){case"all":return`Complete session with ${s.teams.length} teams, ${s.runners.length} runners, and ${s.times.length} times`;case"team":const L=s.runners.filter(ue=>ue.teamId===d),G=s.times.filter(ue=>L.some(x=>x.id===ue.runnerId));return`${b}: ${L.length} runners with ${G.length} recorded times`;case"checkpoint":const z=p().times.length;return`${b} - ${f} at ${g}: ${z} times`;case"race":const Z=p().times.length;return`${b} - ${f}: ${Z} times across all checkpoints`;default:return""}}function E(){switch(a){case"all":return!0;case"team":return!!d;case"checkpoint":return!!(d&&g&&f);case"race":return!!(d&&f);default:return!1}}async function w(){if(!E())return;t(4,c="Sharing...");const C=p(),b=await Ki(C);t(4,c=b?"Shared successfully!":"Share failed, data copied to clipboard"),setTimeout(()=>t(4,c=""),3e3)}async function R(){if(!(u||!E())){t(3,u=!0);try{const C=p();t(2,o=await Wi(C))}catch(C){console.error("Failed to generate QR code:",C),t(4,c="Failed to generate QR code"),setTimeout(()=>t(4,c=""),3e3)}finally{t(3,u=!1)}}}function T(){if(!E())return;const C=p();Gi(C),t(4,c="File downloaded!"),setTimeout(()=>t(4,c=""),3e3)}const S=[[]];function A(){a=this.__value,t(0,a)}function M(){a=this.__value,t(0,a)}function k(){a=this.__value,t(0,a)}function I(){a=this.__value,t(0,a)}function N(){d=He(this),t(5,d),t(0,a)}function B(){f=He(this),t(7,f),t(0,a),t(9,l),t(1,s)}function V(){g=He(this),t(6,g),t(0,a),t(8,i),t(1,s)}return n.$$.update=()=>{n.$$.dirty[0]&2&&t(9,l=[...new Set(s.times.map(C=>C.raceName).filter(Boolean))]),n.$$.dirty[0]&2&&t(8,i=s.unit==="km"?["1K","2K","3K","4K","5K"]:["1M","2M","3M","3.1M"]),n.$$.dirty[0]&1&&a&&(t(5,d=""),t(6,g=""),t(7,f=""),t(2,o=""))},[a,s,o,u,c,d,g,f,i,l,_,v,E,w,R,T,A,S,M,k,I,N,B,V]}class ts extends Ze{constructor(e){super(),Ye(this,e,es,xi,Oe,{},null,[-1,-1])}}const ns="modulepreload",ls=function(n){return"/xc-timer/"+n},Vn={},is=function(e,t,l){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),u=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(t.map(c=>{if(c=ls(c),c in Vn)return;Vn[c]=!0;const a=c.endsWith(".css"),d=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const g=document.createElement("link");if(g.rel=a?"stylesheet":ns,a||(g.as="script"),g.crossOrigin="",g.href=c,u&&g.setAttribute("nonce",u),document.head.appendChild(g),a)return new Promise((f,p)=>{g.addEventListener("load",f),g.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=o,window.dispatchEvent(u),!u.defaultPrevented)throw o}return i.then(o=>{for(const u of o||[])u.status==="rejected"&&s(u.reason);return e().catch(s)})};class le{constructor(e,t,l,i,s){this._legacyCanvasSize=le.DEFAULT_CANVAS_SIZE,this._preferredCamera="environment",this._maxScansPerSecond=25,this._lastScanTimestamp=-1,this._destroyed=this._flashOn=this._paused=this._active=!1,this.$video=e,this.$canvas=document.createElement("canvas"),l&&typeof l=="object"?this._onDecode=t:(console.warn(l||i||s?"You're using a deprecated version of the QrScanner constructor which will be removed in the future":"Note that the type of the scan result passed to onDecode will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),this._legacyOnDecode=t),t=typeof l=="object"?l:{},this._onDecodeError=t.onDecodeError||(typeof l=="function"?l:this._onDecodeError),this._calculateScanRegion=t.calculateScanRegion||(typeof i=="function"?i:this._calculateScanRegion),this._preferredCamera=t.preferredCamera||s||this._preferredCamera,this._legacyCanvasSize=typeof l=="number"?l:typeof i=="number"?i:this._legacyCanvasSize,this._maxScansPerSecond=t.maxScansPerSecond||this._maxScansPerSecond,this._onPlay=this._onPlay.bind(this),this._onLoadedMetaData=this._onLoadedMetaData.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this._updateOverlay=this._updateOverlay.bind(this),e.disablePictureInPicture=!0,e.playsInline=!0,e.muted=!0;let o=!1;if(e.hidden&&(e.hidden=!1,o=!0),document.body.contains(e)||(document.body.appendChild(e),o=!0),l=e.parentElement,t.highlightScanRegion||t.highlightCodeOutline){if(i=!!t.overlay,this.$overlay=t.overlay||document.createElement("div"),s=this.$overlay.style,s.position="absolute",s.display="none",s.pointerEvents="none",this.$overlay.classList.add("scan-region-highlight"),!i&&t.highlightScanRegion){this.$overlay.innerHTML='<svg class="scan-region-highlight-svg" viewBox="0 0 238 238" preserveAspectRatio="none" style="position:absolute;width:100%;height:100%;left:0;top:0;fill:none;stroke:#e9b213;stroke-width:4;stroke-linecap:round;stroke-linejoin:round"><path d="M31 2H10a8 8 0 0 0-8 8v21M207 2h21a8 8 0 0 1 8 8v21m0 176v21a8 8 0 0 1-8 8h-21m-176 0H10a8 8 0 0 1-8-8v-21"/></svg>';try{this.$overlay.firstElementChild.animate({transform:["scale(.98)","scale(1.01)"]},{duration:400,iterations:1/0,direction:"alternate",easing:"ease-in-out"})}catch{}l.insertBefore(this.$overlay,this.$video.nextSibling)}t.highlightCodeOutline&&(this.$overlay.insertAdjacentHTML("beforeend",'<svg class="code-outline-highlight" preserveAspectRatio="none" style="display:none;width:100%;height:100%;fill:none;stroke:#e9b213;stroke-width:5;stroke-dasharray:25;stroke-linecap:round;stroke-linejoin:round"><polygon/></svg>'),this.$codeOutlineHighlight=this.$overlay.lastElementChild)}this._scanRegion=this._calculateScanRegion(e),requestAnimationFrame(()=>{let u=window.getComputedStyle(e);u.display==="none"&&(e.style.setProperty("display","block","important"),o=!0),u.visibility!=="visible"&&(e.style.setProperty("visibility","visible","important"),o=!0),o&&(console.warn("QrScanner has overwritten the video hiding style to avoid Safari stopping the playback."),e.style.opacity="0",e.style.width="0",e.style.height="0",this.$overlay&&this.$overlay.parentElement&&this.$overlay.parentElement.removeChild(this.$overlay),delete this.$overlay,delete this.$codeOutlineHighlight),this.$overlay&&this._updateOverlay()}),e.addEventListener("play",this._onPlay),e.addEventListener("loadedmetadata",this._onLoadedMetaData),document.addEventListener("visibilitychange",this._onVisibilityChange),window.addEventListener("resize",this._updateOverlay),this._qrEnginePromise=le.createQrEngine()}static set WORKER_PATH(e){console.warn("Setting QrScanner.WORKER_PATH is not required and not supported anymore. Have a look at the README for new setup instructions.")}static async hasCamera(){try{return!!(await le.listCameras(!1)).length}catch{return!1}}static async listCameras(e=!1){if(!navigator.mediaDevices)return[];let t=async()=>(await navigator.mediaDevices.enumerateDevices()).filter(i=>i.kind==="videoinput"),l;try{e&&(await t()).every(i=>!i.label)&&(l=await navigator.mediaDevices.getUserMedia({audio:!1,video:!0}))}catch{}try{return(await t()).map((i,s)=>({id:i.deviceId,label:i.label||(s===0?"Default Camera":`Camera ${s+1}`)}))}finally{l&&(console.warn("Call listCameras after successfully starting a QR scanner to avoid creating a temporary video stream"),le._stopVideoStream(l))}}async hasFlash(){let e;try{if(this.$video.srcObject){if(!(this.$video.srcObject instanceof MediaStream))return!1;e=this.$video.srcObject}else e=(await this._getCameraStream()).stream;return"torch"in e.getVideoTracks()[0].getSettings()}catch{return!1}finally{e&&e!==this.$video.srcObject&&(console.warn("Call hasFlash after successfully starting the scanner to avoid creating a temporary video stream"),le._stopVideoStream(e))}}isFlashOn(){return this._flashOn}async toggleFlash(){this._flashOn?await this.turnFlashOff():await this.turnFlashOn()}async turnFlashOn(){if(!this._flashOn&&!this._destroyed&&(this._flashOn=!0,this._active&&!this._paused))try{if(!await this.hasFlash())throw"No flash available";await this.$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:!0}]})}catch(e){throw this._flashOn=!1,e}}async turnFlashOff(){this._flashOn&&(this._flashOn=!1,await this._restartVideoStream())}destroy(){this.$video.removeEventListener("loadedmetadata",this._onLoadedMetaData),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),window.removeEventListener("resize",this._updateOverlay),this._destroyed=!0,this._flashOn=!1,this.stop(),le._postWorkerMessage(this._qrEnginePromise,"close")}async start(){if(this._destroyed)throw Error("The QR scanner can not be started as it had been destroyed.");if((!this._active||this._paused)&&(window.location.protocol!=="https:"&&console.warn("The camera stream is only accessible if the page is transferred via https."),this._active=!0,!document.hidden))if(this._paused=!1,this.$video.srcObject)await this.$video.play();else try{let{stream:e,facingMode:t}=await this._getCameraStream();!this._active||this._paused?le._stopVideoStream(e):(this._setVideoMirror(t),this.$video.srcObject=e,await this.$video.play(),this._flashOn&&(this._flashOn=!1,this.turnFlashOn().catch(()=>{})))}catch(e){if(!this._paused)throw this._active=!1,e}}stop(){this.pause(),this._active=!1}async pause(e=!1){if(this._paused=!0,!this._active)return!0;this.$video.pause(),this.$overlay&&(this.$overlay.style.display="none");let t=()=>{this.$video.srcObject instanceof MediaStream&&(le._stopVideoStream(this.$video.srcObject),this.$video.srcObject=null)};return e?(t(),!0):(await new Promise(l=>setTimeout(l,300)),this._paused?(t(),!0):!1)}async setCamera(e){e!==this._preferredCamera&&(this._preferredCamera=e,await this._restartVideoStream())}static async scanImage(e,t,l,i,s=!1,o=!1){let u,c=!1;t&&("scanRegion"in t||"qrEngine"in t||"canvas"in t||"disallowCanvasResizing"in t||"alsoTryWithoutScanRegion"in t||"returnDetailedScanResult"in t)?(u=t.scanRegion,l=t.qrEngine,i=t.canvas,s=t.disallowCanvasResizing||!1,o=t.alsoTryWithoutScanRegion||!1,c=!0):console.warn(t||l||i||s||o?"You're using a deprecated api for scanImage which will be removed in the future.":"Note that the return type of scanImage will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),t=!!l;try{let a,d;[l,a]=await Promise.all([l||le.createQrEngine(),le._loadImage(e)]),[i,d]=le._drawToCanvas(a,u,i,s);let g;if(l instanceof Worker){let f=l;t||le._postWorkerMessageSync(f,"inversionMode","both"),g=await new Promise((p,_)=>{let v,E,w,R=-1;E=S=>{S.data.id===R&&(f.removeEventListener("message",E),f.removeEventListener("error",w),clearTimeout(v),S.data.data!==null?p({data:S.data.data,cornerPoints:le._convertPoints(S.data.cornerPoints,u)}):_(le.NO_QR_CODE_FOUND))},w=S=>{f.removeEventListener("message",E),f.removeEventListener("error",w),clearTimeout(v),_("Scanner error: "+(S?S.message||S:"Unknown Error"))},f.addEventListener("message",E),f.addEventListener("error",w),v=setTimeout(()=>w("timeout"),1e4);let T=d.getImageData(0,0,i.width,i.height);R=le._postWorkerMessageSync(f,"decode",T,[T.data.buffer])})}else g=await Promise.race([new Promise((f,p)=>window.setTimeout(()=>p("Scanner error: timeout"),1e4)),(async()=>{try{var[f]=await l.detect(i);if(!f)throw le.NO_QR_CODE_FOUND;return{data:f.rawValue,cornerPoints:le._convertPoints(f.cornerPoints,u)}}catch(p){if(f=p.message||p,/not implemented|service unavailable/.test(f))return le._disableBarcodeDetector=!0,le.scanImage(e,{scanRegion:u,canvas:i,disallowCanvasResizing:s,alsoTryWithoutScanRegion:o});throw`Scanner error: ${f}`}})()]);return c?g:g.data}catch(a){if(!u||!o)throw a;let d=await le.scanImage(e,{qrEngine:l,canvas:i,disallowCanvasResizing:s});return c?d:d.data}finally{t||le._postWorkerMessage(l,"close")}}setGrayscaleWeights(e,t,l,i=!0){le._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:e,green:t,blue:l,useIntegerApproximation:i})}setInversionMode(e){le._postWorkerMessage(this._qrEnginePromise,"inversionMode",e)}static async createQrEngine(e){if(e&&console.warn("Specifying a worker path is not required and not supported anymore."),e=()=>is(()=>import("./qr-scanner-worker.min-D85Z9gVD.js"),[]).then(l=>l.createWorker()),!(!le._disableBarcodeDetector&&"BarcodeDetector"in window&&BarcodeDetector.getSupportedFormats&&(await BarcodeDetector.getSupportedFormats()).includes("qr_code")))return e();let t=navigator.userAgentData;return t&&t.brands.some(({brand:l})=>/Chromium/i.test(l))&&/mac ?OS/i.test(t.platform)&&await t.getHighEntropyValues(["architecture","platformVersion"]).then(({architecture:l,platformVersion:i})=>/arm/i.test(l||"arm")&&13<=parseInt(i||"13")).catch(()=>!0)?e():new BarcodeDetector({formats:["qr_code"]})}_onPlay(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay(),this.$overlay&&(this.$overlay.style.display=""),this._scanFrame()}_onLoadedMetaData(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay()}_onVisibilityChange(){document.hidden?this.pause():this._active&&this.start()}_calculateScanRegion(e){let t=Math.round(.6666666666666666*Math.min(e.videoWidth,e.videoHeight));return{x:Math.round((e.videoWidth-t)/2),y:Math.round((e.videoHeight-t)/2),width:t,height:t,downScaledWidth:this._legacyCanvasSize,downScaledHeight:this._legacyCanvasSize}}_updateOverlay(){requestAnimationFrame(()=>{if(this.$overlay){var e=this.$video,t=e.videoWidth,l=e.videoHeight,i=e.offsetWidth,s=e.offsetHeight,o=e.offsetLeft,u=e.offsetTop,c=window.getComputedStyle(e),a=c.objectFit,d=t/l,g=i/s;switch(a){case"none":var f=t,p=l;break;case"fill":f=i,p=s;break;default:(a==="cover"?d>g:d<g)?(p=s,f=p*d):(f=i,p=f/d),a==="scale-down"&&(f=Math.min(f,t),p=Math.min(p,l))}var[_,v]=c.objectPosition.split(" ").map((w,R)=>{const T=parseFloat(w);return w.endsWith("%")?(R?s-p:i-f)*T/100:T});c=this._scanRegion.width||t,g=this._scanRegion.height||l,a=this._scanRegion.x||0;var E=this._scanRegion.y||0;d=this.$overlay.style,d.width=`${c/t*f}px`,d.height=`${g/l*p}px`,d.top=`${u+v+E/l*p}px`,l=/scaleX\(-1\)/.test(e.style.transform),d.left=`${o+(l?i-_-f:_)+(l?t-a-c:a)/t*f}px`,d.transform=e.style.transform}})}static _convertPoints(e,t){if(!t)return e;let l=t.x||0,i=t.y||0,s=t.width&&t.downScaledWidth?t.width/t.downScaledWidth:1;t=t.height&&t.downScaledHeight?t.height/t.downScaledHeight:1;for(let o of e)o.x=o.x*s+l,o.y=o.y*t+i;return e}_scanFrame(){!this._active||this.$video.paused||this.$video.ended||("requestVideoFrameCallback"in this.$video?this.$video.requestVideoFrameCallback.bind(this.$video):requestAnimationFrame)(async()=>{if(!(1>=this.$video.readyState)){var e=Date.now()-this._lastScanTimestamp,t=1e3/this._maxScansPerSecond;e<t&&await new Promise(i=>setTimeout(i,t-e)),this._lastScanTimestamp=Date.now();try{var l=await le.scanImage(this.$video,{scanRegion:this._scanRegion,qrEngine:this._qrEnginePromise,canvas:this.$canvas})}catch(i){if(!this._active)return;this._onDecodeError(i)}!le._disableBarcodeDetector||await this._qrEnginePromise instanceof Worker||(this._qrEnginePromise=le.createQrEngine()),l?(this._onDecode?this._onDecode(l):this._legacyOnDecode&&this._legacyOnDecode(l.data),this.$codeOutlineHighlight&&(clearTimeout(this._codeOutlineHighlightRemovalTimeout),this._codeOutlineHighlightRemovalTimeout=void 0,this.$codeOutlineHighlight.setAttribute("viewBox",`${this._scanRegion.x||0} ${this._scanRegion.y||0} ${this._scanRegion.width||this.$video.videoWidth} ${this._scanRegion.height||this.$video.videoHeight}`),this.$codeOutlineHighlight.firstElementChild.setAttribute("points",l.cornerPoints.map(({x:i,y:s})=>`${i},${s}`).join(" ")),this.$codeOutlineHighlight.style.display="")):this.$codeOutlineHighlight&&!this._codeOutlineHighlightRemovalTimeout&&(this._codeOutlineHighlightRemovalTimeout=setTimeout(()=>this.$codeOutlineHighlight.style.display="none",100))}this._scanFrame()})}_onDecodeError(e){e!==le.NO_QR_CODE_FOUND&&console.log(e)}async _getCameraStream(){if(!navigator.mediaDevices)throw"Camera not found.";let e=/^(environment|user)$/.test(this._preferredCamera)?"facingMode":"deviceId",t=[{width:{min:1024}},{width:{min:768}},{}],l=t.map(i=>Object.assign({},i,{[e]:{exact:this._preferredCamera}}));for(let i of[...l,...t])try{let s=await navigator.mediaDevices.getUserMedia({video:i,audio:!1}),o=this._getFacingMode(s)||(i.facingMode?this._preferredCamera:this._preferredCamera==="environment"?"user":"environment");return{stream:s,facingMode:o}}catch{}throw"Camera not found."}async _restartVideoStream(){let e=this._paused;await this.pause(!0)&&!e&&this._active&&await this.start()}static _stopVideoStream(e){for(let t of e.getTracks())t.stop(),e.removeTrack(t)}_setVideoMirror(e){this.$video.style.transform="scaleX("+(e==="user"?-1:1)+")"}_getFacingMode(e){return(e=e.getVideoTracks()[0])?/rear|back|environment/i.test(e.label)?"environment":/front|user|face/i.test(e.label)?"user":null:null}static _drawToCanvas(e,t,l,i=!1){l=l||document.createElement("canvas");let s=t&&t.x?t.x:0,o=t&&t.y?t.y:0,u=t&&t.width?t.width:e.videoWidth||e.width,c=t&&t.height?t.height:e.videoHeight||e.height;return i||(i=t&&t.downScaledWidth?t.downScaledWidth:u,t=t&&t.downScaledHeight?t.downScaledHeight:c,l.width!==i&&(l.width=i),l.height!==t&&(l.height=t)),t=l.getContext("2d",{alpha:!1}),t.imageSmoothingEnabled=!1,t.drawImage(e,s,o,u,c,0,0,l.width,l.height),[l,t]}static async _loadImage(e){if(e instanceof Image)return await le._awaitImageLoad(e),e;if(e instanceof HTMLVideoElement||e instanceof HTMLCanvasElement||e instanceof SVGImageElement||"OffscreenCanvas"in window&&e instanceof OffscreenCanvas||"ImageBitmap"in window&&e instanceof ImageBitmap)return e;if(e instanceof File||e instanceof Blob||e instanceof URL||typeof e=="string"){let t=new Image;t.src=e instanceof File||e instanceof Blob?URL.createObjectURL(e):e.toString();try{return await le._awaitImageLoad(t),t}finally{(e instanceof File||e instanceof Blob)&&URL.revokeObjectURL(t.src)}}else throw"Unsupported image type."}static async _awaitImageLoad(e){e.complete&&e.naturalWidth!==0||await new Promise((t,l)=>{let i=s=>{e.removeEventListener("load",i),e.removeEventListener("error",i),s instanceof ErrorEvent?l("Image load error"):t()};e.addEventListener("load",i),e.addEventListener("error",i)})}static async _postWorkerMessage(e,t,l,i){return le._postWorkerMessageSync(await e,t,l,i)}static _postWorkerMessageSync(e,t,l,i){if(!(e instanceof Worker))return-1;let s=le._workerMessageId++;return e.postMessage({id:s,type:t,data:l},i),s}}le.DEFAULT_CANVAS_SIZE=400;le.NO_QR_CODE_FOUND="No QR code found";le._disableBarcodeDetector=!1;le._workerMessageId=0;function Qn(n,e,t){const l=n.slice();return l[44]=e[t],l}function zn(n,e,t){const l=n.slice();return l[47]=e[t],l}function ss(n){var te;let e,t,l,i,s,o,u=(((te=n[8])==null?void 0:te.name)||"Imported Session")+"",c,a,d,g=n[22]()+"",f,p,_,v,E,w,R,T,S,A,M,k,I,N,B,V,C,b,L,G,z,Z,ue,x,se,K,_e=n[7]==="replace"?"Replace Data":"Import Data",$,X,oe,de,ce=n[7]==="selective"&&jn(n);return X=gt(n[28][2]),{c(){e=m("div"),t=m("div"),l=m("h3"),l.textContent="Import Preview",i=y(),s=m("div"),o=m("strong"),c=O(u),a=m("br"),d=y(),f=O(g),p=y(),_=m("div"),v=m("h4"),v.textContent="How would you like to import this data?",E=y(),w=m("div"),R=m("label"),T=m("input"),S=y(),A=m("div"),A.innerHTML='<div class="option-title svelte-1uk5m2w">üîÑ Merge</div> <div class="option-description svelte-1uk5m2w">Combine with existing data (recommended)</div>',M=y(),k=m("label"),I=m("input"),N=y(),B=m("div"),B.innerHTML='<div class="option-title svelte-1uk5m2w">üéØ Selective</div> <div class="option-description svelte-1uk5m2w">Choose specific teams, races, or data types</div>',V=y(),C=m("label"),b=m("input"),L=y(),G=m("div"),G.innerHTML='<div class="option-title svelte-1uk5m2w">‚ö†Ô∏è Replace All</div> <div class="option-description svelte-1uk5m2w">Replace all current data (destructive)</div>',z=y(),ce&&ce.c(),Z=y(),ue=m("div"),x=m("button"),x.textContent="Cancel",se=y(),K=m("button"),$=O(_e),h(l,"class","svelte-1uk5m2w"),h(s,"class","preview-summary svelte-1uk5m2w"),h(t,"class","preview-header svelte-1uk5m2w"),h(v,"class","svelte-1uk5m2w"),h(T,"type","radio"),T.__value="merge",ie(T,T.__value),h(T,"class","svelte-1uk5m2w"),h(A,"class","option-content svelte-1uk5m2w"),h(R,"class","mode-option svelte-1uk5m2w"),h(I,"type","radio"),I.__value="selective",ie(I,I.__value),h(I,"class","svelte-1uk5m2w"),h(B,"class","option-content svelte-1uk5m2w"),h(k,"class","mode-option svelte-1uk5m2w"),h(b,"type","radio"),b.__value="replace",ie(b,b.__value),h(b,"class","svelte-1uk5m2w"),h(G,"class","option-content svelte-1uk5m2w"),h(C,"class","mode-option svelte-1uk5m2w"),h(w,"class","mode-options svelte-1uk5m2w"),h(_,"class","import-mode-section svelte-1uk5m2w"),h(x,"class","action-btn secondary svelte-1uk5m2w"),h(K,"class","action-btn primary svelte-1uk5m2w"),h(ue,"class","preview-actions svelte-1uk5m2w"),h(e,"class","preview-section svelte-1uk5m2w"),X.p(T,I,b)},m(Q,W){H(Q,e,W),r(e,t),r(t,l),r(t,i),r(t,s),r(s,o),r(o,c),r(s,a),r(s,d),r(s,f),r(e,p),r(e,_),r(_,v),r(_,E),r(_,w),r(w,R),r(R,T),T.checked=T.__value===n[7],r(R,S),r(R,A),r(w,M),r(w,k),r(k,I),I.checked=I.__value===n[7],r(k,N),r(k,B),r(w,V),r(w,C),r(C,b),b.checked=b.__value===n[7],r(C,L),r(C,G),r(e,z),ce&&ce.m(e,null),r(e,Z),r(e,ue),r(ue,x),r(ue,se),r(ue,K),r(K,$),oe||(de=[j(T,"change",n[27]),j(I,"change",n[29]),j(b,"change",n[30]),j(x,"click",n[21]),j(K,"click",n[20])],oe=!0)},p(Q,W){var P;W[0]&256&&u!==(u=(((P=Q[8])==null?void 0:P.name)||"Imported Session")+"")&&Y(c,u),W[0]&128&&(T.checked=T.__value===Q[7]),W[0]&128&&(I.checked=I.__value===Q[7]),W[0]&128&&(b.checked=b.__value===Q[7]),Q[7]==="selective"?ce?ce.p(Q,W):(ce=jn(Q),ce.c(),ce.m(e,Z)):ce&&(ce.d(1),ce=null),W[0]&128&&_e!==(_e=Q[7]==="replace"?"Replace Data":"Import Data")&&Y($,_e)},d(Q){Q&&q(e),ce&&ce.d(),X.r(),oe=!1,ve(de)}}}function os(n){let e,t,l,i,s,o,u,c,a,d,g,f,p,_,v,E,w,R,T,S,A,M,k,I;function N(C,b){return C[4]?C[3]?C[6]?rs:as:cs:us}let B=N(n),V=B(n);return{c(){e=m("div"),t=m("div"),l=m("h3"),l.textContent="üì± Scan QR Code",i=y(),s=m("p"),s.textContent="Scan a QR code generated by another timer device",o=y(),V.c(),u=y(),c=m("div"),a=m("h3"),a.textContent="üìÅ Upload File",d=y(),g=m("p"),g.textContent="Import timing data from a JSON backup file",f=y(),p=m("input"),_=y(),v=m("label"),v.textContent="üìÇ Choose File",E=y(),w=m("div"),R=m("h3"),R.textContent="üîÑ Manual Import",T=y(),S=m("p"),S.textContent="Paste JSON data directly",A=y(),M=m("textarea"),h(l,"class","svelte-1uk5m2w"),h(s,"class","svelte-1uk5m2w"),h(t,"class","method-card svelte-1uk5m2w"),h(a,"class","svelte-1uk5m2w"),h(g,"class","svelte-1uk5m2w"),h(p,"type","file"),h(p,"accept",".json"),h(p,"class","file-input svelte-1uk5m2w"),h(p,"id","file-upload"),h(v,"for","file-upload"),h(v,"class","method-btn secondary svelte-1uk5m2w"),h(c,"class","method-card svelte-1uk5m2w"),h(R,"class","svelte-1uk5m2w"),h(S,"class","svelte-1uk5m2w"),h(M,"placeholder","Paste JSON data here..."),h(M,"class","json-input svelte-1uk5m2w"),h(w,"class","method-card svelte-1uk5m2w"),h(e,"class","import-methods svelte-1uk5m2w")},m(C,b){H(C,e,b),r(e,t),r(t,l),r(t,i),r(t,s),r(t,o),V.m(t,null),r(e,u),r(e,c),r(c,a),r(c,d),r(c,g),r(c,f),r(c,p),n[25](p),r(c,_),r(c,v),r(e,E),r(e,w),r(w,R),r(w,T),r(w,S),r(w,A),r(w,M),k||(I=[j(p,"change",n[18]),j(M,"paste",n[26])],k=!0)},p(C,b){B===(B=N(C))&&V?V.p(C,b):(V.d(1),V=B(C),V&&(V.c(),V.m(t,null)))},d(C){C&&q(e),V.d(),n[25](null),k=!1,ve(I)}}}function jn(n){var K,_e,$,X,oe,de,ce,te;let e,t,l,i,s,o,u,c,a,d=(((_e=(K=n[8])==null?void 0:K.teams)==null?void 0:_e.length)||0)+"",g,f,p,_,v,E,w,R,T=(((X=($=n[8])==null?void 0:$.runners)==null?void 0:X.length)||0)+"",S,A,M,k,I,N,B,V,C=(((de=(oe=n[8])==null?void 0:oe.times)==null?void 0:de.length)||0)+"",b,L,G,z,Z,ue,x=n[10]&&((te=(ce=n[8])==null?void 0:ce.teams)==null?void 0:te.length)&&Jn(n),se=n[12]&&n[14].length>0&&$n(n);return{c(){e=m("div"),t=m("h4"),t.textContent="Select what to import:",l=y(),i=m("div"),s=m("label"),o=m("input"),u=y(),c=m("span"),a=O("Teams ("),g=O(d),f=O(")"),p=y(),_=m("label"),v=m("input"),E=y(),w=m("span"),R=O("Runners ("),S=O(T),A=O(")"),M=y(),k=m("label"),I=m("input"),N=y(),B=m("span"),V=O("Times ("),b=O(C),L=O(")"),G=y(),x&&x.c(),z=y(),se&&se.c(),h(t,"class","svelte-1uk5m2w"),h(o,"type","checkbox"),h(o,"class","svelte-1uk5m2w"),h(s,"class","checkbox-option svelte-1uk5m2w"),h(v,"type","checkbox"),h(v,"class","svelte-1uk5m2w"),h(_,"class","checkbox-option svelte-1uk5m2w"),h(I,"type","checkbox"),h(I,"class","svelte-1uk5m2w"),h(k,"class","checkbox-option svelte-1uk5m2w"),h(i,"class","data-type-options svelte-1uk5m2w"),h(e,"class","selective-options svelte-1uk5m2w")},m(Q,W){H(Q,e,W),r(e,t),r(e,l),r(e,i),r(i,s),r(s,o),o.checked=n[10],r(s,u),r(s,c),r(c,a),r(c,g),r(c,f),r(i,p),r(i,_),r(_,v),v.checked=n[11],r(_,E),r(_,w),r(w,R),r(w,S),r(w,A),r(i,M),r(i,k),r(k,I),I.checked=n[12],r(k,N),r(k,B),r(B,V),r(B,b),r(B,L),r(e,G),x&&x.m(e,null),r(e,z),se&&se.m(e,null),Z||(ue=[j(o,"change",n[31]),j(v,"change",n[32]),j(I,"change",n[33])],Z=!0)},p(Q,W){var P,J,fe,ne,ee,F,D,U;W[0]&1024&&(o.checked=Q[10]),W[0]&256&&d!==(d=(((J=(P=Q[8])==null?void 0:P.teams)==null?void 0:J.length)||0)+"")&&Y(g,d),W[0]&2048&&(v.checked=Q[11]),W[0]&256&&T!==(T=(((ne=(fe=Q[8])==null?void 0:fe.runners)==null?void 0:ne.length)||0)+"")&&Y(S,T),W[0]&4096&&(I.checked=Q[12]),W[0]&256&&C!==(C=(((F=(ee=Q[8])==null?void 0:ee.times)==null?void 0:F.length)||0)+"")&&Y(b,C),Q[10]&&((U=(D=Q[8])==null?void 0:D.teams)!=null&&U.length)?x?x.p(Q,W):(x=Jn(Q),x.c(),x.m(e,z)):x&&(x.d(1),x=null),Q[12]&&Q[14].length>0?se?se.p(Q,W):(se=$n(Q),se.c(),se.m(e,null)):se&&(se.d(1),se=null)},d(Q){Q&&q(e),x&&x.d(),se&&se.d(),Z=!1,ve(ue)}}}function Jn(n){let e,t,l,i,s=me(n[8].teams),o=[];for(let u=0;u<s.length;u+=1)o[u]=Kn(zn(n,s,u));return{c(){e=m("div"),t=m("h5"),t.textContent="Select Teams:",l=y(),i=m("div");for(let u=0;u<o.length;u+=1)o[u].c();h(t,"class","svelte-1uk5m2w"),h(i,"class","team-checkboxes svelte-1uk5m2w"),h(e,"class","selection-group svelte-1uk5m2w")},m(u,c){H(u,e,c),r(e,t),r(e,l),r(e,i);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(i,null)},p(u,c){if(c[0]&8448){s=me(u[8].teams);let a;for(a=0;a<s.length;a+=1){const d=zn(u,s,a);o[a]?o[a].p(d,c):(o[a]=Kn(d),o[a].c(),o[a].m(i,null))}for(;a<o.length;a+=1)o[a].d(1);o.length=s.length}},d(u){u&&q(e),Ne(o,u)}}}function Kn(n){let e,t,l,i=!1,s,o,u=n[47].name+"",c,a,d,g,f;return d=gt(n[28][1]),{c(){e=m("label"),t=m("input"),s=y(),o=m("span"),c=O(u),a=y(),h(t,"type","checkbox"),t.__value=l=n[47].id,ie(t,t.__value),h(t,"class","svelte-1uk5m2w"),be(o,"color",n[47].color),h(e,"class","checkbox-option svelte-1uk5m2w"),d.p(t)},m(p,_){H(p,e,_),r(e,t),t.checked=~(n[13]||[]).indexOf(t.__value),r(e,s),r(e,o),r(o,c),r(e,a),g||(f=j(t,"change",n[34]),g=!0)},p(p,_){_[0]&256&&l!==(l=p[47].id)&&(t.__value=l,ie(t,t.__value),i=!0),(i||_[0]&8448)&&(t.checked=~(p[13]||[]).indexOf(t.__value)),_[0]&256&&u!==(u=p[47].name+"")&&Y(c,u),_[0]&256&&be(o,"color",p[47].color)},d(p){p&&q(e),d.r(),g=!1,f()}}}function $n(n){var u,c;let e,t,l,i,s=me([...new Set((c=(u=n[8])==null?void 0:u.times)==null?void 0:c.map(Zn).filter(Boolean))]),o=[];for(let a=0;a<s.length;a+=1)o[a]=Wn(Qn(n,s,a));return{c(){e=m("div"),t=m("h5"),t.textContent="Select Races:",l=y(),i=m("div");for(let a=0;a<o.length;a+=1)o[a].c();h(t,"class","svelte-1uk5m2w"),h(i,"class","race-checkboxes svelte-1uk5m2w"),h(e,"class","selection-group svelte-1uk5m2w")},m(a,d){H(a,e,d),r(e,t),r(e,l),r(e,i);for(let g=0;g<o.length;g+=1)o[g]&&o[g].m(i,null)},p(a,d){var g,f;if(d[0]&16640){s=me([...new Set((f=(g=a[8])==null?void 0:g.times)==null?void 0:f.map(Zn).filter(Boolean))]);let p;for(p=0;p<s.length;p+=1){const _=Qn(a,s,p);o[p]?o[p].p(_,d):(o[p]=Wn(_),o[p].c(),o[p].m(i,null))}for(;p<o.length;p+=1)o[p].d(1);o.length=s.length}},d(a){a&&q(e),Ne(o,a)}}}function Wn(n){let e,t,l,i=!1,s,o,u=n[44]+"",c,a,d,g,f;return d=gt(n[28][0]),{c(){e=m("label"),t=m("input"),s=y(),o=m("span"),c=O(u),a=y(),h(t,"type","checkbox"),t.__value=l=n[44],ie(t,t.__value),h(t,"class","svelte-1uk5m2w"),h(e,"class","checkbox-option svelte-1uk5m2w"),d.p(t)},m(p,_){H(p,e,_),r(e,t),t.checked=~(n[14]||[]).indexOf(t.__value),r(e,s),r(e,o),r(o,c),r(e,a),g||(f=j(t,"change",n[35]),g=!0)},p(p,_){_[0]&256&&l!==(l=p[44])&&(t.__value=l,ie(t,t.__value),i=!0),(i||_[0]&16640)&&(t.checked=~(p[14]||[]).indexOf(t.__value)),_[0]&256&&u!==(u=p[44]+"")&&Y(c,u)},d(p){p&&q(e),d.r(),g=!1,f()}}}function rs(n){let e,t,l,i,s,o,u,c;return{c(){e=m("div"),t=m("video"),l=y(),i=m("button"),i.textContent="‚èπÔ∏è Stop Scanning",s=y(),o=m("div"),o.textContent="Point your camera at a QR code to scan",h(t,"class","scanner-video svelte-1uk5m2w"),t.autoplay=!0,t.playsInline=!0,t.muted=!0,h(i,"class","stop-btn svelte-1uk5m2w"),h(o,"class","scanner-instructions svelte-1uk5m2w"),h(e,"class","scanner-container svelte-1uk5m2w")},m(a,d){H(a,e,d),r(e,t),n[24](t),r(e,l),r(e,i),r(e,s),r(e,o),u||(c=j(i,"click",n[17]),u=!0)},p:ge,d(a){a&&q(e),n[24](null),u=!1,c()}}}function as(n){let e,t,l;return{c(){e=m("button"),e.textContent="üì∑ Start Camera",h(e,"class","method-btn primary svelte-1uk5m2w")},m(i,s){H(i,e,s),t||(l=j(e,"click",n[16]),t=!0)},p:ge,d(i){i&&q(e),t=!1,l()}}}function cs(n){let e,t,l,i,s,o,u,c,a,d;return{c(){e=m("div"),t=O("üì∑ "),l=O(n[5]),i=y(),s=m("br"),o=m("small"),o.textContent="QR scanning requires camera access on your device.",u=y(),c=m("button"),c.textContent="üîÑ Retry Camera Check",h(c,"class","retry-btn svelte-1uk5m2w"),h(e,"class","camera-status error svelte-1uk5m2w")},m(g,f){H(g,e,f),r(e,t),r(e,l),r(e,i),r(e,s),r(e,o),r(e,u),r(e,c),a||(d=j(c,"click",n[15]),a=!0)},p(g,f){f[0]&32&&Y(l,g[5])},d(g){g&&q(e),a=!1,d()}}}function us(n){let e;return{c(){e=m("div"),e.innerHTML=`<div class="loading-spinner svelte-1uk5m2w"></div>
            Checking camera availability...`,h(e,"class","camera-status svelte-1uk5m2w")},m(t,l){H(t,e,l)},p:ge,d(t){t&&q(e)}}}function Gn(n){let e,t;return{c(){e=m("div"),t=O(n[2]),h(e,"class","status-message svelte-1uk5m2w"),pe(e,"success",n[2].includes("success")),pe(e,"error",n[2].includes("Failed")||n[2].includes("Invalid")||n[2].includes("denied")||n[2].includes("Error"))},m(l,i){H(l,e,i),r(e,t)},p(l,i){i[0]&4&&Y(t,l[2]),i[0]&4&&pe(e,"success",l[2].includes("success")),i[0]&4&&pe(e,"error",l[2].includes("Failed")||l[2].includes("Invalid")||l[2].includes("denied")||l[2].includes("Error"))},d(l){l&&q(e)}}}function Yn(n){let e;return{c(){e=m("div"),e.innerHTML='<h4 class="svelte-1uk5m2w">Import Information</h4> <ul class="svelte-1uk5m2w"><li class="svelte-1uk5m2w"><strong>Merge:</strong> Combines imported data with existing data</li> <li class="svelte-1uk5m2w"><strong>Selective:</strong> Choose specific teams, races, or data types to import</li> <li class="svelte-1uk5m2w"><strong>Replace:</strong> Completely replaces all current data (use with caution)</li> <li class="svelte-1uk5m2w">Runners with the same name will be combined automatically</li> <li class="svelte-1uk5m2w">Teams with the same name will be combined automatically</li></ul>',h(e,"class","info-section svelte-1uk5m2w")},m(t,l){H(t,e,l)},d(t){t&&q(e)}}}function ds(n){let e,t,l,i,s,o,u;function c(p,_){return p[9]?ss:os}let a=c(n),d=a(n),g=n[2]&&Gn(n),f=!n[9]&&Yn();return{c(){e=m("div"),t=m("div"),t.innerHTML='<h2 class="svelte-1uk5m2w">Import Data</h2> <p class="svelte-1uk5m2w">Import timing data from other devices or backup files</p>',l=y(),d.c(),i=y(),g&&g.c(),s=y(),f&&f.c(),h(t,"class","header svelte-1uk5m2w"),h(e,"class","import-container svelte-1uk5m2w")},m(p,_){H(p,e,_),r(e,t),r(e,l),d.m(e,null),r(e,i),g&&g.m(e,null),r(e,s),f&&f.m(e,null),o||(u=j(window,"beforeunload",n[23]),o=!0)},p(p,_){a===(a=c(p))&&d?d.p(p,_):(d.d(1),d=a(p),d&&(d.c(),d.m(e,i))),p[2]?g?g.p(p,_):(g=Gn(p),g.c(),g.m(e,s)):g&&(g.d(1),g=null),p[9]?f&&(f.d(1),f=null):f||(f=Yn(),f.c(),f.m(e,null))},i:ge,o:ge,d(p){p&&q(e),d.d(),g&&g.d(),f&&f.d(),o=!1,u()}}}const Zn=n=>n.raceName;function fs(n,e,t){let l;Be(n,we,P=>t(38,l=P));let i,s,o=null,u=!1,c="",a=!1,d=!1,g="",f=!1,p="merge",_=null,v=!1,E=!0,w=!0,R=!0,T=[],S=[];async function A(){try{console.log("Checking camera support...");const P=await le.hasCamera();if(console.log("QrScanner.hasCamera():",P),P)try{const J=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});console.log("Camera stream obtained successfully"),J.getTracks().forEach(fe=>fe.stop()),t(3,a=!0),t(5,g="")}catch(J){console.error("getUserMedia error:",J),t(3,a=!1),J.name==="NotAllowedError"?t(5,g="Camera access denied. Please allow camera permissions and refresh the page."):J.name==="NotFoundError"?t(5,g="No camera found on this device."):J.name==="NotSupportedError"?t(5,g="Camera not supported in this browser."):t(5,g=`Camera error: ${J.message}`)}else t(3,a=!1),t(5,g="Camera not supported on this device or browser.");t(4,d=!0),console.log("Camera check complete. hasCamera:",a,"error:",g)}catch(P){console.error("Error checking camera support:",P),t(3,a=!1),t(5,g="Failed to check camera support."),t(4,d=!0)}}async function M(){if(u||!a){console.log("Cannot start scanning:",{isScanning:u,hasCamera:a});return}if(t(6,f=!0),t(2,c="Initializing camera..."),await new Promise(P=>setTimeout(P,100)),!s){console.error("Video element still not available after waiting"),t(2,c="Failed to initialize camera interface"),t(6,f=!1),setTimeout(()=>t(2,c=""),3e3);return}try{t(2,c="Starting camera..."),console.log("Creating QR scanner with video element:",s),o=new le(s,P=>{console.log("QR code detected:",P.data),k(),I(P.data)},{highlightScanRegion:!0,highlightCodeOutline:!0,preferredCamera:"environment",maxScansPerSecond:5}),console.log("Starting QR scanner..."),await o.start(),u=!0,t(2,c="Scanning for QR code... Point camera at QR code"),console.log("QR scanner started successfully")}catch(P){console.error("Error starting QR scanner:",P);let J="Failed to start camera. ";P.name==="NotAllowedError"?J+="Camera access denied. Please allow camera permissions and try again.":P.name==="NotFoundError"?J+="No camera found on this device.":P.name==="NotReadableError"?J+="Camera is already in use by another application.":P.name==="OverconstrainedError"?J+="Camera constraints could not be satisfied.":J+=`Error: ${P.message}`,t(2,c=J),u=!1,t(6,f=!1),setTimeout(()=>{c===J&&t(2,c="")},1e4)}}function k(){console.log("Stopping QR scanner..."),o&&(o.destroy(),o=null,console.log("QR scanner destroyed")),u=!1,t(6,f=!1),!c.includes("QR code detected")&&!c.includes("Data loaded")&&t(2,c="")}function I(P){try{console.log("Processing QR result, data length:",P.length);const J=JSON.parse(P);console.log("QR data parsed successfully:",J),V(J)}catch(J){console.error("Error parsing QR code:",J),t(2,c="Invalid QR code data - not a valid timing session"),setTimeout(()=>t(2,c=""),5e3)}}function N(P){var ee;const fe=(ee=P.target.files)==null?void 0:ee[0];if(!fe)return;const ne=new FileReader;ne.onload=F=>{var D;try{const U=(D=F.target)==null?void 0:D.result,he=JSON.parse(U);V(he)}catch(U){console.error("Error parsing file:",U),t(2,c="Invalid file format - not a valid JSON timing session"),setTimeout(()=>t(2,c=""),3e3)}},ne.readAsText(fe)}function B(P){const J=P.target,fe=J.value.trim();if(fe)try{const ne=JSON.parse(fe);V(ne),J.value=""}catch{t(2,c="Invalid JSON format"),setTimeout(()=>t(2,c=""),3e3)}}function V(P){var J,fe;t(8,_=P),t(9,v=!0),t(13,T=((J=P.teams)==null?void 0:J.map(ne=>ne.id))||[]),t(14,S=[...new Set((fe=P.times)==null?void 0:fe.map(ne=>ne.raceName).filter(Boolean))]),t(2,c="Data loaded! Review and confirm import below."),setTimeout(()=>t(2,c=""),5e3)}function C(){if(_){switch(p){case"replace":b(_);break;case"selective":L(_);break;case"merge":default:G(_);break}t(8,_=null),t(9,v=!1),t(2,c="Import completed successfully!"),setTimeout(()=>t(2,c=""),3e3)}}function b(P){we.set({...P,id:l.id,updated:Date.now()})}function L(P){var ke,ot,Ht;let J=[],fe=[],ne=[];if(E&&(J=((ke=P.teams)==null?void 0:ke.filter(re=>T.includes(re.id)))||[]),w&&(fe=((ot=P.runners)==null?void 0:ot.filter(re=>T.includes(re.teamId)))||[]),R){const re=new Set(fe.map(Se=>Se.id));ne=((Ht=P.times)==null?void 0:Ht.filter(Se=>re.has(Se.runnerId)&&(!Se.raceName||S.includes(Se.raceName))))||[]}const ee=new Set(l.teams.map(re=>re.name.toLowerCase())),F=new Set(l.runners.map(re=>re.name.toLowerCase())),D=J.filter(re=>!ee.has(re.name.toLowerCase())),U=new Map;J.forEach(re=>{const Se=l.teams.find(Te=>Te.name.toLowerCase()===re.name.toLowerCase());if(Se)U.set(re.id,Se.id);else{const Te=crypto.randomUUID();U.set(re.id,Te),D.push({...re,id:Te})}});const he=fe.filter(re=>!F.has(re.name.toLowerCase())),ae=new Map;fe.forEach(re=>{const Se=l.runners.find(Te=>Te.name.toLowerCase()===re.name.toLowerCase());if(Se)ae.set(re.id,Se.id);else{const Te=crypto.randomUUID(),wl=U.get(re.teamId)||re.teamId;ae.set(re.id,Te),he.push({...re,id:Te,teamId:wl})}});const Le=ne.map(re=>({...re,runnerId:ae.get(re.runnerId)||re.runnerId}));we.update(re=>({...re,teams:[...re.teams,...D],runners:[...re.runners,...he],times:[...re.times,...Le],unit:P.unit||re.unit,updated:Date.now()}))}function G(P){var he;const J=new Set(l.runners.map(ae=>ae.name.toLowerCase())),fe=new Set(l.teams.map(ae=>ae.name.toLowerCase())),ne=((he=P.teams)==null?void 0:he.filter(ae=>!fe.has(ae.name.toLowerCase())))||[],ee=new Map;(P.teams||[]).forEach(ae=>{const Le=l.teams.find(ke=>ke.name.toLowerCase()===ae.name.toLowerCase());if(Le)ee.set(ae.id,Le.id);else{const ke=crypto.randomUUID();ee.set(ae.id,ke),ne.push({...ae,id:ke})}});const F=(P.runners||[]).filter(ae=>!J.has(ae.name.toLowerCase())),D=new Map;(P.runners||[]).forEach(ae=>{const Le=l.runners.find(ke=>ke.name.toLowerCase()===ae.name.toLowerCase());if(Le)D.set(ae.id,Le.id);else{const ke=crypto.randomUUID(),ot=ee.get(ae.teamId)||ae.teamId;D.set(ae.id,ke),F.push({...ae,id:ke,teamId:ot})}});const U=(P.times||[]).map(ae=>({...ae,runnerId:D.get(ae.runnerId)||ae.runnerId}));we.update(ae=>({...ae,teams:[...ae.teams,...ne],runners:[...ae.runners,...F],times:[...ae.times,...U],unit:P.unit||ae.unit,updated:Date.now()}))}function z(){t(8,_=null),t(9,v=!1),t(2,c="")}function Z(){var ee,F,D,U;if(!_)return"";const P=((ee=_.teams)==null?void 0:ee.length)||0,J=((F=_.runners)==null?void 0:F.length)||0,fe=((D=_.times)==null?void 0:D.length)||0,ne=new Set((U=_.times)==null?void 0:U.map(he=>he.raceName).filter(Boolean)).size;return`${P} teams, ${J} runners, ${fe} times across ${ne} races`}A();function ue(){k()}const x=[[],[],[]];function se(P){dt[P?"unshift":"push"](()=>{s=P,t(1,s)})}function K(P){dt[P?"unshift":"push"](()=>{i=P,t(0,i)})}const _e=P=>{setTimeout(()=>B(P),100)};function $(){p=this.__value,t(7,p)}function X(){p=this.__value,t(7,p)}function oe(){p=this.__value,t(7,p)}function de(){E=this.checked,t(10,E)}function ce(){w=this.checked,t(11,w)}function te(){R=this.checked,t(12,R)}function Q(){T=zt(x[1],this.__value,this.checked),t(13,T)}function W(){S=zt(x[0],this.__value,this.checked),t(14,S)}return[i,s,c,a,d,g,f,p,_,v,E,w,R,T,S,A,M,k,N,B,C,z,Z,ue,se,K,_e,$,x,X,oe,de,ce,te,Q,W]}class hs extends Ze{constructor(e){super(),Ye(this,e,fs,ds,Oe,{},null,[-1,-1])}}function ms(n){let e,t;return e=new hs({}),{c(){lt(e.$$.fragment)},m(l,i){We(e,l,i),t=!0},i(l){t||(Re(e.$$.fragment,l),t=!0)},o(l){Pe(e.$$.fragment,l),t=!1},d(l){Ge(e,l)}}}function gs(n){let e,t;return e=new ts({}),{c(){lt(e.$$.fragment)},m(l,i){We(e,l,i),t=!0},i(l){t||(Re(e.$$.fragment,l),t=!0)},o(l){Pe(e.$$.fragment,l),t=!1},d(l){Ge(e,l)}}}function ps(n){let e,t;return e=new ii({}),{c(){lt(e.$$.fragment)},m(l,i){We(e,l,i),t=!0},i(l){t||(Re(e.$$.fragment,l),t=!0)},o(l){Pe(e.$$.fragment,l),t=!1},d(l){Ge(e,l)}}}function _s(n){let e,t;return e=new Wl({}),{c(){lt(e.$$.fragment)},m(l,i){We(e,l,i),t=!0},i(l){t||(Re(e.$$.fragment,l),t=!0)},o(l){Pe(e.$$.fragment,l),t=!1},d(l){Ge(e,l)}}}function vs(n){let e,t,l,i,s,o,u,c,a;i=new Vl({});const d=[_s,ps,gs,ms],g=[];function f(p,_){return p[0]==="setup"?0:p[0]==="timing"?1:p[0]==="share"?2:p[0]==="import"?3:-1}return~(u=f(n))&&(c=g[u]=d[u](n)),{c(){e=m("main"),t=m("header"),t.innerHTML='<h1 class="svelte-yynuvd">‚è±Ô∏è Cross Country Timer</h1>',l=y(),lt(i.$$.fragment),s=y(),o=m("div"),c&&c.c(),h(t,"class","app-header svelte-yynuvd"),h(o,"class","app-content svelte-yynuvd"),h(e,"class","app svelte-yynuvd")},m(p,_){H(p,e,_),r(e,t),r(e,l),We(i,e,null),r(e,s),r(e,o),~u&&g[u].m(o,null),a=!0},p(p,[_]){let v=u;u=f(p),u!==v&&(c&&(Dl(),Pe(g[v],1,1,()=>{g[v]=null}),Ll()),~u?(c=g[u],c||(c=g[u]=d[u](p),c.c()),Re(c,1),c.m(o,null)):c=null)},i(p){a||(Re(i.$$.fragment,p),Re(c),a=!0)},o(p){Pe(i.$$.fragment,p),Pe(c),a=!1},d(p){p&&q(e),Ge(i),~u&&g[u].d()}}}function ws(n,e,t){let l;return Be(n,It,i=>t(0,l=i)),[l]}class bs extends Ze{constructor(e){super(),Ye(this,e,ws,vs,Oe,{})}}new bs({target:document.getElementById("app")});
